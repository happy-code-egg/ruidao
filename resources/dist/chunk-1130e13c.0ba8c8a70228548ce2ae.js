(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1130e13c"],{"0e98":function(t,e,a){},"334e":function(t,e,a){"use strict";a("0e98")},"3b34":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"payment-received-inquiry-container"},[e("div",{staticClass:"status-tabs"},[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleStatusChange},model:{value:t.activeStatus,callback:function(e){t.activeStatus=e},expression:"activeStatus"}},[e("el-tab-pane",{attrs:{label:"全部",name:"all"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-s-order"}),t._v(" 全部")])]),e("el-tab-pane",{attrs:{label:"草稿",name:"draft"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-edit-outline"}),t._v(" 草稿")])]),e("el-tab-pane",{attrs:{label:"待认领",name:"unclaimed"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-warning"}),t._v(" 待认领")])]),e("el-tab-pane",{attrs:{label:"已认领",name:"claimed"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-success"}),t._v(" 已认领")])]),e("el-tab-pane",{attrs:{label:"已核销",name:"written_off"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-finished"}),t._v(" 已核销")])]),e("el-tab-pane",{attrs:{label:"已退回",name:"returned"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-refresh-left"}),t._v(" 已退回")])])],1)],1),e("div",{staticClass:"body-part-search"},[e("el-form",{ref:"searchForm",attrs:{model:t.searchForm,"label-width":"100px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"到款单号",prop:"paymentNo"}},[e("el-input",{attrs:{placeholder:"到款单号",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.paymentNo,callback:function(e){t.$set(t.searchForm,"paymentNo",e)},expression:"searchForm.paymentNo"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"付款方",prop:"payer"}},[e("el-input",{attrs:{placeholder:"付款方名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.payer,callback:function(e){t.$set(t.searchForm,"payer",e)},expression:"searchForm.payer"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[e("el-input",{attrs:{placeholder:"客户名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.customerName,callback:function(e){t.$set(t.searchForm,"customerName",e)},expression:"searchForm.customerName"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"到账时间",prop:"receivedTimeRange"}},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"yyyy-MM-dd"},model:{value:t.searchForm.receivedTimeRange,callback:function(e){t.$set(t.searchForm,"receivedTimeRange",e)},expression:"searchForm.receivedTimeRange"}})],1)],1)],1),t.expandVisible?e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"金额范围",prop:"amountRange"}},[e("div",{staticClass:"amount-range"},[e("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:"最小",size:"small"},model:{value:t.searchForm.minAmount,callback:function(e){t.$set(t.searchForm,"minAmount",e)},expression:"searchForm.minAmount"}}),e("span",{staticStyle:{margin:"0 2%"}},[t._v("-")]),e("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:"最大",size:"small"},model:{value:t.searchForm.maxAmount,callback:function(e){t.$set(t.searchForm,"maxAmount",e)},expression:"searchForm.maxAmount"}})],1)])],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"关联合同",prop:"contractNo"}},[e("el-input",{attrs:{placeholder:"合同号",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.contractNo,callback:function(e){t.$set(t.searchForm,"contractNo",e)},expression:"searchForm.contractNo"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"关联请款单",prop:"requestNo"}},[e("el-input",{attrs:{placeholder:"请款单号",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.requestNo,callback:function(e){t.$set(t.searchForm,"requestNo",e)},expression:"searchForm.requestNo"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"认领人",prop:"claimedBy"}},[e("el-input",{attrs:{placeholder:"认领人",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.searchForm.claimedBy,callback:function(e){t.$set(t.searchForm,"claimedBy",e)},expression:"searchForm.claimedBy"}})],1)],1)],1):t._e()],1),e("div",{staticClass:"part-search-buttons"},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")]),e("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:t.handleReset}},[t._v("重置")]),e("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")])],1)],1),"all"===t.activeStatus?e("div",{staticClass:"stats-container"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value"},[t._v(t._s(t.statistics.total))]),e("div",{staticClass:"stat-label"},[t._v("总到款单")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value",staticStyle:{color:"#909399"}},[t._v(t._s(t.statistics.draft))]),e("div",{staticClass:"stat-label"},[t._v("草稿")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value",staticStyle:{color:"#e6a23c"}},[t._v(t._s(t.statistics.unclaimed))]),e("div",{staticClass:"stat-label"},[t._v("待认领")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value",staticStyle:{color:"#67c23a"}},[t._v(t._s(t.statistics.claimed))]),e("div",{staticClass:"stat-label"},[t._v("已认领")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value",staticStyle:{color:"#409eff"}},[t._v(t._s(t.statistics.writtenOff))]),e("div",{staticClass:"stat-label"},[t._v("已核销")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-value"},[t._v("¥"+t._s(t.statistics.totalAmount))]),e("div",{staticClass:"stat-label"},[t._v("到款总金额")])])])],1)],1):t._e(),e("div",{staticClass:"body-part-content"},[e("div",{staticClass:"part-table-header"},[e("div",{staticClass:"part-table-title"},[t._v("到款查询")]),e("div",{staticClass:"part-table-operations"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleRefresh}},[t._v("刷新")])],1)]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",size:"small","row-key":"id"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80"}}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e("el-table-column",{attrs:{prop:"paymentNo",label:"到款单号",width:"140","show-overflow-tooltip":"",fixed:"left"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getStatusType(a.row.status),size:"small"}},[t._v(" "+t._s(t.getStatusText(a.row.status))+" ")])]}}])}),e("el-table-column",{attrs:{prop:"amount",label:"到款金额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"amount-text"},[t._v("¥"+t._s(a.row.amount))])]}}])}),e("el-table-column",{attrs:{prop:"performanceAmount",label:"业绩金额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.performanceAmount>0?e("span",{staticClass:"amount-text"},[t._v(" ¥"+t._s(a.row.performanceAmount)+" ")]):e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("-")])]}}])}),e("el-table-column",{attrs:{prop:"currency",label:"币种",width:"80",align:"center"}}),e("el-table-column",{attrs:{prop:"payer",label:"付款方",width:"150","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"receivedTime",label:"到账时间",width:"150"}}),e("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.customerName?e("span",{staticClass:"link-text",on:{click:function(e){return t.handleViewCustomer(a.row.customerId)}}},[t._v(" "+t._s(a.row.customerName)+" ")]):e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("-")])]}}])}),e("el-table-column",{attrs:{prop:"contractNo",label:"关联合同",width:"130","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.contractNo?e("span",{staticClass:"link-text",on:{click:function(e){return t.handleViewContract(a.row.contractNo)}}},[t._v(" "+t._s(a.row.contractNo)+" ")]):e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("-")])]}}])}),e("el-table-column",{attrs:{prop:"requestNo",label:"关联请款单",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.requestNo?e("span",{staticClass:"link-text",on:{click:function(e){return t.handleViewRequest(a.row.requestNo)}}},[t._v(" "+t._s(a.row.requestNo)+" ")]):e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("-")])]}}])}),e("el-table-column",{attrs:{prop:"claimedBy",label:"认领人",width:"100"}}),e("el-table-column",{attrs:{prop:"claimedTime",label:"认领时间",width:"150"}}),e("el-table-column",{attrs:{prop:"writeOffAmount",label:"已核销金额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.writeOffAmount>0?e("span",{staticClass:"amount-text"},[t._v(" ¥"+t._s(a.row.writeOffAmount)+" ")]):e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("-")])]}}])}),e("el-table-column",{attrs:{prop:"remainingAmount",label:"剩余金额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"amount-text",class:{"zero-amount":a.row.remainingAmount<=0}},[t._v(" ¥"+t._s(a.row.remainingAmount)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleView(a.row)}}},[t._v("查看")])]}}])})],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{title:"到款详情",visible:t.viewDialogVisible,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[e("div",{staticClass:"payment-detail"},[e("div",{staticClass:"detail-section"},[e("h4",[t._v("基础信息")]),e("el-descriptions",{attrs:{column:3,border:""}},[e("el-descriptions-item",{attrs:{label:"到款单号"}},[t._v(t._s(t.viewData.paymentNo))]),e("el-descriptions-item",{attrs:{label:"状态"}},[e("el-tag",{attrs:{type:t.getStatusType(t.viewData.status),size:"small"}},[t._v(" "+t._s(t.getStatusText(t.viewData.status))+" ")])],1),e("el-descriptions-item",{attrs:{label:"到款金额"}},[e("span",{staticClass:"amount-highlight"},[t._v("¥"+t._s(t.viewData.amount))])]),e("el-descriptions-item",{attrs:{label:"币种"}},[t._v(t._s(t.viewData.currency))]),e("el-descriptions-item",{attrs:{label:"汇率"}},[t._v(t._s(t.viewData.exchangeRate||"1.0"))]),e("el-descriptions-item",{attrs:{label:"付款方"}},[t._v(t._s(t.viewData.payer))]),e("el-descriptions-item",{attrs:{label:"付款方账户"}},[t._v(t._s(t.viewData.payerAccount))]),e("el-descriptions-item",{attrs:{label:"到账时间"}},[t._v(t._s(t.viewData.receivedTime))]),e("el-descriptions-item",{attrs:{label:"收款账户"}},[t._v(t._s(t.viewData.bankAccount))]),e("el-descriptions-item",{attrs:{label:"付款方式"}},[t._v(t._s(t.viewData.paymentMethod))]),e("el-descriptions-item",{attrs:{label:"交易流水号"}},[t._v(t._s(t.viewData.transactionRef))]),e("el-descriptions-item",{attrs:{label:"录入人"}},[t._v(t._s(t.viewData.creator))])],1)],1),["claimed","written_off"].includes(t.viewData.status)?e("div",{staticClass:"detail-section"},[e("h4",[t._v("认领信息")]),e("el-descriptions",{attrs:{column:2,border:""}},[e("el-descriptions-item",{attrs:{label:"客户名称"}},[t._v(t._s(t.viewData.customerName||"-"))]),e("el-descriptions-item",{attrs:{label:"技术主导"}},[t._v(t._s(t.viewData.techLead||"-"))]),e("el-descriptions-item",{attrs:{label:"关联合同"}},[t.viewData.contractNo?e("span",{staticClass:"link-text",on:{click:function(e){return t.handleViewContract(t.viewData.contractNo)}}},[t._v(" "+t._s(t.viewData.contractNo)+" ")]):e("span",[t._v("-")])]),e("el-descriptions-item",{attrs:{label:"关联请款单"}},[t.viewData.requestNo?e("span",{staticClass:"link-text",on:{click:function(e){return t.handleViewRequest(t.viewData.requestNo)}}},[t._v(" "+t._s(t.viewData.requestNo)+" ")]):e("span",[t._v("-")])]),e("el-descriptions-item",{attrs:{label:"认领人"}},[t._v(t._s(t.viewData.claimedBy||"-"))]),e("el-descriptions-item",{attrs:{label:"认领时间"}},[t._v(t._s(t.viewData.claimedTime||"-"))])],1)],1):t._e(),"written_off"===t.viewData.status?e("div",{staticClass:"detail-section"},[e("h4",[t._v("核销信息")]),e("el-table",{attrs:{data:t.viewData.writeOffRecords,border:"",size:"small"}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e("el-table-column",{attrs:{prop:"writeOffNo",label:"核销单号",width:"140"}}),e("el-table-column",{attrs:{prop:"writeOffAmount",label:"核销金额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.writeOffAmount)+" ")]}}],null,!1,1141070246)}),e("el-table-column",{attrs:{prop:"writeOffDate",label:"核销日期",width:"120"}}),e("el-table-column",{attrs:{prop:"writeOffBy",label:"核销人",width:"100"}}),e("el-table-column",{attrs:{prop:"writeOffRemark",label:"核销备注"}})],1)],1):t._e(),e("div",{staticClass:"detail-section"},[e("h4",[t._v("备注信息")]),e("p",[t._v(t._s(t.viewData.remark||"无"))])])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.viewDialogVisible=!1}}},[t._v("关闭")])],1)])],1)},l=[],i=(a("14d9"),a("e9f5"),a("ab43"),{name:"PaymentReceivedInquiry",data(){return{loading:!1,expandVisible:!0,activeStatus:"all",searchForm:{paymentNo:"",payer:"",customerName:"",receivedTimeRange:[],minAmount:"",maxAmount:"",contractNo:"",requestNo:"",claimedBy:""},tableData:[],selectedRows:[],currentPage:1,pageSize:10,total:0,statistics:{total:0,draft:0,unclaimed:0,claimed:0,writtenOff:0,totalAmount:"0"},viewDialogVisible:!1,viewData:{}}},created(){this.getList(),this.getStatistics()},methods:{getList(){this.loading=!0,setTimeout(()=>{const t=["draft","unclaimed","claimed","written_off","returned"];this.tableData=Array.from({length:25}).map((e,a)=>{const s=t[Math.floor(Math.random()*t.length)],l=new Date(Date.now()-30*Math.random()*24*60*60*1e3),i=parseFloat((5e3+5e4*Math.random()).toFixed(2)),r="written_off"===s?i*(.3+.6*Math.random()):0,n="written_off"===s?parseFloat((r*(.5+.4*Math.random())).toFixed(2)):0;return{id:a+1,paymentNo:"DK"+String(Date.now()+a).slice(-8),status:"all"===this.activeStatus?s:this.activeStatus,amount:i.toFixed(2),currency:"CNY",payer:"付款公司"+(a+1),payerAccount:"****"+String(1e4*Math.random()).slice(-4),receivedTime:l.toLocaleString(),bankAccount:["工商银行 ****1234","建设银行 ****5678","招商银行 ****9012"][Math.floor(3*Math.random())],paymentMethod:["银行转账","电汇","支票"][Math.floor(3*Math.random())],transactionRef:"TXN"+String(Date.now()+a).slice(-12),customerName:["claimed","written_off"].includes(s)?"客户公司"+(a+1):"",customerId:["claimed","written_off"].includes(s)?"cust_"+(a+1):"",contractNo:Math.random()>.4?"HT"+String(1e4+a).padStart(6,"0"):"",requestNo:Math.random()>.5?"QK"+String(Date.now()+a).slice(-8):"",claimedBy:["claimed","written_off"].includes(s)?"商务员"+(a+1):"",claimedTime:["claimed","written_off"].includes(s)?new Date(l.getTime()+864e5).toLocaleString():"",techLead:["claimed","written_off"].includes(s)?"技术主导"+(a+1):"",writeOffAmount:r.toFixed(2),remainingAmount:(i-r).toFixed(2),performanceAmount:n.toFixed(2),remark:a%3===0?"到款备注信息"+(a+1):"",writeOffRecords:"written_off"===s?[{writeOffNo:"HX"+String(Date.now()+a).slice(-8),writeOffAmount:r.toFixed(2),writeOffDate:new Date(l.getTime()+1728e5).toLocaleDateString(),writeOffBy:"财务员"+(a+1),writeOffRemark:"核销备注"}]:[]}}),this.total=this.tableData.length,this.loading=!1},500)},getStatistics(){this.statistics={total:186,draft:23,unclaimed:48,claimed:89,writtenOff:26,totalAmount:"3,268,900.00"}},handleSearch(){this.currentPage=1,this.getList()},handleReset(){this.searchForm={paymentNo:"",payer:"",customerName:"",receivedTimeRange:[],minAmount:"",maxAmount:"",contractNo:"",requestNo:"",claimedBy:""},this.getList()},handleStatusChange(){this.currentPage=1,this.getList()},handleRefresh(){this.getList(),this.getStatistics()},handleSelectionChange(t){this.selectedRows=t},handleSizeChange(t){this.pageSize=t,this.getList()},handleCurrentChange(t){this.currentPage=t,this.getList()},getStatusType(t){const e={draft:"info",unclaimed:"warning",claimed:"success",written_off:"primary",returned:"danger"};return e[t]||""},getStatusText(t){const e={draft:"草稿",unclaimed:"待认领",claimed:"已认领",written_off:"已核销",returned:"已退回"};return e[t]||t},handleView(t){this.viewData={...t},this.viewDialogVisible=!0},handleCommand(t,e){switch(t){case"detail":this.handleView(e);break;case"history":this.$message.info("查看流转记录功能开发中");break;case"print":this.$message.info("打印功能开发中");break;case"export":this.$message.info("导出功能开发中");break}},handleViewCustomer(t){this.$message.info("查看客户详情: "+t)},handleViewContract(t){this.$message.info("查看合同详情: "+t)},handleViewRequest(t){this.$router.push("/finance/payment-request/detail/"+t)},handleExport(){this.$message.info("导出功能开发中")}}}),r=i,n=(a("334e"),a("2877")),o=Object(n["a"])(r,s,l,!1,null,"0976c8ee",null);e["default"]=o.exports}}]);