(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80303654"],{"3f0d":function(s,a,e){"use strict";var t=e("a417"),i=e("c1fb");const l={getNewApplications(s){return i["a"].get(t["a"].host+"/api/assignment/new-applications",{params:s})},getMiddleCases(s){return i["a"].get(t["a"].host+"/api/assignment/middle-cases",{params:s})},getTechServiceCases(s){return i["a"].get(t["a"].host+"/api/assignment/tech-service-cases",{params:s})},getAssignedCases(s){return i["a"].get(t["a"].host+"/api/assignment/assigned-cases",{params:s})},batchAssign(s){return i["a"].post(t["a"].host+"/api/assignment/batch-assign",s)},directAssign(s){return i["a"].post(t["a"].host+"/api/assignment/direct-assign",s)},withdrawAssignment(s){return i["a"].post(t["a"].host+"/api/assignment/withdraw-assignment",s)},getAssignableUsers(){return i["a"].get(t["a"].host+"/api/assignment/assignable-users")},getProcessDetail(s){return i["a"].get(t["a"].host+"/api/assignment/process-detail/"+s)},getCaseTypes(){return[{label:"专利",value:"patent"},{label:"商标",value:"trademark"},{label:"版权",value:"copyright"},{label:"科服",value:"tech_service"}]},getBusinessTypes(){return[{label:"新申请",value:"new"},{label:"答复",value:"response"},{label:"补正",value:"amendment"},{label:"缴费",value:"payment"},{label:"其他",value:"other"}]},getApplicationTypes(){return[{label:"发明专利",value:"invention"},{label:"实用新型",value:"utility"},{label:"外观设计",value:"design"},{label:"商标注册",value:"trademark_registration"},{label:"软件著作权",value:"software_copyright"}]},getProcessingItems(){return[{label:"审查意见答复",value:"response"},{label:"实质审查请求",value:"request"},{label:"缴费",value:"payment"},{label:"补正",value:"amendment"},{label:"登记",value:"registration"}]},getAssignmentStatuses(){return[{label:"未分配",value:"unassigned"},{label:"已分配",value:"assigned"},{label:"处理中",value:"processing"},{label:"已完成",value:"completed"}]}};a["a"]=l},"67cd":function(s,a,e){},"737d":function(s,a,e){"use strict";e("67cd")},fe6e:function(s,a,e){"use strict";e.r(a);var t=function(){var s=this,a=s._self._c;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"detail-header"},[a("h2",[s._v("新申请详情")]),a("div",{staticClass:"header-actions"},[a("el-button",{attrs:{size:"small"},on:{click:s.goBack}},[s._v("返回")]),s.processData.processor?s._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:s.handleAssign}},[s._v("分配")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:s.handleEdit}},[s._v("编辑")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:s.loading,expression:"loading"}],staticClass:"detail-content"},[a("el-card",{staticClass:"detail-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[s._v("基本信息")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("项目编号：")]),a("span",[s._v(s._s(s.processData.caseNumber))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("项目名称：")]),a("span",[s._v(s._s(s.processData.caseTitle))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("项目类型：")]),a("span",[s._v(s._s(s.processData.caseType))])])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("客户名称：")]),a("span",[s._v(s._s(s.processData.customerName))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("申请类型：")]),a("span",[s._v(s._s(s.processData.applyType))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("处理事项：")]),a("span",[s._v(s._s(s.processData.processItem))])])])],1)],1),a("el-card",{staticClass:"detail-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[s._v("分配信息")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("事项处理人：")]),a("span",[s._v(s._s(s.processData.processor||"未分配"))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("核稿人：")]),a("span",[s._v(s._s(s.processData.reviewer||"未分配"))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("分配状态：")]),a("el-tag",{attrs:{type:s.getStatusType(s.processData.assignmentStatus),size:"small"}},[s._v(" "+s._s(s.processData.assignmentStatus)+" ")])],1)])],1)],1),a("el-card",{staticClass:"detail-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[s._v("时间信息")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("事项创建日：")]),a("span",[s._v(s._s(s.processData.createDate))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("官方期限：")]),a("span",[s._v(s._s(s.processData.officialDeadline))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("内部期限：")]),a("span",[s._v(s._s(s.processData.internalDeadline))])])])],1)],1),a("el-card",{staticClass:"detail-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[s._v("其他信息")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("合同编号：")]),a("span",[s._v(s._s(s.processData.contractNo))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("售前支持：")]),a("span",[s._v(s._s(s.processData.support))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"detail-item"},[a("label",[s._v("是否冻结：")]),a("el-tag",{attrs:{type:"是"===s.processData.frozen?"danger":"success",size:"small"}},[s._v(" "+s._s(s.processData.frozen)+" ")])],1)])],1)],1),a("el-card",{staticClass:"detail-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[s._v("操作记录")])]),a("el-timeline",s._l(s.operationHistory,(function(e,t){return a("el-timeline-item",{key:t,attrs:{timestamp:e.timestamp,type:e.type}},[s._v(" "+s._s(e.content)+" ")])})),1)],1)],1),a("el-dialog",{attrs:{title:"分配处理事项",visible:s.showAssignDialog,width:"500px"},on:{"update:visible":function(a){s.showAssignDialog=a}}},[a("el-form",{ref:"assignForm",attrs:{model:s.assignForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"处理人",prop:"processor",rules:[{required:!0,message:"请选择处理人"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择处理人"},model:{value:s.assignForm.processor,callback:function(a){s.$set(s.assignForm,"processor",a)},expression:"assignForm.processor"}},s._l(s.processorOptions,(function(s){return a("el-option",{key:s.value,attrs:{label:s.label,value:s.value}})})),1)],1),a("el-form-item",{attrs:{label:"核稿人",prop:"reviewer"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择核稿人"},model:{value:s.assignForm.reviewer,callback:function(a){s.$set(s.assignForm,"reviewer",a)},expression:"assignForm.reviewer"}},s._l(s.reviewerOptions,(function(s){return a("el-option",{key:s.value,attrs:{label:s.label,value:s.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){s.showAssignDialog=!1}}},[s._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:s.confirmAssign}},[s._v("确认分配")])],1)],1)],1)},i=[],l=(e("14d9"),e("e9f5"),e("f665"),e("ab43"),e("3f0d")),r={name:"NewApplicationDetail",data(){return{loading:!1,processData:{},operationHistory:[{content:"处理事项创建",timestamp:"2024-01-15 10:30:00",type:"primary"}],showAssignDialog:!1,assignForm:{processor:"",reviewer:""},processorOptions:[],reviewerOptions:[]}},created(){this.fetchData(),this.loadUserOptions()},methods:{async fetchData(){this.loading=!0;try{const s=this.$route.params.id,a=await l["a"].getNewApplications({page:1,limit:100});if(a.data.success){const e=a.data.data.list.find(a=>a.id===s);e?this.processData=e:(this.$message.error("未找到相关数据"),this.goBack())}else this.$message.error(a.data.message||"查询失败")}catch(s){console.error("查询详情失败:",s),this.$message.error("查询失败，请稍后重试")}finally{this.loading=!1}},async loadUserOptions(){try{const s=await l["a"].getAssignableUsers();if(s.data.success){const a=s.data.data;this.processorOptions=a.map(s=>({value:s.id,label:s.name})),this.reviewerOptions=a.map(s=>({value:s.id,label:s.name}))}}catch(s){console.error("加载用户选项失败:",s)}},handleAssign(){this.assignForm={processor:"",reviewer:""},this.showAssignDialog=!0},async confirmAssign(){this.$refs.assignForm.validate(async s=>{if(s)try{const s=await l["a"].directAssign({process_id:this.processData.id,assigned_to:this.assignForm.processor,reviewer:this.assignForm.reviewer});s.data.success?(this.$message.success("分配成功"),this.showAssignDialog=!1,this.fetchData(),this.operationHistory.unshift({content:"分配处理事项",timestamp:(new Date).toLocaleString(),type:"success"})):this.$message.error(s.data.message||"分配失败")}catch(a){console.error("分配失败:",a),this.$message.error("分配失败，请稍后重试")}})},handleEdit(){this.$router.push({name:"CaseEdit",params:{id:this.processData.id}})},goBack(){this.$router.go(-1)},getStatusType(s){const a={"未分配":"warning","已分配":"success","处理中":"primary","已完成":"success"};return a[s]||"info"}}},n=r,o=(e("737d"),e("2877")),c=Object(o["a"])(n,t,i,!1,null,"10f4b814",null);a["default"]=c.exports}}]);