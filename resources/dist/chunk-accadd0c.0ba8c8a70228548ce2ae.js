(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-accadd0c"],{"1ae8":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"deadline-page"},[t("el-card",{staticClass:"search-card"},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("期限监控")])]),t("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"我方文号"}},[t("el-input",{attrs:{placeholder:"请输入我方文号"},model:{value:e.searchForm.ourRefNumber,callback:function(t){e.$set(e.searchForm,"ourRefNumber",t)},expression:"searchForm.ourRefNumber"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"项目类型"}},[t("el-select",{attrs:{placeholder:"请选择项目类型"},model:{value:e.searchForm.caseType,callback:function(t){e.$set(e.searchForm,"caseType",t)},expression:"searchForm.caseType"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"专利",value:"patent"}}),t("el-option",{attrs:{label:"商标",value:"trademark"}}),t("el-option",{attrs:{label:"版权",value:"copyright"}}),t("el-option",{attrs:{label:"项目",value:"project"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"期限类型"}},[t("el-select",{attrs:{placeholder:"请选择期限类型"},model:{value:e.searchForm.deadlineType,callback:function(t){e.$set(e.searchForm,"deadlineType",t)},expression:"searchForm.deadlineType"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"官方期限",value:"official"}}),t("el-option",{attrs:{label:"自定义期限",value:"custom"}}),t("el-option",{attrs:{label:"续展期限",value:"renewal"}}),t("el-option",{attrs:{label:"年费期限",value:"annual"}}),t("el-option",{attrs:{label:"其他期限",value:"other"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"紧急程度"}},[t("el-select",{attrs:{placeholder:"请选择紧急程度"},model:{value:e.searchForm.urgency,callback:function(t){e.$set(e.searchForm,"urgency",t)},expression:"searchForm.urgency"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"紧急",value:"urgent"}}),t("el-option",{attrs:{label:"一般",value:"normal"}}),t("el-option",{attrs:{label:"低",value:"low"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"期限日期"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.searchForm.deadlineDateRange,callback:function(t){e.$set(e.searchForm,"deadlineDateRange",t)},expression:"searchForm.deadlineDateRange"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理人"}},[t("el-input",{attrs:{placeholder:"请输入处理人"},model:{value:e.searchForm.handler,callback:function(t){e.$set(e.searchForm,"handler",t)},expression:"searchForm.handler"}})],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{on:{click:e.resetForm}},[e._v("重置")]),t("el-button",{attrs:{type:"success"},on:{click:e.exportExcel}},[e._v("导出Excel")])],1)],1),t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"全部期限",name:"all"}}),t("el-tab-pane",{attrs:{label:"30天内到期",name:"30days"}}),t("el-tab-pane",{attrs:{label:"7天内到期",name:"7days"}}),t("el-tab-pane",{attrs:{label:"今日到期",name:"today"}}),t("el-tab-pane",{attrs:{label:"已过期",name:"expired"}}),t("el-tab-pane",{attrs:{label:"已处理",name:"handled"}})],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"}}),t("el-table-column",{attrs:{prop:"ourRefNumber",label:"我方文号",width:"120"}}),t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"caseType",label:"项目类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return["patent"===a.row.caseType?t("el-tag",{attrs:{type:"success"}},[e._v("专利")]):"trademark"===a.row.caseType?t("el-tag",{attrs:{type:"primary"}},[e._v("商标")]):"copyright"===a.row.caseType?t("el-tag",{attrs:{type:"warning"}},[e._v("版权")]):"project"===a.row.caseType?t("el-tag",{attrs:{type:"info"}},[e._v("项目")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"deadlineType",label:"期限类型",width:"100"}}),t("el-table-column",{attrs:{prop:"deadlineDate",label:"期限日期",width:"120"}}),t("el-table-column",{attrs:{prop:"daysLeft",label:"剩余天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.daysLeft<0?t("el-tag",{attrs:{type:"danger"}},[e._v("已过期"+e._s(Math.abs(a.row.daysLeft))+"天")]):0===a.row.daysLeft?t("el-tag",{attrs:{type:"danger"}},[e._v("今日到期")]):a.row.daysLeft<=7?t("el-tag",{attrs:{type:"warning"}},[e._v(e._s(a.row.daysLeft)+"天")]):a.row.daysLeft<=30?t("el-tag",{attrs:{type:"primary"}},[e._v(e._s(a.row.daysLeft)+"天")]):t("span",[e._v(e._s(a.row.daysLeft)+"天")])]}}])}),t("el-table-column",{attrs:{prop:"urgency",label:"紧急程度",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return["urgent"===a.row.urgency?t("el-tag",{attrs:{type:"danger"}},[e._v("紧急")]):"normal"===a.row.urgency?t("el-tag",{attrs:{type:"warning"}},[e._v("一般")]):"low"===a.row.urgency?t("el-tag",{attrs:{type:"info"}},[e._v("低")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"handler",label:"处理人",width:"100"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return["pending"===a.row.status?t("el-tag",{attrs:{type:"warning"}},[e._v("待处理")]):"handled"===a.row.status?t("el-tag",{attrs:{type:"success"}},[e._v("已处理")]):"expired"===a.row.status?t("el-tag",{attrs:{type:"danger"}},[e._v("已过期")]):e._e()]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleViewDetail(a.row)}}},[e._v("查看")]),"handled"!==a.row.status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleMarkDone(a.row)}}},[e._v("标记完成")]):e._e(),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleRemind(a.row)}}},[e._v("提醒")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddNote(a.row)}}},[e._v("添加备注")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"添加备注",visible:e.noteDialogVisible,width:"500px"},on:{"update:visible":function(t){e.noteDialogVisible=t}}},[t("el-form",{attrs:{model:e.noteForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"备注内容"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注内容"},model:{value:e.noteForm.content,callback:function(t){e.$set(e.noteForm,"content",t)},expression:"noteForm.content"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.noteDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitNote}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"发送提醒",visible:e.remindDialogVisible,width:"500px"},on:{"update:visible":function(t){e.remindDialogVisible=t}}},[t("el-form",{attrs:{model:e.remindForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"提醒方式"}},[t("el-checkbox-group",{model:{value:e.remindForm.methods,callback:function(t){e.$set(e.remindForm,"methods",t)},expression:"remindForm.methods"}},[t("el-checkbox",{attrs:{label:"email"}},[e._v("邮件")]),t("el-checkbox",{attrs:{label:"sms"}},[e._v("短信")]),t("el-checkbox",{attrs:{label:"system"}},[e._v("系统消息")])],1)],1),t("el-form-item",{attrs:{label:"提醒对象"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择提醒对象"},model:{value:e.remindForm.receivers,callback:function(t){e.$set(e.remindForm,"receivers",t)},expression:"remindForm.receivers"}},[t("el-option",{attrs:{label:"李明",value:"李明"}}),t("el-option",{attrs:{label:"张雅霞",value:"张雅霞"}}),t("el-option",{attrs:{label:"王强",value:"王强"}}),t("el-option",{attrs:{label:"刘萍",value:"刘萍"}})],1)],1),t("el-form-item",{attrs:{label:"提醒内容"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入提醒内容"},model:{value:e.remindForm.content,callback:function(t){e.$set(e.remindForm,"content",t)},expression:"remindForm.content"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.remindDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitRemind}},[e._v("确 定")])],1)],1)],1)},r=[],s=(a("14d9"),{name:"DeadlineMonitor",data(){return{loading:!1,activeTab:"all",searchForm:{ourRefNumber:"",caseType:"",deadlineType:"",urgency:"",deadlineDateRange:[],handler:""},tableData:[],currentPage:1,pageSize:10,total:0,noteDialogVisible:!1,noteForm:{id:null,content:""},remindDialogVisible:!1,remindForm:{id:null,methods:["system"],receivers:[],content:""}}},created(){this.fetchData()},methods:{fetchData(){this.loading=!0,setTimeout(()=>{this.tableData=[{id:1,ourRefNumber:"TCN231001",name:"一种农业灌溉装置",caseType:"patent",deadlineType:"官方期限",deadlineDate:"2023-07-01",daysLeft:5,urgency:"urgent",handler:"李明",status:"pending"},{id:2,ourRefNumber:"YMT172-0001",name:"优贝",caseType:"trademark",deadlineType:"续展期限",deadlineDate:"2023-07-15",daysLeft:19,urgency:"normal",handler:"张雅霞",status:"pending"},{id:3,ourRefNumber:"CCHC7630001",name:"数据管理系统V1.0",caseType:"copyright",deadlineType:"官方期限",deadlineDate:"2023-06-25",daysLeft:-1,urgency:"urgent",handler:"刘萍",status:"expired"},{id:4,ourRefNumber:"KCNZ4090002",name:"城市规划管理信息化系统",caseType:"project",deadlineType:"自定义期限",deadlineDate:"2023-08-10",daysLeft:45,urgency:"low",handler:"王强",status:"handled"}],this.total=4,this.loading=!1},500)},handleSearch(){this.currentPage=1,this.fetchData()},resetForm(){this.$refs.searchForm.resetFields()},exportExcel(){this.$message.success("已导出期限数据到Excel文件")},handleTabClick(e){this.fetchData()},handleViewDetail(e){const t={patent:"/case/patent/detail/",trademark:"/case/trademark/detail/",copyright:"/case/copyright/detail/",project:"/case/project/detail/"},a=t[e.caseType]+e.id;this.$router.push({path:a,query:{refNumber:e.ourRefNumber}})},handleMarkDone(e){this.$confirm("确认将此期限标记为已完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("标记成功"),this.fetchData()}).catch(()=>{this.$message.info("已取消操作")})},handleAddNote(e){this.noteForm.id=e.id,this.noteForm.content="",this.noteDialogVisible=!0},submitNote(){this.noteForm.content?(this.$message.success("备注添加成功"),this.noteDialogVisible=!1):this.$message.warning("请输入备注内容")},handleRemind(e){this.remindForm.id=e.id,this.remindForm.methods=["system"],this.remindForm.receivers=[e.handler],this.remindForm.content=`您负责的项目(${e.ourRefNumber} ${e.name})有一个${e.deadlineType}将于${e.deadlineDate}到期，请及时处理。`,this.remindDialogVisible=!0},submitRemind(){0!==this.remindForm.methods.length?0!==this.remindForm.receivers.length?(this.$message.success("提醒发送成功"),this.remindDialogVisible=!1):this.$message.warning("请选择至少一个提醒对象"):this.$message.warning("请选择至少一种提醒方式")},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()}}}),n=s,o=(a("f1d8"),a("2877")),i=Object(o["a"])(n,l,r,!1,null,"e2368102",null);t["default"]=i.exports},"2dcd":function(e,t,a){},f1d8:function(e,t,a){"use strict";a("2dcd")}}]);