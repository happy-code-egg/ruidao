(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-466cc39c"],{"3f0d":function(e,a,t){"use strict";var s=t("a417"),l=t("c1fb");const i={getNewApplications(e){return l["a"].get(s["a"].host+"/api/assignment/new-applications",{params:e})},getMiddleCases(e){return l["a"].get(s["a"].host+"/api/assignment/middle-cases",{params:e})},getTechServiceCases(e){return l["a"].get(s["a"].host+"/api/assignment/tech-service-cases",{params:e})},getAssignedCases(e){return l["a"].get(s["a"].host+"/api/assignment/assigned-cases",{params:e})},batchAssign(e){return l["a"].post(s["a"].host+"/api/assignment/batch-assign",e)},directAssign(e){return l["a"].post(s["a"].host+"/api/assignment/direct-assign",e)},withdrawAssignment(e){return l["a"].post(s["a"].host+"/api/assignment/withdraw-assignment",e)},getAssignableUsers(){return l["a"].get(s["a"].host+"/api/assignment/assignable-users")},getProcessDetail(e){return l["a"].get(s["a"].host+"/api/assignment/process-detail/"+e)},getCaseTypes(){return[{label:"专利",value:"patent"},{label:"商标",value:"trademark"},{label:"版权",value:"copyright"},{label:"科服",value:"tech_service"}]},getBusinessTypes(){return[{label:"新申请",value:"new"},{label:"答复",value:"response"},{label:"补正",value:"amendment"},{label:"缴费",value:"payment"},{label:"其他",value:"other"}]},getApplicationTypes(){return[{label:"发明专利",value:"invention"},{label:"实用新型",value:"utility"},{label:"外观设计",value:"design"},{label:"商标注册",value:"trademark_registration"},{label:"软件著作权",value:"software_copyright"}]},getProcessingItems(){return[{label:"审查意见答复",value:"response"},{label:"实质审查请求",value:"request"},{label:"缴费",value:"payment"},{label:"补正",value:"amendment"},{label:"登记",value:"registration"}]},getAssignmentStatuses(){return[{label:"未分配",value:"unassigned"},{label:"已分配",value:"assigned"},{label:"处理中",value:"processing"},{label:"已完成",value:"completed"}]}};a["a"]=i},"4fce":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"body-part-search"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleBatchDistribute}},[e._v("转部门分配")])],1),a("div",{staticClass:"body-part-content"},[e._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"small",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"ourRefNumber",label:"我方文号",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"caseName",label:"项目名称","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"businessType",label:"业务类型",width:"120"}}),a("el-table-column",{attrs:{prop:"applicationType",label:"申请类型",width:"120"}}),a("el-table-column",{attrs:{prop:"clientName",label:"客户名称",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"technicalLead",label:"技术主导",width:"120"}}),a("el-table-column",{attrs:{prop:"receivingDate",label:"收单日期",width:"120"}}),a("el-table-column",{attrs:{prop:"projectYear",label:"项目年份",width:"120"}}),a("el-table-column",{attrs:{prop:"declarationBatch",label:"申报批次",width:"120"}}),a("el-table-column",{attrs:{prop:"techServiceLevel",label:"科技服务级别",width:"140"}}),a("el-table-column",{attrs:{prop:"supervisorArea",label:"主管地",width:"120"}}),a("el-table-column",{attrs:{prop:"responsibleBusinessPerson",label:"项目业务人员",width:"140"}}),a("el-table-column",{attrs:{prop:"presalesSupport",label:"售前支持",width:"120"}}),a("el-table-column",{attrs:{prop:"projectHandler",label:"项目处理人",width:"120"}}),a("el-table-column",{attrs:{prop:"configStatus",label:"配置状态",width:"120"}}),a("el-table-column",{attrs:{prop:"statusTime",label:"状态时间",width:"120"}}),a("el-table-column",{attrs:{prop:"caseRemarks",label:"项目备注",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("查看")])]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},l=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-header"},[a("div",{staticClass:"part-table-title"},[a("span",[e._v("待分配项目")])])])}],i=(t("14d9"),t("e9f5"),t("ab43"),t("3f0d")),r={name:"ProjectAssignment",data(){return{loading:!1,tableData:[],currentPage:1,pageSize:10,total:0,multipleSelection:[]}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const e={page:this.currentPage,limit:this.pageSize},a=await i["a"].getTechServiceCases(e);a.data.success?(this.tableData=a.data.data.list,this.total=a.data.data.total,this.currentPage=a.data.data.current_page||1):(this.$message.error(a.data.message||"查询失败"),setTimeout(()=>{this.tableData=[{id:1,ourRefNumber:"EM-PRJ-2023-0001",caseName:"可穿戴设备项目申请",businessType:"专利申请",applicationType:"发明专利",clientName:"北京科技有限公司",technicalLead:"张工",receivingDate:"2023-05-10",projectYear:"2023",declarationBatch:"第一批",techServiceLevel:"高级",supervisorArea:"北京",responsibleBusinessPerson:"李经理",presalesSupport:"王顾问",projectHandler:"张三",configStatus:"已配置",statusTime:"2023-05-15",caseRemarks:"北京科技有限公司重点项目"},{id:2,ourRefNumber:"EM-PRJ-2023-0002",caseName:"智能家居控制系统",businessType:"专利申请",applicationType:"实用新型",clientName:"深圳智能科技有限公司",technicalLead:"李工",receivingDate:"2023-06-05",projectYear:"2023",declarationBatch:"第二批",techServiceLevel:"中级",supervisorArea:"深圳",responsibleBusinessPerson:"王经理",presalesSupport:"赵顾问",projectHandler:"李四",configStatus:"未配置",statusTime:"2023-06-10",caseRemarks:"智能家居控制系统项目，涉及多项专利申请"},{id:3,ourRefNumber:"EM-PRJ-2023-0003",caseName:"品牌标识设计",businessType:"商标申请",applicationType:"普通商标",clientName:"广州品牌策划有限公司",technicalLead:"赵工",receivingDate:"2023-07-01",projectYear:"2023",declarationBatch:"第三批",techServiceLevel:"基础",supervisorArea:"广州",responsibleBusinessPerson:"钱经理",presalesSupport:"孙顾问",projectHandler:"王五",configStatus:"已配置",statusTime:"2023-07-05",caseRemarks:"广州品牌策划有限公司新品牌标识设计及申请"}],this.total=3},500))}catch(e){console.error("查询项目数据失败:",e),this.$message.error("查询失败，请稍后重试")}finally{this.loading=!1}},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},handleView(e){this.$router.push("/case/assignment/project/detail/"+e.id)},async handleBatchDistribute(){if(0!==this.multipleSelection.length)try{const e=this.multipleSelection.map(e=>e.id),a=await i["a"].batchAssign({process_ids:e,assigned_to:null,reviewer:null});a.data.success?(this.$message.success("转部门分配成功"),this.fetchData()):this.$message.error(a.data.message||"分配失败")}catch(e){console.error("转部门分配失败:",e),this.$message.error("分配失败，请稍后重试")}else this.$message.warning("请至少选择一条记录")}}},n=r,o=t("2877"),c=Object(o["a"])(n,s,l,!1,null,"6610c286",null);a["default"]=c.exports}}]);