(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37c78e1a"],{"0d26":function(e,t,a){"use strict";var l=a("e330"),o=Error,r=l("".replace),s=function(e){return String(new o(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,n=i.test(s);e.exports=function(e,t){if(n&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=r(e,i,"");return e}},1787:function(e,t,a){"use strict";var l=a("861d");e.exports=function(e){return l(e)||null===e}},"1ed0":function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process-matter-selector"},[t("el-input",{staticStyle:{cursor:"pointer"},attrs:{value:e.displayValue,placeholder:e.placeholder,readonly:""},on:{click:function(t){e.showDialog=!0}}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.showDialog=!0}},slot:"append"})],1),t("el-dialog",{staticClass:"process-matter-selector-dialog",attrs:{title:"选择处理事项",visible:e.showDialog,width:"80%",modal:!1,"z-index":"9999","close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("div",{staticClass:"filter-section"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"处理事项类型"}},[t("el-checkbox-group",{model:{value:e.filterForm.processTypes,callback:function(t){e.$set(e.filterForm,"processTypes",t)},expression:"filterForm.processTypes"}},e._l(e.processTypeOptions,(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1),t("el-form-item",[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入处理事项名称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1)],1),t("div",{staticClass:"matter-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"matterTable",attrs:{data:e.filteredMatterList,border:"",size:"small","max-height":"400"},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[e.multiple?t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}):t("el-table-column",{attrs:{width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{value:e.selectedSingle,label:a.row.id},on:{change:function(t){return e.handleSingleSelect(a.row)}}},[e._v(" ")])]}}])}),t("el-table-column",{attrs:{prop:"process_name",label:"处理事项名称"}}),t("el-table-column",{attrs:{prop:"process_type",label:"处理事项类型",align:"center"}}),t("el-table-column",{attrs:{prop:"case_type",label:"项目类型",align:"center"}}),t("el-table-column",{attrs:{prop:"business_type",label:"业务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(Array.isArray(t.row.business_type)?t.row.business_type.join(", "):t.row.business_type)+" ")]}}])})],1),e.loading||0!==e.filteredMatterList.length?e._e():t("div",{staticClass:"empty-state"},[t("el-empty",{attrs:{description:"暂无处理事项数据","image-size":80}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1)])],1)},o=[],r=(a("e9f5"),a("910d"),a("f665"),a("7d54"),a("ab43"),{name:"ProcessMatterSelector",props:{value:{type:[String,Array],default:()=>[]},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择处理事项"},caseType:{type:String,default:""},applicationType:{type:[String,Array],default:()=>[]}},data(){return{showDialog:!1,loading:!1,matterList:[],filteredMatterList:[],selectedItems:[],selectedSingle:null,processTypeOptions:[],filterForm:{processTypes:[],keyword:""}}},computed:{displayValue(){return this.multiple?Array.isArray(this.value)&&this.value.length>0?`已选择 ${this.value.length} 项`:"":this.value||""}},watch:{showDialog(e){e&&(this.loadProcessTypeOptions(),this.loadMatterList(),this.initSelectedItems())},"filterForm.processTypes":{handler(){this.showDialog&&this.handleFilter()},deep:!0},"filterForm.keyword":{handler(){this.showDialog&&this.handleFilter()}}},methods:{async loadProcessTypeOptions(){try{const e=await this.$api.dataConfig.processType.getOptions();0===e.data.code&&(this.processTypeOptions=e.data.data.map(e=>({value:e.name,label:e.name})),this.processTypeOptions.length>0&&0===this.filterForm.processTypes.length&&(this.filterForm.processTypes=[]))}catch(e){console.error("加载处理事项类型失败:",e)}},async loadMatterList(){this.loading=!0;try{const e={is_valid:1};this.caseType&&(e.case_type=this.caseType),this.applicationType&&this.applicationType.length>0&&(e.application_type=Array.isArray(this.applicationType)?this.applicationType:[this.applicationType]),this.filterForm.processTypes.length>0&&(e.process_types=this.filterForm.processTypes),this.filterForm.keyword&&(e.keyword=this.filterForm.keyword);const t=await this.$api.dataConfig.processInformation.getFilteredOptions(e);0===t.data.code?(this.matterList=t.data.data||[],this.filteredMatterList=[...this.matterList],this.initSelectedItems()):this.$message.error(t.data.msg||"获取处理事项列表失败")}catch(e){console.error("获取处理事项列表失败:",e),this.$message.error("获取处理事项列表失败")}finally{this.loading=!1}},handleFilter(){this.loadMatterList()},initSelectedItems(){if(this.multiple){const e=Array.isArray(this.value)?this.value:[];this.selectedItems=this.filteredMatterList.filter(t=>e.includes(t.process_name)),this.$nextTick(()=>{this.$refs.matterTable&&(this.$refs.matterTable.clearSelection(),this.selectedItems.forEach(e=>{this.$refs.matterTable.toggleRowSelection(e,!0)}))})}else{const e=this.filteredMatterList.find(e=>e.process_name===this.value);this.selectedSingle=e?e.id:null}},handleSelectionChange(e){this.selectedItems=e},handleRowClick(e){this.multiple||(this.selectedSingle=e.id)},handleSingleSelect(e){this.selectedSingle=e.id},handleConfirm(){if(this.multiple){const e=this.selectedItems.map(e=>e.process_name);this.$emit("input",e),this.$emit("change",e,this.selectedItems)}else{const e=this.filteredMatterList.find(e=>e.id===this.selectedSingle),t=e?e.process_name:"";this.$emit("input",t),this.$emit("change",t,e)}this.showDialog=!1},handleCancel(){this.showDialog=!1,this.initSelectedItems()}}}),s=r,i=(a("23d7"),a("2877")),n=Object(i["a"])(s,l,o,!1,null,"944244a6",null);t["a"]=n.exports},"23d7":function(e,t,a){"use strict";a("4583")},"2ba4":function(e,t,a){"use strict";var l=a("40d5"),o=Function.prototype,r=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(l?s.bind(r):function(){return s.apply(r,arguments)})},"3add":function(e,t,a){},"3bbe":function(e,t,a){"use strict";var l=a("1787"),o=String,r=TypeError;e.exports=function(e){if(l(e))return e;throw new r("Can't set "+o(e)+" as a prototype")}},4583:function(e,t,a){},"49f7":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"notification-rule-container"},[t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"left-tree"},[t("div",{staticClass:"search-area"},[t("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入关键词",clearable:""},on:{input:e.handleSearch,clear:e.handleSearch},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1),t("el-tree",{staticClass:"tree-menu",attrs:{data:e.filteredTreeData,props:e.treeProps,"default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:a,data:l}){return[t("span",{staticClass:"tree-node"},[t("i",{class:l.icon||"el-icon-document"}),t("span",[e._v(e._s(a.label))]),l.code?t("span",{staticClass:"node-code"},[e._v(e._s(l.code))]):e._e()])]}}])})],1),t("div",{staticClass:"right-content"},[t("div",{staticClass:"file-info-area"},[e.selectedFileInfo?t("el-table",{staticClass:"info-table",attrs:{data:[e.selectedFileInfo],border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sequence",label:"序号",width:"80"}}),t("el-table-column",{attrs:{align:"center",prop:"caseType",label:"项目类型",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"country",label:"国家（地区）",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"documentType",label:"文件大类"}}),t("el-table-column",{attrs:{align:"center",prop:"documentSubType",label:"文件小类"}}),t("el-table-column",{attrs:{align:"center",prop:"documentName",label:"文件名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",prop:"documentNo",label:"文件编号"}}),t("el-table-column",{attrs:{align:"center",prop:"content",label:"内部代码"}}),t("el-table-column",{attrs:{align:"center",prop:"isEffective",label:"是否有效",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:a.row.isEffective?"success":"danger"}},[e._v(" "+e._s(a.row.isEffective?"有效":"无效")+" ")])]}}],null,!1,2633416153)})],1):e._e()],1),e.selectedFileInfo?t("div",{staticClass:"rule-management"},[t("div",{staticClass:"rule-header"},[t("h3",[e._v("规则管理")]),t("div",{staticClass:"rule-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAddRuleDialog}},[e._v("添加规则")])],1)]),t("el-table",{staticClass:"rule-table",staticStyle:{width:"100%"},attrs:{data:e.ruleData,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sequence",label:"序号",width:"80"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleName",label:"规则名称",width:"200"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleDescription",label:"规则描述"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleType",label:"规则类型",width:"150"}}),t("el-table-column",{attrs:{align:"center",prop:"isEffective",label:"是否有效",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:a.row.isEffective?"success":"danger"}},[e._v(" "+e._s(a.row.isEffective?"有效":"无效")+" ")])]}}],null,!1,2633416153)}),t("el-table-column",{attrs:{align:"center",prop:"updater",label:"更新人",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新时间",width:"160"}}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openViewRuleDialog(a.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openEditRuleDialog(a.row)}}},[e._v("编辑")])]}}],null,!1,1608492686)})],1)],1):e._e()])]),t("el-dialog",{attrs:{visible:e.dialogVisible.addRule,title:"增加规则",width:"600px"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"addRule",t)},close:e.resetRuleForm},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:e.closeAddRuleDialog}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitRuleForm}},[e._v("保存")])]},proxy:!0}])},[t("el-form",{ref:"ruleFormRef",attrs:{model:e.ruleForm,rules:e.ruleFormRules,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.ruleName,callback:function(t){e.$set(e.ruleForm,"ruleName",t)},expression:"ruleForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.ruleType,callback:function(t){e.$set(e.ruleForm,"ruleType",t)},expression:"ruleForm.ruleType"}},[t("el-option",{attrs:{label:"新增处理事项",value:"add_process"}}),t("el-option",{attrs:{label:"更新处理事项",value:"update_process"}}),t("el-option",{attrs:{label:"更新项目状态",value:"update_status"}}),t("el-option",{attrs:{label:"更新项目信息",value:"update_info"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.ruleDescription,callback:function(t){e.$set(e.ruleForm,"ruleDescription",t)},expression:"ruleForm.ruleDescription"}})],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.addProcess,title:e.isViewMode?"查看新增处理事项规则":"新增处理事项规则",width:"80%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"addProcess",t)},close:e.resetAddForm},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeAddProcessDialog}},[e._v(e._s(e.isViewMode?"关闭":"取消"))]),e.isViewMode?e._e():t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAddForm}},[e._v("保存")])]},proxy:!0}])},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.addForm.ruleName,callback:function(t){e.$set(e.addForm,"ruleName",t)},expression:"addForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.addForm.ruleDescription,callback:function(t){e.$set(e.addForm,"ruleDescription",t)},expression:"addForm.ruleDescription"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.addForm.ruleType,callback:function(t){e.$set(e.addForm,"ruleType",t)},expression:"addForm.ruleType"}},[t("el-option",{attrs:{label:"新增处理事项",value:"add_process"}}),t("el-option",{attrs:{label:"更新处理事项",value:"update_process"}}),t("el-option",{attrs:{label:"更新项目状态",value:"update_status"}}),t("el-option",{attrs:{label:"更新项目信息",value:"update_info"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否配案",prop:"isConfig"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:e.isViewMode},model:{value:e.addForm.isConfig,callback:function(t){e.$set(e.addForm,"isConfig",t)},expression:"addForm.isConfig"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理事项",prop:"processItem"}},[t("ProcessMatterSelector",{attrs:{multiple:!1,placeholder:"请选择处理事项",disabled:e.isViewMode},on:{change:e.handleProcessItemChange},model:{value:e.addForm.processItem,callback:function(t){e.$set(e.addForm,"processItem",t)},expression:"addForm.processItem"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理状态",prop:"processStatus"}},[t("el-select",{attrs:{placeholder:"列表选取",disabled:e.isViewMode},model:{value:e.addForm.processStatus,callback:function(t){e.$set(e.addForm,"processStatus",t)},expression:"addForm.processStatus"}},e._l(e.processStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否上传附件",prop:"isUpload"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.isUpload,callback:function(t){e.$set(e.addForm,"isUpload",t)},expression:"addForm.isUpload"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"转文时完成",prop:"transferTarget"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.transferTarget,callback:function(t){e.$set(e.addForm,"transferTarget",t)},expression:"addForm.transferTarget"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.isEffective,callback:function(t){e.$set(e.addForm,"isEffective",t)},expression:"addForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"附件名称配置",prop:"attachmentNameConfig"}},[t("el-select",{attrs:{placeholder:"请选择字段",multiple:"",clearable:""},model:{value:e.addForm.attachmentNameConfig,callback:function(t){e.$set(e.addForm,"attachmentNameConfig",t)},expression:"addForm.attachmentNameConfig"}},[t("el-option",{attrs:{label:"项目字段",value:"case_field"}}),t("el-option",{attrs:{label:"我方文号",value:"our_file_no"}}),t("el-option",{attrs:{label:"申请号",value:"application_no"}}),t("el-option",{attrs:{label:"项目名称",value:"case_name"}}),t("el-option",{attrs:{label:"客户名称",value:"customer_name"}}),t("el-option",{attrs:{label:"申请人",value:"applicant"}}),t("el-option",{attrs:{label:"固定文字",value:"fixed_text"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addAttachmentNameField}},[e._v("添加")])],1),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"attachment-file"},[e._v("注： 配置为空时默认文件名为 项目编号-文件描述中的文件名称。")])])],1),e.addForm.attachmentNameList&&e.addForm.attachmentNameList.length>0?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"已配置字段"}},[t("div",{staticClass:"attachment-config-list"},e._l(e.addForm.attachmentNameList,(function(a,l){return t("el-tag",{key:a.id||l,staticClass:"attachment-tag",attrs:{closable:""},on:{close:function(t){return e.removeAttachmentNameField(l)}}},[e._v(" "+e._s(e.getAttachmentFieldLabel(a.field))+e._s(a.fixedText?": "+a.fixedText:"")+" ")])})),1)])],1)],1):e._e(),"fixed_text"===e.addForm.currentAttachmentField?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"固定文字内容",prop:"fixedTextContent"}},[t("el-input",{attrs:{placeholder:"请输入固定文字内容"},model:{value:e.addForm.fixedTextContent,callback:function(t){e.$set(e.addForm,"fixedTextContent",t)},expression:"addForm.fixedTextContent"}})],1)],1)],1):e._e(),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理人",prop:"processor"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.processor,callback:function(t){e.$set(e.addForm,"processor",t)},expression:"addForm.processor"}},[t("el-option",{attrs:{label:"项目处理人",value:"case_handler"}}),t("el-option",{attrs:{label:"项目业务员",value:"case_business"}}),t("el-option",{attrs:{label:"固定人员",value:"fixed_personnel"}})],1)],1)],1),"fixed_personnel"===e.addForm.processor?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"固定人员",prop:"fixedPersonnel"}},[t("el-select",{attrs:{placeholder:"请选择固定人员"},model:{value:e.addForm.fixedPersonnel,callback:function(t){e.$set(e.addForm,"fixedPersonnel",t)},expression:"addForm.fixedPersonnel"}},e._l(e.userOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label+"("+e.department+")",value:e.value}})})),1)],1)],1):e._e()],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"baseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.baseDate,callback:function(t){e.$set(e.addForm,"baseDate",t)},expression:"addForm.baseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"months"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.months,callback:function(t){e.$set(e.addForm,"months",t)},expression:"addForm.months"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"days"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.days,callback:function(t){e.$set(e.addForm,"days",t)},expression:"addForm.days"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.customerBaseDate,callback:function(t){e.$set(e.addForm,"customerBaseDate",t)},expression:"addForm.customerBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerMonths,callback:function(t){e.$set(e.addForm,"customerMonths",t)},expression:"addForm.customerMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerDays,callback:function(t){e.$set(e.addForm,"customerDays",t)},expression:"addForm.customerDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.officialBaseDate,callback:function(t){e.$set(e.addForm,"officialBaseDate",t)},expression:"addForm.officialBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialMonths,callback:function(t){e.$set(e.addForm,"officialMonths",t)},expression:"addForm.officialMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialDays,callback:function(t){e.$set(e.addForm,"officialDays",t)},expression:"addForm.officialDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限（优审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"internalPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.internalPriorityBaseDate,callback:function(t){e.$set(e.addForm,"internalPriorityBaseDate",t)},expression:"addForm.internalPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"internalPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.internalPriorityMonths,callback:function(t){e.$set(e.addForm,"internalPriorityMonths",t)},expression:"addForm.internalPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"internalPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.internalPriorityDays,callback:function(t){e.$set(e.addForm,"internalPriorityDays",t)},expression:"addForm.internalPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限（优审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.customerPriorityBaseDate,callback:function(t){e.$set(e.addForm,"customerPriorityBaseDate",t)},expression:"addForm.customerPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerPriorityMonths,callback:function(t){e.$set(e.addForm,"customerPriorityMonths",t)},expression:"addForm.customerPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerPriorityDays,callback:function(t){e.$set(e.addForm,"customerPriorityDays",t)},expression:"addForm.customerPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限（优审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.officialPriorityBaseDate,callback:function(t){e.$set(e.addForm,"officialPriorityBaseDate",t)},expression:"addForm.officialPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialPriorityMonths,callback:function(t){e.$set(e.addForm,"officialPriorityMonths",t)},expression:"addForm.officialPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialPriorityDays,callback:function(t){e.$set(e.addForm,"officialPriorityDays",t)},expression:"addForm.officialPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限（预审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"internalPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.internalPriorityBaseDate,callback:function(t){e.$set(e.addForm,"internalPriorityBaseDate",t)},expression:"addForm.internalPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"internalPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.internalPriorityMonths,callback:function(t){e.$set(e.addForm,"internalPriorityMonths",t)},expression:"addForm.internalPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"internalPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.internalPriorityDays,callback:function(t){e.$set(e.addForm,"internalPriorityDays",t)},expression:"addForm.internalPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限（预审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.customerPriorityBaseDate,callback:function(t){e.$set(e.addForm,"customerPriorityBaseDate",t)},expression:"addForm.customerPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerPriorityMonths,callback:function(t){e.$set(e.addForm,"customerPriorityMonths",t)},expression:"addForm.customerPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.customerPriorityDays,callback:function(t){e.$set(e.addForm,"customerPriorityDays",t)},expression:"addForm.customerPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限（预审）"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialPriorityBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.officialPriorityBaseDate,callback:function(t){e.$set(e.addForm,"officialPriorityBaseDate",t)},expression:"addForm.officialPriorityBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialPriorityMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialPriorityMonths,callback:function(t){e.$set(e.addForm,"officialPriorityMonths",t)},expression:"addForm.officialPriorityMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialPriorityDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.officialPriorityDays,callback:function(t){e.$set(e.addForm,"officialPriorityDays",t)},expression:"addForm.officialPriorityDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"完成日期"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"completeDateBase"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.completeDateBase,callback:function(t){e.$set(e.addForm,"completeDateBase",t)},expression:"addForm.completeDateBase"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"completeDateMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.completeDateMonths,callback:function(t){e.$set(e.addForm,"completeDateMonths",t)},expression:"addForm.completeDateMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"completeDateDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addForm.completeDateDays,callback:function(t){e.$set(e.addForm,"completeDateDays",t)},expression:"addForm.completeDateDays"}})],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.updateProcess,title:"更新处理事项规则",width:"80%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"updateProcess",t)},close:e.resetUpdateForm},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeUpdateProcessDialog}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitUpdateForm}},[e._v("保存")])]},proxy:!0}])},[t("el-form",{ref:"updateFormRef",attrs:{model:e.updateForm,rules:e.updateRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateForm.ruleName,callback:function(t){e.$set(e.updateForm,"ruleName",t)},expression:"updateForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateForm.ruleDescription,callback:function(t){e.$set(e.updateForm,"ruleDescription",t)},expression:"updateForm.ruleDescription"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateForm.ruleType,callback:function(t){e.$set(e.updateForm,"ruleType",t)},expression:"updateForm.ruleType"}},[t("el-option",{attrs:{label:"新增处理事项",value:"add_process"}}),t("el-option",{attrs:{label:"更新处理事项",value:"update_process"}}),t("el-option",{attrs:{label:"更新项目状态",value:"update_status"}}),t("el-option",{attrs:{label:"更新项目信息",value:"update_info"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"处理事项",prop:"processItem"}},[t("ProcessMatterSelector",{attrs:{multiple:!1,placeholder:"请选择处理事项"},on:{change:e.handleProcessItemChange},model:{value:e.updateForm.processItem,callback:function(t){e.$set(e.updateForm,"processItem",t)},expression:"updateForm.processItem"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"是否上传附件",prop:"isUpload"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.isUpload,callback:function(t){e.$set(e.updateForm,"isUpload",t)},expression:"updateForm.isUpload"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.isEffective,callback:function(t){e.$set(e.updateForm,"isEffective",t)},expression:"updateForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"附件名称配置",prop:"attachmentNameConfig"}},[t("el-select",{attrs:{placeholder:"请选择字段",multiple:"",clearable:""},model:{value:e.updateForm.attachmentNameConfig,callback:function(t){e.$set(e.updateForm,"attachmentNameConfig",t)},expression:"updateForm.attachmentNameConfig"}},[t("el-option",{attrs:{label:"项目字段",value:"case_field"}}),t("el-option",{attrs:{label:"我方文号",value:"our_file_no"}}),t("el-option",{attrs:{label:"申请号",value:"application_no"}}),t("el-option",{attrs:{label:"项目名称",value:"case_name"}}),t("el-option",{attrs:{label:"客户名称",value:"customer_name"}}),t("el-option",{attrs:{label:"申请人",value:"applicant"}}),t("el-option",{attrs:{label:"固定文字",value:"fixed_text"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addAttachmentNameFieldForUpdate}},[e._v("添加")])],1),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"attachment-file"},[e._v("注： 配置为空时默认文件名为 项目编号-文件描述中的文件名称。")])])],1),e.updateForm.attachmentNameList&&e.updateForm.attachmentNameList.length>0?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"已配置字段"}},[t("div",{staticClass:"attachment-config-list"},e._l(e.updateForm.attachmentNameList,(function(a,l){return t("el-tag",{key:a.id||l,staticClass:"attachment-tag",attrs:{closable:""},on:{close:function(t){return e.removeAttachmentNameFieldForUpdate(l)}}},[e._v(" "+e._s(e.getAttachmentFieldLabel(a.field))+e._s(a.fixedText?": "+a.fixedText:"")+" ")])})),1)])],1)],1):e._e(),"fixed_text"===e.updateForm.currentAttachmentField?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"固定文字内容",prop:"fixedTextContent"}},[t("el-input",{attrs:{placeholder:"请输入固定文字内容"},model:{value:e.updateForm.fixedTextContent,callback:function(t){e.$set(e.updateForm,"fixedTextContent",t)},expression:"updateForm.fixedTextContent"}})],1)],1)],1):e._e(),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"internalBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.internalBaseDate,callback:function(t){e.$set(e.updateForm,"internalBaseDate",t)},expression:"updateForm.internalBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"internalMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.internalMonths,callback:function(t){e.$set(e.updateForm,"internalMonths",t)},expression:"updateForm.internalMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"internalDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.internalDays,callback:function(t){e.$set(e.updateForm,"internalDays",t)},expression:"updateForm.internalDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.customerBaseDate,callback:function(t){e.$set(e.updateForm,"customerBaseDate",t)},expression:"updateForm.customerBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.customerMonths,callback:function(t){e.$set(e.updateForm,"customerMonths",t)},expression:"updateForm.customerMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.customerDays,callback:function(t){e.$set(e.updateForm,"customerDays",t)},expression:"updateForm.customerDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.officialBaseDate,callback:function(t){e.$set(e.updateForm,"officialBaseDate",t)},expression:"updateForm.officialBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.officialMonths,callback:function(t){e.$set(e.updateForm,"officialMonths",t)},expression:"updateForm.officialMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.officialDays,callback:function(t){e.$set(e.updateForm,"officialDays",t)},expression:"updateForm.officialDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"完成日期"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"completeDateBase"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateForm.completeDateBase,callback:function(t){e.$set(e.updateForm,"completeDateBase",t)},expression:"updateForm.completeDateBase"}},[t("el-option",{attrs:{label:"发文日",value:"document_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"completeDateMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.completeDateMonths,callback:function(t){e.$set(e.updateForm,"completeDateMonths",t)},expression:"updateForm.completeDateMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"completeDateDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateForm.completeDateDays,callback:function(t){e.$set(e.updateForm,"completeDateDays",t)},expression:"updateForm.completeDateDays"}})],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.updateStatus,title:"更新项目状态规则",width:"80%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"updateStatus",t)},close:e.resetStatusForm},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeUpdateStatusDialog}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitStatusForm}},[e._v("保存")])]},proxy:!0}])},[t("el-form",{ref:"statusFormRef",attrs:{model:e.statusForm,rules:e.statusRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-select",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.statusForm.ruleName,callback:function(t){e.$set(e.statusForm,"ruleName",t)},expression:"statusForm.ruleName"}},[t("el-option",{attrs:{label:"规则1",value:"rule1"}}),t("el-option",{attrs:{label:"规则2",value:"rule2"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.statusForm.ruleDescription,callback:function(t){e.$set(e.statusForm,"ruleDescription",t)},expression:"statusForm.ruleDescription"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"列表选取代码定的",disabled:""},model:{value:e.statusForm.ruleType,callback:function(t){e.$set(e.statusForm,"ruleType",t)},expression:"statusForm.ruleType"}},[t("el-option",{attrs:{label:"新增处理事项",value:"add_process"}}),t("el-option",{attrs:{label:"更新处理事项",value:"update_process"}}),t("el-option",{attrs:{label:"更新项目状态",value:"update_status"}}),t("el-option",{attrs:{label:"更新项目信息",value:"update_info"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"项目状态",prop:"caseStatus"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.statusForm.caseStatus,callback:function(t){e.$set(e.statusForm,"caseStatus",t)},expression:"statusForm.caseStatus"}},[t("el-option",{attrs:{label:"待处理",value:"pending"}}),t("el-option",{attrs:{label:"已递交",value:"submitted"}}),t("el-option",{attrs:{label:"暂缓申请",value:"suspended"}}),t("el-option",{attrs:{label:"受理",value:"accepted"}}),t("el-option",{attrs:{label:"补正",value:"correction"}}),t("el-option",{attrs:{label:"初审合格",value:"qualified"}}),t("el-option",{attrs:{label:"公开",value:"public"}}),t("el-option",{attrs:{label:"实审",value:"examination"}}),t("el-option",{attrs:{label:"一通",value:"one_pass"}}),t("el-option",{attrs:{label:"二通",value:"two_pass"}}),t("el-option",{attrs:{label:"三通",value:"three_pass"}}),t("el-option",{attrs:{label:"四通",value:"four_pass"}}),t("el-option",{attrs:{label:"五通",value:"five_pass"}}),t("el-option",{attrs:{label:"六通",value:"six_pass"}}),t("el-option",{attrs:{label:"七通",value:"seven_pass"}}),t("el-option",{attrs:{label:"八通",value:"eight_pass"}}),t("el-option",{attrs:{label:"九通",value:"nine_pass"}}),t("el-option",{attrs:{label:"一补",value:"one_correction"}}),t("el-option",{attrs:{label:"二补",value:"two_correction"}}),t("el-option",{attrs:{label:"三补",value:"three_correction"}}),t("el-option",{attrs:{label:"四补",value:"four_correction"}}),t("el-option",{attrs:{label:"视为撤回",value:"withdrawn"}}),t("el-option",{attrs:{label:"主动撤回",value:"withdrawn_by_applicant"}}),t("el-option",{attrs:{label:"驳回",value:"rejected"}}),t("el-option",{attrs:{label:"复审中",value:"reexamination"}}),t("el-option",{attrs:{label:"视为放弃",value:"abandoned"}}),t("el-option",{attrs:{label:"主动放弃",value:"abandoned_by_applicant"}}),t("el-option",{attrs:{label:"办登",value:"registration"}}),t("el-option",{attrs:{label:"待领证",value:"pending_certificate"}}),t("el-option",{attrs:{label:"终止",value:"terminated"}}),t("el-option",{attrs:{label:"结案",value:"completed"}}),t("el-option",{attrs:{label:"届满",value:"expired"}}),t("el-option",{attrs:{label:"PCT国际检索完成",value:"pct_international_search_completed"}}),t("el-option",{attrs:{label:"电子证书",value:"electronic_certificate"}}),t("el-option",{attrs:{label:"无效宣告完毕",value:"invalidation_completed"}}),t("el-option",{attrs:{label:"执行完毕",value:"execution_completed"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.statusForm.isEffective,callback:function(t){e.$set(e.statusForm,"isEffective",t)},expression:"statusForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.updateInfo,title:"更新案件信息规则",width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"updateInfo",t)},close:e.resetInfoForm},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeUpdateInfoDialog}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitInfoForm}},[e._v("保存")])]},proxy:!0}])},[t("el-form",{ref:"infoFormRef",attrs:{model:e.infoForm,rules:e.infoRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.infoForm.ruleName,callback:function(t){e.$set(e.infoForm,"ruleName",t)},expression:"infoForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.infoForm.ruleDescription,callback:function(t){e.$set(e.infoForm,"ruleDescription",t)},expression:"infoForm.ruleDescription"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.infoForm.ruleType,callback:function(t){e.$set(e.infoForm,"ruleType",t)},expression:"infoForm.ruleType"}},[t("el-option",{attrs:{label:"更新案件信息",value:"update_info"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.infoForm.isEffective,callback:function(t){e.$set(e.infoForm,"isEffective",t)},expression:"infoForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"更新内容说明"}},[t("div",{staticClass:"info-description"},[t("h4",[e._v("此规则将执行以下案件信息更新操作：")]),t("ul",{staticClass:"update-list"},[t("li",[e._v("1. 更新案件状态为对应的官方状态")]),t("li",[e._v("2. 记录官方文件接收时间")]),t("li",[e._v("3. 更新案件的最新进展信息")]),t("li",[e._v("4. 自动计算并更新相关期限")]),t("li",[e._v("5. 触发相关的通知机制")]),t("li",[e._v("6. 更新案件的处理优先级")]),t("li",[e._v("7. 记录文件处理历史")]),t("li",[e._v("8. 同步更新客户可见的案件信息")]),t("li",[e._v("9. 触发相关的工作流程")]),t("li",[e._v("10. 生成相应的操作日志记录")])])])])],1)],1)],1)],1)],1)},o=[],r=(a("d9e2"),a("14d9"),a("e9f5"),a("7d54"),a("ab43"),a("1ed0")),s={name:"NotificationRule",components:{ProcessMatterSelector:r["a"]},data(){return{searchText:"",selectedFileInfo:null,currentEditRule:null,isViewMode:!1,dialogVisible:{addProcess:!1,updateProcess:!1,updateStatus:!1,updateInfo:!1,addRule:!1},processStatusOptions:[],userOptions:[],treeData:[{id:1,label:"官方文件",icon:"el-icon-folder",children:[{id:11,label:"中国专利来文",icon:"el-icon-folder",children:[{id:111,label:"专利申请受理通知书",code:"(200101)",icon:"el-icon-document",fileInfo:{sequence:1,caseType:"专利申请",country:"中国",documentType:"官方文件",documentSubType:"中国专利来文",documentName:"专利申请受理通知书",documentNo:"PCN210210",content:"200101",isEffective:1}},{id:112,label:"发明专利申请公布及进入实质审查程序通知书",code:"",icon:"el-icon-document",fileInfo:{sequence:2,caseType:"专利申请",country:"中国",documentType:"官方文件",documentSubType:"中国专利来文",documentName:"发明专利申请公布及进入实质审查程序通知书",documentNo:"PCN210211",content:"200102",isEffective:1}}]},{id:12,label:"中国高校来文",icon:"el-icon-folder",children:[]},{id:13,label:"PCT来文",icon:"el-icon-folder",children:[]},{id:14,label:"美国专利来文",icon:"el-icon-folder",children:[]},{id:15,label:"美国商标来文",icon:"el-icon-folder",children:[]}]}],treeProps:{children:"children",label:"label"},ruleData:[],addForm:{ruleName:"",ruleDescription:"",ruleType:"",isConfig:"",processItem:"",processStatus:"",transferTarget:0,isUpload:0,isEffective:1,attachmentName:"",processor:"",fixedPersonnel:"",internalPeriod:"",baseDate:"",months:"",days:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",internalPriorityPeriod:"",internalPriorityBaseDate:"",internalPriorityMonths:"",internalPriorityDays:"",customerPriorityPeriod:"",customerPriorityBaseDate:"",customerPriorityMonths:"",customerPriorityDays:"",officialPriorityPeriod:"",officialPriorityBaseDate:"",officialPriorityMonths:"",officialPriorityDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:"",attachmentNameList:[],currentAttachmentField:""},updateForm:{ruleName:"",ruleDescription:"",ruleType:"",processItem:"",isUpload:1,isEffective:1,attachmentName:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:"",attachmentNameList:[],currentAttachmentField:""},statusForm:{ruleName:"",ruleDescription:"",ruleType:"",caseStatus:"",isEffective:1},infoForm:{ruleName:"",ruleDescription:"",ruleType:"",isEffective:1},ruleForm:{ruleName:"",ruleDescription:"",ruleType:""},addRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}]},updateRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}]},statusRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}]},ruleFormRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}]},infoRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}]},generatedFileName:""}},computed:{filteredTreeData(){return this.searchText?this.filterTree(this.treeData,this.searchText):this.treeData}},watch:{"addForm.attachmentNameConfig":{handler(e){e&&e.includes("fixed_text")?this.addForm.currentAttachmentField="fixed_text":(this.addForm.currentAttachmentField="",this.addForm.fixedTextContent="")},deep:!0},"updateForm.attachmentNameConfig":{handler(e){e&&e.includes("fixed_text")?this.updateForm.currentAttachmentField="fixed_text":(this.updateForm.currentAttachmentField="",this.updateForm.fixedTextContent="")},deep:!0}},async mounted(){await this.initData()},methods:{filterTree(e,t){const a=[];for(const l of e)if(this.nodeMatches(l,t))a.push({...l});else if(l.children&&l.children.length>0){const e=this.filterTree(l.children,t);e.length>0&&a.push({...l,children:e})}return a},nodeMatches(e,t){const a=t.toLowerCase();return e.label.toLowerCase().includes(a)||e.code&&e.code.toLowerCase().includes(a)},async initData(){try{await Promise.all([this.fetchRuleData(),this.fetchFileTypeTree(),this.fetchRuleTypes(),this.fetchProcessItems(),this.fetchProcessStatuses(),this.fetchUsers(),this.fetchCountries(),this.fetchCaseTypes()])}catch(e){console.error("初始化数据失败:",e),this.initMockData()}},async fetchRuleData(){try{const e=await this.$api.notificationRule.getList({page:1,limit:100});if(0!==e.data.code)throw new Error(e.data.msg||"获取规则数据失败");this.ruleData=e.data.data.map((e,t)=>{var a;return{id:e.id,sequence:e.sequence||t+1,ruleName:e.ruleName||e.name,ruleDescription:e.ruleDescription||e.description,ruleType:e.ruleType||e.rule_type,isEffective:void 0!==e.isEffective?e.isEffective:1===e.status,updater:e.updater||(null===(a=e.creator)||void 0===a?void 0:a.real_name)||"系统",updateTime:e.updateTime||e.updated_at,fileType:e.fileType||"通用",country:e.country||"全球",documentType:e.documentType||"申请文件"}})}catch(e){console.error("获取规则数据失败:",e),this.initMockRuleData()}},async fetchFileTypeTree(){try{const e=await this.$api.notificationRule.getFileTypeTree();if(0!==e.data.code)throw new Error(e.data.msg||"获取文件类型失败");this.treeData=e.data.data||[],console.log("获取到的树数据:",this.treeData)}catch(e){console.error("获取文件类型失败:",e),this.initMockTreeData()}},async fetchRuleTypes(){try{const e=await this.$api.notificationRule.getRuleTypes();0===e.data.code&&(this.ruleTypes=e.data.data)}catch(e){console.error("获取规则类型失败:",e)}},async fetchProcessItems(){try{const e=await this.$api.notificationRule.getProcessItems();0===e.data.code&&(this.processItems=e.data.data)}catch(e){console.error("获取处理事项失败:",e)}},async fetchCountries(){try{const e=await this.$api.notificationRule.getCountries();0===e.data.code&&(this.countries=e.data.data)}catch(e){console.error("获取国家地区失败:",e)}},async fetchCaseTypes(){try{const e=await this.$api.notificationRule.getCaseTypes();0===e.data.code&&(this.caseTypes=e.data.data)}catch(e){console.error("获取项目类型失败:",e)}},async fetchProcessStatuses(){try{const e=await this.$api.notificationRule.getProcessStatuses();0===e.data.code?this.processStatusOptions=e.data.data.map(e=>({value:e.value||e.status_code||e.name,label:e.label||e.status_name||e.name})):this.useDefaultProcessStatuses()}catch(e){console.error("获取处理事项状态失败:",e),this.useDefaultProcessStatuses()}},async fetchUsers(){try{const e=await this.$api.notificationRule.getUsers();0===e.data.code&&(this.userOptions=e.data.data.map(e=>({value:e.value||e.id,label:e.label||e.real_name||e.name,username:e.username,department:e.department||e.department_name||"未分配"})))}catch(e){console.error("获取用户列表失败:",e),this.userOptions=[{value:1,label:"张三",username:"zhangsan",department:"业务部"},{value:2,label:"李四",username:"lisi",department:"技术部"},{value:3,label:"王五",username:"wangwu",department:"管理部"}]}},initMockData(){this.initMockRuleData(),this.initMockTreeData()},initMockRuleData(){this.ruleData=[{sequence:1,ruleName:"专利申请受理规则",ruleDescription:"专利申请受理后的处理规则",ruleType:"新增处理事项",isEffective:!0,updater:"张三",updateTime:"2024-01-15 10:30:00"},{sequence:2,ruleName:"公布通知处理规则",ruleDescription:"发明专利公布通知的处理规则",ruleType:"更新处理事项",isEffective:!0,updater:"李四",updateTime:"2024-01-14 16:45:00"},{sequence:3,ruleName:"项目状态更新规则",ruleDescription:"项目状态自动更新规则",ruleType:"更新项目状态",isEffective:!0,updater:"王五",updateTime:"2024-01-13 09:20:00"},{sequence:4,ruleName:"项目信息更新规则",ruleDescription:"项目信息自动更新规则",ruleType:"更新项目信息",isEffective:!0,updater:"王五",updateTime:"2024-01-13 09:20:00"}]},initMockTreeData(){console.log("使用模拟树数据"),this.treeData=[{id:1,label:"官方文件",icon:"el-icon-folder",level:1,type:"major_category",children:[{id:11,label:"中国专利来文",icon:"el-icon-folder-opened",level:2,type:"minor_category",children:[{id:111,label:"专利申请受理通知书",code:"(200101)",icon:"el-icon-document",level:3,type:"file_description",fileInfo:{id:111,sequence:1,caseType:"专利申请",country:"中国",documentType:"官方文件",documentSubType:"中国专利来文",documentName:"专利申请受理通知书",documentNo:"PCN210210",content:"200101",isEffective:1}},{id:112,label:"发明专利申请公布及进入实质审查程序通知书",code:"(200102)",icon:"el-icon-document",level:3,type:"file_description",fileInfo:{id:112,sequence:2,caseType:"专利申请",country:"中国",documentType:"官方文件",documentSubType:"中国专利来文",documentName:"发明专利申请公布及进入实质审查程序通知书",documentNo:"PCN210211",content:"200102",isEffective:1}}]}]}]},async loadRuleData(){if(!this.selectedFileInfo||!this.selectedFileInfo.id)return console.log("没有选中的文件信息，清空规则数据"),void(this.ruleData=[]);try{console.log("正在获取文件描述ID为",this.selectedFileInfo.id,"的规则数据");const e=await this.$api.notificationRule.getRulesByFileCategory(this.selectedFileInfo.id);if(0===e.data.code){const t=e.data.data,a=t.rules||[];this.ruleData=a.map((e,t)=>({id:e.id,sequence:e.sequence||t+1,ruleName:e.ruleName||e.name,ruleDescription:e.ruleDescription||e.description,ruleType:this.getRuleTypeLabel(e.ruleType||e.rule_type),isEffective:void 0!==e.isEffective?Boolean(e.isEffective):1===e.status,updater:e.updater||e.updater_name||"系统",updateTime:e.updateTime||e.updated_at,originalData:e})),console.log("成功获取规则数据:",this.ruleData.length,"条"),console.log("文件描述信息:",t.fileDescription)}else this.$message.error(e.data.msg||"获取规则数据失败"),this.ruleData=[]}catch(t){var e;console.error("获取规则数据失败:",t),this.$message.error("获取规则数据失败: "+((null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.msg)||t.message)),this.ruleData=[]}},handleNodeClick(e){console.log("Node clicked:",e),e.fileInfo&&3===e.level&&"file_description"===e.type?(this.selectedFileInfo=e.fileInfo,console.log("选中的文件信息:",this.selectedFileInfo),this.loadRuleData()):e.level<3?(console.log("点击了分类节点，不加载规则数据"),this.selectedFileInfo=null,this.ruleData=[]):(console.log("节点数据不完整，无法加载规则:",e),this.selectedFileInfo=null,this.ruleData=[])},async handleProcessItemChange(e,t){if(console.log("处理事项变化:",e,t),e)try{const a={};t&&t.id&&(a.process_item_id=t.id),e&&(a.process_item_name=e);const l=await this.$api.notificationRule.getProcessStatuses(a);0===l.data.code?(this.processStatusOptions=l.data.data.map(e=>({value:e.value||e.status_code||e.name,label:e.label||e.status_name||e.name})),console.log("获取到处理状态选项:",this.processStatusOptions)):(console.log("API返回失败，使用默认状态选项"),this.useDefaultProcessStatuses())}catch(a){console.error("获取处理事项状态失败:",a),this.useDefaultProcessStatuses()}else this.useDefaultProcessStatuses()},useDefaultProcessStatuses(){this.processStatusOptions=[{value:"pending",label:"待处理"},{value:"processing",label:"处理中"},{value:"completed",label:"已完成"},{value:"paused",label:"已暂停"},{value:"cancelled",label:"已取消"}]},handleSearch(){console.log("Search:",this.searchText)},downloadFile(){console.log("Download file")},openAddRuleDialog(){this.dialogVisible.addRule=!0},closeAddRuleDialog(){this.dialogVisible.addRule=!1},openAddProcessDialog(){this.dialogVisible.addProcess=!0},closeAddProcessDialog(){this.dialogVisible.addProcess=!1,this.isViewMode=!1},closeUpdateProcessDialog(){this.dialogVisible.updateProcess=!1},closeUpdateStatusDialog(){this.dialogVisible.updateStatus=!1},closeUpdateInfoDialog(){this.dialogVisible.updateInfo=!1},async openViewRuleDialog(e){console.log("View rule:",e),this.currentEditRule={id:e.id,originalData:e.originalData||e};try{const t=await this.$api.notificationRule.getDetail(e.id);if(0===t.data.code){const a=t.data.data;console.log("获取到的规则详情（查看模式）:",a),"新增处理事项"===e.ruleType?(this.fillAddFormWithRuleData(a),this.isViewMode=!0,this.dialogVisible.addProcess=!0):"更新处理事项"===e.ruleType?(this.fillUpdateFormWithRuleData(a),this.isViewMode=!0,this.dialogVisible.updateProcess=!0):"更新项目状态"===e.ruleType?(this.fillStatusFormWithRuleData(a),this.isViewMode=!0,this.dialogVisible.updateStatus=!0):"更新项目信息"===e.ruleType&&(this.fillInfoFormWithRuleData(a),this.isViewMode=!0,this.dialogVisible.updateInfo=!0)}else this.$message.error("获取规则详情失败: "+(t.data.msg||"未知错误"))}catch(a){var t;console.error("获取规则详情失败:",a),this.$message.error("获取规则详情失败: "+((null===(t=a.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||a.message))}},resetAddForm(){this.$refs.addFormRef&&this.$refs.addFormRef.resetFields(),this.addForm={ruleName:"",ruleDescription:"",ruleType:"",isConfig:"",processItem:"",processStatus:"",transferTarget:0,isUpload:0,isEffective:1,attachmentName:"",processor:"",fixedPersonnel:"",internalPeriod:"",baseDate:"",months:"",days:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",internalPriorityPeriod:"",internalPriorityBaseDate:"",internalPriorityMonths:"",internalPriorityDays:"",customerPriorityPeriod:"",customerPriorityBaseDate:"",customerPriorityMonths:"",customerPriorityDays:"",officialPriorityPeriod:"",officialPriorityBaseDate:"",officialPriorityMonths:"",officialPriorityDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:"",attachmentNameList:[],currentAttachmentField:""}},resetUpdateForm(){this.$refs.updateFormRef&&this.$refs.updateFormRef.resetFields(),this.updateForm={ruleName:"",ruleDescription:"",ruleType:"",processItem:"",isUpload:1,isEffective:1,attachmentName:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:"",attachmentNameList:[],currentAttachmentField:""}},resetStatusForm(){this.$refs.statusFormRef&&this.$refs.statusFormRef.resetFields(),this.statusForm={ruleName:"",ruleDescription:"",ruleType:"",caseStatus:"",isEffective:1}},resetRuleForm(){this.$refs.ruleFormRef&&this.$refs.ruleFormRef.resetFields(),this.ruleForm={ruleName:"",ruleDescription:"",ruleType:""}},resetInfoForm(){this.$refs.infoFormRef&&this.$refs.infoFormRef.resetFields(),this.infoForm={ruleName:"",ruleDescription:"",ruleType:"",isEffective:1}},async submitAddForm(){this.$refs.addFormRef.validate(async e=>{if(e)try{var t;const e={name:this.addForm.ruleName,description:this.addForm.ruleDescription,rule_type:this.addForm.ruleType,file_category_id:null===(t=this.selectedFileInfo)||void 0===t?void 0:t.id,conditions:{is_config:this.addForm.isConfig,process_item:this.addForm.processItem,process_status:this.addForm.processStatus},actions:{is_upload:this.addForm.isUpload,transfer_target:this.addForm.transferTarget,processor:this.addForm.processor,fixed_personnel:this.addForm.fixedPersonnel,internal_deadline:{base_date:this.addForm.baseDate,months:this.addForm.months,days:this.addForm.days},customer_deadline:{base_date:this.addForm.customerBaseDate,months:this.addForm.customerMonths,days:this.addForm.customerDays},official_deadline:{base_date:this.addForm.officialBaseDate,months:this.addForm.officialMonths,days:this.addForm.officialDays},internal_priority_deadline:{base_date:this.addForm.internalPriorityBaseDate,months:this.addForm.internalPriorityMonths,days:this.addForm.internalPriorityDays},customer_priority_deadline:{base_date:this.addForm.customerPriorityBaseDate,months:this.addForm.customerPriorityMonths,days:this.addForm.customerPriorityDays},official_priority_deadline:{base_date:this.addForm.officialPriorityBaseDate,months:this.addForm.officialPriorityMonths,days:this.addForm.officialPriorityDays},complete_date:{base_date:this.addForm.completeDateBase,months:this.addForm.completeDateMonths,days:this.addForm.completeDateDays},attachment_config:this.addForm.attachmentNameList,fixed_text_content:this.addForm.fixedTextContent},priority:1,is_effective:1===this.addForm.isEffective?1:0,status:1};let a;if(this.currentEditRule&&this.currentEditRule.id?(console.log("正在更新新增处理事项规则ID:",this.currentEditRule.id,"数据:",e),a=await this.$api.notificationRule.update(this.currentEditRule.id,e)):(console.log("正在创建新增处理事项规则，数据:",e),a=await this.$api.notificationRule.create(e)),0===a.data.code){const e=this.currentEditRule&&this.currentEditRule.id?"更新":"创建";this.$message.success(e+"新增处理事项规则保存成功"),this.closeAddProcessDialog(),this.loadRuleData()}else this.$message.error(a.data.msg||"保存失败")}catch(l){var a;console.error("保存新增规则失败:",l),this.$message.error("保存失败: "+((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.msg)||l.message))}})},async submitUpdateForm(){this.$refs.updateFormRef.validate(async e=>{if(e)try{var t;const e={name:this.updateForm.ruleName,description:this.updateForm.ruleDescription,rule_type:this.updateForm.ruleType,file_category_id:null===(t=this.selectedFileInfo)||void 0===t?void 0:t.id,conditions:{process_item:this.updateForm.processItem},actions:{is_upload:this.updateForm.isUpload,processor:this.updateForm.processor,fixed_personnel:this.updateForm.fixedPersonnel,internal_deadline:{base_date:this.updateForm.internalBaseDate,months:this.updateForm.internalMonths,days:this.updateForm.internalDays},customer_deadline:{base_date:this.updateForm.customerBaseDate,months:this.updateForm.customerMonths,days:this.updateForm.customerDays},official_deadline:{base_date:this.updateForm.officialBaseDate,months:this.updateForm.officialMonths,days:this.updateForm.officialDays},complete_date:{base_date:this.updateForm.completeDateBase,months:this.updateForm.completeDateMonths,days:this.updateForm.completeDateDays},attachment_config:this.updateForm.attachmentNameList,fixed_text_content:this.updateForm.fixedTextContent},is_effective:1===this.updateForm.isEffective?1:0,status:1};if(!this.currentEditRule||!this.currentEditRule.id)return this.$message.error("缺少规则ID，无法更新"),void console.error("currentEditRule:",this.currentEditRule);console.log("正在更新规则ID:",this.currentEditRule.id,"数据:",e);const a=await this.$api.notificationRule.update(this.currentEditRule.id,e);0===a.data.code?(this.$message.success("更新处理事项规则保存成功"),this.closeUpdateProcessDialog(),this.loadRuleData()):this.$message.error(a.data.msg||"保存失败")}catch(l){var a;console.error("保存更新规则失败:",l),this.$message.error("保存失败: "+((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.msg)||l.message))}})},async submitStatusForm(){this.$refs.statusFormRef.validate(async e=>{if(e)try{var t;const e={name:this.statusForm.ruleName,description:this.statusForm.ruleDescription,rule_type:this.statusForm.ruleType,file_category_id:null===(t=this.selectedFileInfo)||void 0===t?void 0:t.id,conditions:{file_type:"official_document"},actions:{update_case_status:this.statusForm.caseStatus},is_effective:1===this.statusForm.isEffective?1:0,status:1};if(!this.currentEditRule||!this.currentEditRule.id)return this.$message.error("缺少规则ID，无法更新"),void console.error("currentEditRule:",this.currentEditRule);console.log("正在更新状态规则ID:",this.currentEditRule.id,"数据:",e);const a=await this.$api.notificationRule.update(this.currentEditRule.id,e);0===a.data.code?(this.$message.success("项目状态规则保存成功"),this.closeUpdateStatusDialog(),this.loadRuleData()):this.$message.error(a.data.msg||"保存失败")}catch(l){var a;console.error("保存状态规则失败:",l),this.$message.error("保存失败: "+((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.msg)||l.message))}})},async submitRuleForm(){this.$refs.ruleFormRef.validate(async e=>{if(e)try{var t;const e={name:this.ruleForm.ruleName,description:this.ruleForm.ruleDescription,rule_type:this.ruleForm.ruleType,file_category_id:null===(t=this.selectedFileInfo)||void 0===t?void 0:t.id,conditions:{},actions:{},priority:1,status:1},a=await this.$api.notificationRule.create(e);0===a.data.code?(this.$message.success("规则添加成功"),this.closeAddRuleDialog(),this.currentEditRule=a.data.data,this.openDetailEditDialog(this.ruleForm.ruleType,a.data.data),this.loadRuleData()):this.$message.error(a.data.msg||"保存失败")}catch(a){console.error("保存规则失败:",a),this.$message.error("保存失败")}})},async submitInfoForm(){this.$refs.infoFormRef.validate(async e=>{if(e)try{var t;const e={name:this.infoForm.ruleName,description:this.infoForm.ruleDescription,rule_type:this.infoForm.ruleType,file_category_id:null===(t=this.selectedFileInfo)||void 0===t?void 0:t.id,conditions:{file_type:"official_document"},actions:{update_case_info:!0,update_case_status:!0,record_document_time:!0,calculate_deadlines:!0,trigger_notifications:!0,update_priority:!0,record_history:!0,sync_customer_info:!0,trigger_workflow:!0,generate_logs:!0},is_effective:1===this.infoForm.isEffective?1:0,status:1};if(!this.currentEditRule||!this.currentEditRule.id)return this.$message.error("缺少规则ID，无法更新"),void console.error("currentEditRule:",this.currentEditRule);console.log("正在更新案件信息规则ID:",this.currentEditRule.id,"数据:",e);const a=await this.$api.notificationRule.update(this.currentEditRule.id,e);0===a.data.code?(this.$message.success("案件信息规则保存成功"),this.closeUpdateInfoDialog(),this.loadRuleData()):this.$message.error(a.data.msg||"保存失败")}catch(l){var a;console.error("保存案件信息规则失败:",l),this.$message.error("保存失败: "+((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.msg)||l.message))}})},openDetailEditDialog(e,t){const a={ruleName:t.name||t.ruleName,ruleDescription:t.description||t.ruleDescription,ruleType:t.rule_type||e};"add_process"===e?(this.addForm={...a,isConfig:"",processItem:"",processStatus:"",transferTarget:"",isUpload:"",isEffective:1,attachmentName:"",processor:"",fixedPersonnel:"",baseDate:"",months:"",days:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialBaseDate:"",officialMonths:"",officialDays:"",internalPriorityBaseDate:"",internalPriorityMonths:"",internalPriorityDays:"",customerPriorityBaseDate:"",customerPriorityMonths:"",customerPriorityDays:"",officialPriorityBaseDate:"",officialPriorityMonths:"",officialPriorityDays:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:""},this.dialogVisible.addProcess=!0):"update_process"===e?(this.updateForm={...a,processItem:"",isUpload:1,isEffective:1,attachmentName:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDateBase:"",completeDateMonths:"",completeDateDays:"",attachmentNameConfig:[],fixedTextContent:""},this.dialogVisible.updateProcess=!0):"update_status"===e?(this.statusForm={...a,caseStatus:"",isEffective:1},this.dialogVisible.updateStatus=!0):"update_info"===e&&(this.infoForm={...a,isEffective:1},this.dialogVisible.updateInfo=!0)},getRuleTypeLabel(e){const t={add_process:"新增处理事项",update_process:"更新处理事项",update_status:"更新项目状态",update_info:"更新项目信息"};return t[e]||e},addAttachmentNameField(){if(this.addForm.attachmentNameConfig&&0!==this.addForm.attachmentNameConfig.length){if(this.addForm.attachmentNameConfig.includes("fixed_text")&&!this.addForm.fixedTextContent)return this.addForm.currentAttachmentField="fixed_text",void this.$message.warning("请输入固定文字内容");this.addForm.attachmentNameConfig.forEach(e=>{const t={field:e,id:Date.now()+Math.random()};"fixed_text"===e&&(t.fixedText=this.addForm.fixedTextContent),this.addForm.attachmentNameList.push(t)}),this.addForm.attachmentNameConfig=[],this.addForm.fixedTextContent="",this.addForm.currentAttachmentField="",this.$message.success("字段添加成功")}else this.$message.warning("请先选择要添加的字段")},removeAttachmentNameField(e){this.addForm.attachmentNameList.splice(e,1),this.$message.success("字段移除成功")},addAttachmentNameFieldForUpdate(){if(this.updateForm.attachmentNameConfig&&0!==this.updateForm.attachmentNameConfig.length){if(this.updateForm.attachmentNameConfig.includes("fixed_text")&&!this.updateForm.fixedTextContent)return this.updateForm.currentAttachmentField="fixed_text",void this.$message.warning("请输入固定文字内容");this.updateForm.attachmentNameConfig.forEach(e=>{const t={field:e,id:Date.now()+Math.random()};"fixed_text"===e&&(t.fixedText=this.updateForm.fixedTextContent),this.updateForm.attachmentNameList.push(t)}),this.updateForm.attachmentNameConfig=[],this.updateForm.fixedTextContent="",this.updateForm.currentAttachmentField="",this.$message.success("字段添加成功")}else this.$message.warning("请先选择要添加的字段")},removeAttachmentNameFieldForUpdate(e){this.updateForm.attachmentNameList.splice(e,1),this.$message.success("字段移除成功")},getAttachmentFieldLabel(e){const t={case_field:"项目字段",our_file_no:"我方文号",application_no:"申请号",case_name:"项目名称",customer_name:"客户名称",applicant:"申请人",fixed_text:"固定文字"};return t[e]||e},async openEditRuleDialog(e){console.log("Edit rule:",e),this.currentEditRule={id:e.id,originalData:e.originalData||e};try{const t=await this.$api.notificationRule.getDetail(e.id);if(0===t.data.code){const a=t.data.data;console.log("获取到的规则详情:",a),"新增处理事项"===e.ruleType?(this.fillAddFormWithRuleData(a),this.isViewMode=!1,this.dialogVisible.addProcess=!0):"更新处理事项"===e.ruleType?(this.fillUpdateFormWithRuleData(a),this.isViewMode=!1,this.dialogVisible.updateProcess=!0):"更新项目状态"===e.ruleType?(this.fillStatusFormWithRuleData(a),this.isViewMode=!1,this.dialogVisible.updateStatus=!0):"更新项目信息"===e.ruleType&&(this.fillInfoFormWithRuleData(a),this.isViewMode=!1,this.dialogVisible.updateInfo=!0)}else this.$message.error("获取规则详情失败: "+(t.data.msg||"未知错误"))}catch(a){var t;console.error("获取规则详情失败:",a),this.$message.error("获取规则详情失败: "+((null===(t=a.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||a.message))}},fillAddFormWithRuleData(e){var t,a,l,o,r,s,i,n,c,d,u,p,m,f,h,b,y,v,F,g,_;const D=e.conditions||{},x=e.actions||{};this.addForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:"add_process",isConfig:D.is_config||"",processItem:D.process_item||"",processStatus:D.process_status||"",transferTarget:x.transfer_target||0,isUpload:x.is_upload||0,isEffective:1===e.is_effective?1:0,processor:x.processor||"",fixedPersonnel:x.fixed_personnel||"",baseDate:(null===(t=x.internal_deadline)||void 0===t?void 0:t.base_date)||"",months:(null===(a=x.internal_deadline)||void 0===a?void 0:a.months)||"",days:(null===(l=x.internal_deadline)||void 0===l?void 0:l.days)||"",customerBaseDate:(null===(o=x.customer_deadline)||void 0===o?void 0:o.base_date)||"",customerMonths:(null===(r=x.customer_deadline)||void 0===r?void 0:r.months)||"",customerDays:(null===(s=x.customer_deadline)||void 0===s?void 0:s.days)||"",officialBaseDate:(null===(i=x.official_deadline)||void 0===i?void 0:i.base_date)||"",officialMonths:(null===(n=x.official_deadline)||void 0===n?void 0:n.months)||"",officialDays:(null===(c=x.official_deadline)||void 0===c?void 0:c.days)||"",internalPriorityBaseDate:(null===(d=x.internal_priority_deadline)||void 0===d?void 0:d.base_date)||"",internalPriorityMonths:(null===(u=x.internal_priority_deadline)||void 0===u?void 0:u.months)||"",internalPriorityDays:(null===(p=x.internal_priority_deadline)||void 0===p?void 0:p.days)||"",customerPriorityBaseDate:(null===(m=x.customer_priority_deadline)||void 0===m?void 0:m.base_date)||"",customerPriorityMonths:(null===(f=x.customer_priority_deadline)||void 0===f?void 0:f.months)||"",customerPriorityDays:(null===(h=x.customer_priority_deadline)||void 0===h?void 0:h.days)||"",officialPriorityBaseDate:(null===(b=x.official_priority_deadline)||void 0===b?void 0:b.base_date)||"",officialPriorityMonths:(null===(y=x.official_priority_deadline)||void 0===y?void 0:y.months)||"",officialPriorityDays:(null===(v=x.official_priority_deadline)||void 0===v?void 0:v.days)||"",completeDateBase:(null===(F=x.complete_date)||void 0===F?void 0:F.base_date)||"",completeDateMonths:(null===(g=x.complete_date)||void 0===g?void 0:g.months)||"",completeDateDays:(null===(_=x.complete_date)||void 0===_?void 0:_.days)||"",attachmentNameConfig:[],attachmentNameList:x.attachment_config||[],fixedTextContent:x.fixed_text_content||"",currentAttachmentField:""}},fillUpdateFormWithRuleData(e){var t,a,l,o,r,s,i,n,c,d,u,p;const m=e.conditions||{},f=e.actions||{};this.updateForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:"update_process",processItem:m.process_item||"",isUpload:f.is_upload||1,isEffective:1===e.is_effective?1:0,internalBaseDate:(null===(t=f.internal_deadline)||void 0===t?void 0:t.base_date)||"",internalMonths:(null===(a=f.internal_deadline)||void 0===a?void 0:a.months)||"",internalDays:(null===(l=f.internal_deadline)||void 0===l?void 0:l.days)||"",customerBaseDate:(null===(o=f.customer_deadline)||void 0===o?void 0:o.base_date)||"",customerMonths:(null===(r=f.customer_deadline)||void 0===r?void 0:r.months)||"",customerDays:(null===(s=f.customer_deadline)||void 0===s?void 0:s.days)||"",officialBaseDate:(null===(i=f.official_deadline)||void 0===i?void 0:i.base_date)||"",officialMonths:(null===(n=f.official_deadline)||void 0===n?void 0:n.months)||"",officialDays:(null===(c=f.official_deadline)||void 0===c?void 0:c.days)||"",completeDateBase:(null===(d=f.complete_date)||void 0===d?void 0:d.base_date)||"",completeDateMonths:(null===(u=f.complete_date)||void 0===u?void 0:u.months)||"",completeDateDays:(null===(p=f.complete_date)||void 0===p?void 0:p.days)||"",attachmentNameConfig:[],attachmentNameList:f.attachment_config||[],fixedTextContent:f.fixed_text_content||"",currentAttachmentField:""}},fillStatusFormWithRuleData(e){const t=e.actions||{};this.statusForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:"update_status",caseStatus:t.update_case_status||"",isEffective:1===e.is_effective?1:0}},fillInfoFormWithRuleData(e){this.infoForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:"update_info",isEffective:1===e.is_effective?1:0}}}},i=s,n=(a("6367"),a("2877")),c=Object(n["a"])(i,l,o,!1,null,"21aadafa",null);t["default"]=c.exports},6367:function(e,t,a){"use strict";a("3add")},"6f19":function(e,t,a){"use strict";var l=a("9112"),o=a("0d26"),r=a("b980"),s=Error.captureStackTrace;e.exports=function(e,t,a,i){r&&(s?s(e,t):l(e,"stack",o(a,i)))}},7156:function(e,t,a){"use strict";var l=a("1626"),o=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var s,i;return r&&l(s=t.constructor)&&s!==a&&o(i=s.prototype)&&i!==a.prototype&&r(e,i),e}},7282:function(e,t,a){"use strict";var l=a("e330"),o=a("59ed");e.exports=function(e,t,a){try{return l(o(Object.getOwnPropertyDescriptor(e,t)[a]))}catch(r){}}},ab36:function(e,t,a){"use strict";var l=a("861d"),o=a("9112");e.exports=function(e,t){l(t)&&"cause"in t&&o(e,"cause",t.cause)}},aeb0:function(e,t,a){"use strict";var l=a("9bf2").f;e.exports=function(e,t,a){a in e||l(e,a,{configurable:!0,get:function(){return t[a]},set:function(e){t[a]=e}})}},b980:function(e,t,a){"use strict";var l=a("d039"),o=a("5c6c");e.exports=!l((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},d2bb:function(e,t,a){"use strict";var l=a("7282"),o=a("861d"),r=a("1d80"),s=a("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{e=l(Object.prototype,"__proto__","set"),e(a,[]),t=a instanceof Array}catch(i){}return function(a,l){return r(a),s(l),o(a)?(t?e(a,l):a.__proto__=l,a):a}}():void 0)},d9e2:function(e,t,a){"use strict";var l=a("23e7"),o=a("cfe9"),r=a("2ba4"),s=a("e5cb"),i="WebAssembly",n=o[i],c=7!==new Error("e",{cause:7}).cause,d=function(e,t){var a={};a[e]=s(e,t,c),l({global:!0,constructor:!0,arity:1,forced:c},a)},u=function(e,t){if(n&&n[e]){var a={};a[e]=s(i+"."+e,t,c),l({target:i,stat:!0,constructor:!0,arity:1,forced:c},a)}};d("Error",(function(e){return function(t){return r(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),d("URIError",(function(e){return function(t){return r(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},e391:function(e,t,a){"use strict";var l=a("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:l(e)}},e5cb:function(e,t,a){"use strict";var l=a("d066"),o=a("1a2d"),r=a("9112"),s=a("3a9b"),i=a("d2bb"),n=a("e893"),c=a("aeb0"),d=a("7156"),u=a("e391"),p=a("ab36"),m=a("6f19"),f=a("83ab"),h=a("c430");e.exports=function(e,t,a,b){var y="stackTraceLimit",v=b?2:1,F=e.split("."),g=F[F.length-1],_=l.apply(null,F);if(_){var D=_.prototype;if(!h&&o(D,"cause")&&delete D.cause,!a)return _;var x=l("Error"),P=t((function(e,t){var a=u(b?t:e,void 0),l=b?new _(e):new _;return void 0!==a&&r(l,"message",a),m(l,P,l.stack,2),this&&s(D,this)&&d(l,this,P),arguments.length>v&&p(l,arguments[v]),l}));if(P.prototype=D,"Error"!==g?i?i(P,x):n(P,x,{name:!0}):f&&y in _&&(c(P,_,y),c(P,_,"prepareStackTrace")),n(P,_),!h)try{D.name!==g&&r(D,"name",g),D.constructor=P}catch(T){}return P}}}}]);