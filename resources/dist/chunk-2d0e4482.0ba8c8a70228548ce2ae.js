(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4482"],{"900e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"process-status-config"},[e("div",{staticClass:"body-part-search"},[e("el-form",{attrs:{model:t.searchForm,"label-width":"130px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"处理事项状态名称"}},[e("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请输入状态名称",clearable:""},model:{value:t.searchForm.statusName,callback:function(e){t.$set(t.searchForm,"statusName",e)},expression:"searchForm.statusName"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"处理状态代码"}},[e("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请输入状态代码",clearable:""},model:{value:t.searchForm.statusCode,callback:function(e){t.$set(t.searchForm,"statusCode",e)},expression:"searchForm.statusCode"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"是否触发完成规则"}},[e("el-select",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:t.searchForm.triggerRule,callback:function(e){t.$set(t.searchForm,"triggerRule",e)},expression:"searchForm.triggerRule"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"是",value:1}}),e("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"是否有效"}},[e("el-select",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:t.searchForm.isValid,callback:function(e){t.$set(t.searchForm,"isValid",e)},expression:"searchForm.isValid"}},[e("el-option",{attrs:{label:"全部",value:""}}),e("el-option",{attrs:{label:"是",value:1}}),e("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1)],1),e("div",{staticClass:"part-search-buttons"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),e("el-button",{attrs:{size:"small",type:"default"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),e("div",{staticClass:"body-part-content"},[e("div",{staticClass:"part-table-header"},[t._m(0),e("div",{staticClass:"part-table-operations"},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增")])],1)]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",size:"small"}},[e("el-table-column",{attrs:{align:"center",type:"selection",width:"80"}}),e("el-table-column",{attrs:{align:"center",prop:"id",label:"序号",width:"80"}}),e("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"80",sortable:""}}),e("el-table-column",{attrs:{align:"center",prop:"statusName",label:"处理事项状态名称"}}),e("el-table-column",{attrs:{align:"center",prop:"statusCode",label:"处理状态代码"}}),e("el-table-column",{attrs:{align:"center",prop:"triggerRule",label:"是否触发完成规则",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:a.row.triggerRule?"success":"info"}},[t._v(" "+t._s(a.row.triggerRule?"是":"否")+" ")])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"isValid",label:"是否有效",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:a.row.isValid?"success":"info"}},[t._v(" "+t._s(a.row.isValid?"是":"否")+" ")])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"updater",label:"更新人",width:"120"}}),e("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新时间",width:"200"}}),e("el-table-column",{attrs:{align:"center",label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("查看")]),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.showForm,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.showForm=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"140px",rules:t.rules}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"排序",prop:"sort"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入排序值"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"处理事项状态名称",prop:"statusName"}},[e("el-input",{model:{value:t.form.statusName,callback:function(e){t.$set(t.form,"statusName",e)},expression:"form.statusName"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"处理状态代码",prop:"statusCode"}},[e("el-input",{model:{value:t.form.statusCode,callback:function(e){t.$set(t.form,"statusCode",e)},expression:"form.statusCode"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否触发完成规则",prop:"triggerRule"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是或否"},model:{value:t.form.triggerRule,callback:function(e){t.$set(t.form,"triggerRule",e)},expression:"form.triggerRule"}},[e("el-option",{attrs:{label:"是",value:!0}}),e("el-option",{attrs:{label:"否",value:!1}})],1)],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"是否有效",prop:"isValid"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是或否"},model:{value:t.form.isValid,callback:function(e){t.$set(t.form,"isValid",e)},expression:"form.isValid"}},[e("el-option",{attrs:{label:"是",value:!0}}),e("el-option",{attrs:{label:"否",value:!1}})],1)],1)],1)],1),"编辑处理事项状态"===t.dialogTitle?e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"更新人",prop:"updater"}},[e("el-input",{attrs:{disabled:""},model:{value:t.form.updater,callback:function(e){t.$set(t.form,"updater",e)},expression:"form.updater"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"更新时间",prop:"updateTime"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择更新时间",disabled:""},model:{value:t.form.updateTime,callback:function(e){t.$set(t.form,"updateTime",e)},expression:"form.updateTime"}})],1)],1)],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showForm=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")])],1)],1)],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"part-table-title"},[e("span",[t._v("处理事项状态列表")])])}],r={name:"ProcessStatusConfig",data(){return{loading:!1,showForm:!1,dialogTitle:"新增处理事项状态",searchForm:{statusName:"",statusCode:"",triggerRule:"",isValid:""},tableData:[],form:{id:null,sort:1,statusName:"",statusCode:"",triggerRule:!1,isValid:!0},rules:{statusName:[{required:!0,message:"请输入处理事项状态名称",trigger:"blur"}],statusCode:[{required:!0,message:"请输入处理状态代码",trigger:"blur"}],triggerRule:[{required:!0,message:"请选择是否触发完成规则",trigger:"change"}],isValid:[{required:!0,message:"请选择是否有效",trigger:"change"}]},currentPage:1,pageSize:10,total:0}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const t={page:this.currentPage,limit:this.pageSize,status_name:this.searchForm.statusName,status_code:this.searchForm.statusCode,trigger_rule:this.searchForm.triggerRule,is_valid:this.searchForm.isValid},e=await this.$api.dataConfig.processStatus.getList(t);0===e.data.code?(this.tableData=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取数据失败")}catch(t){this.$message.error("获取数据失败"),console.error("获取处理事项状态列表失败:",t)}finally{this.loading=!1}},handleSearch(){this.currentPage=1,this.fetchData()},handleReset(){this.searchForm={statusName:"",statusCode:"",triggerRule:"",isValid:""},this.fetchData()},handleExport(){this.$message.success("导出成功")},handleEdit(t){this.dialogTitle="编辑处理事项状态",this.form={...t},this.showForm=!0},handleDelete(t){this.$confirm("确认删除该处理事项状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("删除成功"),this.fetchData()}).catch(()=>{this.$message.info("已取消删除")})},async handleSave(){try{const t=await this.$refs.form.validate();if(t){let t;this.loading=!0,t=this.form.id?await this.$api.dataConfig.processStatus.update(this.form.id,{sort:this.form.sort,status_name:this.form.statusName,status_code:this.form.statusCode,trigger_rule:this.form.triggerRule,is_valid:this.form.isValid,updater:this.form.updater}):await this.$api.dataConfig.processStatus.create({sort:this.form.sort,status_name:this.form.statusName,status_code:this.form.statusCode,trigger_rule:this.form.triggerRule,is_valid:this.form.isValid,updater:this.form.updater}),0===t.data.code?(this.$message.success(this.form.id?"更新成功":"新增成功"),this.fetchData(),this.showForm=!1):this.$message.error(t.data.msg||"保存失败")}}catch(t){this.$message.error("保存失败"),console.error("保存处理事项状态失败:",t)}finally{this.loading=!1}},handleAdd(){this.dialogTitle="新增处理事项状态",this.form={id:null,sort:1,statusName:"",statusCode:"",triggerRule:!1,isValid:!0},this.showForm=!0},handleSizeChange(t){this.pageSize=t,this.fetchData()},handleCurrentChange(t){this.currentPage=t,this.fetchData()}}},i=r,o=a("2877"),n=Object(o["a"])(i,s,l,!1,null,null,null);e["default"]=n.exports}}]);