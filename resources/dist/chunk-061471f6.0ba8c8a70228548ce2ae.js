(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-061471f6"],{7290:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer-add-container"},[t("div",{staticClass:"page-header"},[e._m(0),t("div",{staticClass:"header-actions"},[t("el-button",{attrs:{size:"small",icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回")]),t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-check",loading:e.submitLoading},on:{click:e.handleSave}},[e._v("保存")])],1)]),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[t("el-form",{ref:"basicForm",staticClass:"add-form",attrs:{model:e.customer,rules:e.rules,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户编号"}},[t("el-input",{attrs:{value:"系统自动生成",placeholder:"系统自动生成",disabled:""}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入客户名称"},on:{blur:e.handleNameChange},model:{value:e.customer.name,callback:function(t){e.$set(e.customer,"name",t)},expression:"customer.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户名称(英)"}},[t("el-input",{attrs:{placeholder:"请输入英文名称"},model:{value:e.customer.nameEn,callback:function(t){e.$set(e.customer,"nameEn",t)},expression:"customer.nameEn"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"信用代码",prop:"creditCode"}},[t("el-input",{attrs:{placeholder:"请输入统一社会信用代码"},on:{blur:e.checkCreditCodeUnique},model:{value:e.customer.creditCode,callback:function(t){e.$set(e.customer,"creditCode",t)},expression:"customer.creditCode"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"法定代表人"}},[t("el-input",{attrs:{placeholder:"请输入法定代表人"},model:{value:e.customer.legalRepresentative,callback:function(t){e.$set(e.customer,"legalRepresentative",t)},expression:"customer.legalRepresentative"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"公司负责人"}},[t("el-input",{attrs:{placeholder:"请输入公司负责人"},model:{value:e.customer.companyManager,callback:function(t){e.$set(e.customer,"companyManager",t)},expression:"customer.companyManager"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户等级"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择客户等级"},model:{value:e.customer.level,callback:function(t){e.$set(e.customer,"level",t)},expression:"customer.level"}},e._l(e.levelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户规模"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择客户规模"},model:{value:e.customer.customerScale,callback:function(t){e.$set(e.customer,"customerScale",t)},expression:"customer.customerScale"}},e._l(e.customerScaleOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"业务人员"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务人员",filterable:""},model:{value:e.customer.businessPerson,callback:function(t){e.$set(e.customer,"businessPerson",t)},expression:"customer.businessPerson"}},e._l(e.businessPersonOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"价格指数"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择价格指数"},model:{value:e.customer.priceIndex,callback:function(t){e.$set(e.customer,"priceIndex",t)},expression:"customer.priceIndex"}},e._l(e.priceIndexOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"创新指数"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择创新指数"},model:{value:e.customer.innovationIndex,callback:function(t){e.$set(e.customer,"innovationIndex",t)},expression:"customer.innovationIndex"}},e._l(e.innovationIndexOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"合同数量"}},[t("el-input",{attrs:{placeholder:"请输入合同数量"},model:{value:e.customer.contractCount,callback:function(t){e.$set(e.customer,"contractCount",t)},expression:"customer.contractCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"最新合同日期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请输入最新合同日期","value-format":"yyyy-MM-dd"},model:{value:e.customer.latestContractDate,callback:function(t){e.$set(e.customer,"latestContractDate",t)},expression:"customer.latestContractDate"}})],1)],1),t("el-col",{attrs:{xs:24,sm:24}},[t("el-form-item",{attrs:{label:"客户资料备注"}},[t("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入备注信息"},model:{value:e.customer.remark,callback:function(t){e.$set(e.customer,"remark",t)},expression:"customer.remark"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"地址信息",name:"address"}},[t("el-form",{ref:"addressForm",staticClass:"add-form",attrs:{model:e.customer,rules:e.addressRules,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国籍"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择国籍",filterable:""},model:{value:e.customer.country,callback:function(t){e.$set(e.customer,"country",t)},expression:"customer.country"}},e._l(e.countryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"省市区",prop:"areaCode"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.areaOptions,props:{value:"value",label:"label",children:"children"},placeholder:"请选择省/市/区（必须选到区县级别）",clearable:"",filterable:""},on:{change:e.handleAreaChange},model:{value:e.customer.areaCode,callback:function(t){e.$set(e.customer,"areaCode",t)},expression:"customer.areaCode"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"街道地址"}},[t("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.customer.address,callback:function(t){e.$set(e.customer,"address",t)},expression:"customer.address"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"英文地址"}},[t("el-input",{attrs:{placeholder:"请输入英文地址"},model:{value:e.customer.addressEn,callback:function(t){e.$set(e.customer,"addressEn",t)},expression:"customer.addressEn"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"其它地址"}},[t("el-input",{attrs:{placeholder:"请输入其它地址"},model:{value:e.customer.otherAddress,callback:function(t){e.$set(e.customer,"otherAddress",t)},expression:"customer.otherAddress"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"产业园区"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择产业园区"},model:{value:e.customer.industrialPark,callback:function(t){e.$set(e.customer,"industrialPark",t)},expression:"customer.industrialPark"}},[t("el-option",{attrs:{label:"金牛高新",value:"金牛高新"}}),t("el-option",{attrs:{label:"成都高新区",value:"成都高新区"}}),t("el-option",{attrs:{label:"泸州酒业园区",value:"泸州酒业园区"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"邮政编码"}},[t("el-input",{attrs:{placeholder:"请输入邮政编码"},model:{value:e.customer.zipCode,callback:function(t){e.$set(e.customer,"zipCode",t)},expression:"customer.zipCode"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"公司网站"}},[t("el-input",{attrs:{placeholder:"请输入公司网站"},model:{value:e.customer.website,callback:function(t){e.$set(e.customer,"website",t)},expression:"customer.website"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"费用信息",name:"feeInfo"}},[t("el-form",{ref:"feeForm",staticClass:"add-form",attrs:{model:e.customer,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开户名称"}},[t("el-input",{attrs:{placeholder:"请输入开户名称"},model:{value:e.customer.accountName,callback:function(t){e.$set(e.customer,"accountName",t)},expression:"customer.accountName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开户银行"}},[t("el-input",{attrs:{placeholder:"请输入开户银行"},model:{value:e.customer.bankName,callback:function(t){e.$set(e.customer,"bankName",t)},expression:"customer.bankName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"银行账号"}},[t("el-input",{attrs:{placeholder:"请输入银行账号"},model:{value:e.customer.bankAccount,callback:function(t){e.$set(e.customer,"bankAccount",t)},expression:"customer.bankAccount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开票地址"}},[t("el-input",{attrs:{placeholder:"请输入开票地址"},model:{value:e.customer.invoiceAddress,callback:function(t){e.$set(e.customer,"invoiceAddress",t)},expression:"customer.invoiceAddress"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开票电话"}},[t("el-input",{attrs:{placeholder:"请输入开票电话"},model:{value:e.customer.invoicePhone,callback:function(t){e.$set(e.customer,"invoicePhone",t)},expression:"customer.invoicePhone"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"一般纳税人"}},[t("el-switch",{model:{value:e.customer.isGeneralTaxpayer,callback:function(t){e.$set(e.customer,"isGeneralTaxpayer",t)},expression:"customer.isGeneralTaxpayer"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"账单地址"}},[t("el-input",{attrs:{placeholder:"请输入账单地址"},model:{value:e.customer.billingAddress,callback:function(t){e.$set(e.customer,"billingAddress",t)},expression:"customer.billingAddress"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"企业信息",name:"company"}},[t("el-form",{ref:"companyForm",staticClass:"add-form",attrs:{model:e.customer,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"企业类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择企业类型"},model:{value:e.customer.companyType,callback:function(t){e.$set(e.customer,"companyType",t)},expression:"customer.companyType"}},e._l(e.companyTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"注册资本"}},[t("el-input",{attrs:{placeholder:"请输入注册资本"},model:{value:e.customer.registeredCapital,callback:function(t){e.$set(e.customer,"registeredCapital",t)},expression:"customer.registeredCapital"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"成立日期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择成立日期","value-format":"yyyy-MM-dd"},model:{value:e.customer.foundingDate,callback:function(t){e.$set(e.customer,"foundingDate",t)},expression:"customer.foundingDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"行业分类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行业"},model:{value:e.customer.industry,callback:function(t){e.$set(e.customer,"industry",t)},expression:"customer.industry"}},e._l(e.industryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"主营业务"}},[t("el-input",{attrs:{placeholder:"请输入主营业务"},model:{value:e.customer.mainProducts,callback:function(t){e.$set(e.customer,"mainProducts",t)},expression:"customer.mainProducts"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"公司网址"}},[t("el-input",{attrs:{placeholder:"请输入公司网址"},model:{value:e.customer.website,callback:function(t){e.$set(e.customer,"website",t)},expression:"customer.website"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"工商信息",name:"business"}},[t("el-form",{ref:"businessForm",staticClass:"add-form",attrs:{model:e.customer,"label-width":"150px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国民经济行业分类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行业分类"},model:{value:e.customer.economicCategory,callback:function(t){e.$set(e.customer,"economicCategory",t)},expression:"customer.economicCategory"}},e._l(e.economicCategoryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国民经济门类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择门类"},on:{change:e.handleDoorChange},model:{value:e.customer.economicDoor,callback:function(t){e.$set(e.customer,"economicDoor",t)},expression:"customer.economicDoor"}},e._l(e.economicDoorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国民经济大类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择大类",disabled:!e.customer.economicDoor},on:{change:e.handleBigClassChange},model:{value:e.customer.economicBigClass,callback:function(t){e.$set(e.customer,"economicBigClass",t)},expression:"customer.economicBigClass"}},e._l(e.economicBigClassOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国民经济中类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择中类",disabled:!e.customer.economicBigClass},on:{change:e.handleMidClassChange},model:{value:e.customer.economicMidClass,callback:function(t){e.$set(e.customer,"economicMidClass",t)},expression:"customer.economicMidClass"}},e._l(e.economicMidClassOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国民经济小类"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择小类",disabled:!e.customer.economicMidClass},model:{value:e.customer.economicSmallClass,callback:function(t){e.$set(e.customer,"economicSmallClass",t)},expression:"customer.economicSmallClass"}},e._l(e.economicSmallClassOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"成立时间"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择成立时间","value-format":"yyyy-MM-dd"},model:{value:e.customer.foundingDate,callback:function(t){e.$set(e.customer,"foundingDate",t)},expression:"customer.foundingDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"员工人数"}},[t("el-input",{attrs:{placeholder:"请输入员工人数"},model:{value:e.customer.employeeCount,callback:function(t){e.$set(e.customer,"employeeCount",t)},expression:"customer.employeeCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"注册资本"}},[t("el-input",{attrs:{placeholder:"请输入注册资本"},model:{value:e.customer.registeredCapital,callback:function(t){e.$set(e.customer,"registeredCapital",t)},expression:"customer.registeredCapital"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"主营业务产品"}},[t("el-input",{attrs:{placeholder:"请输入主营产品"},model:{value:e.customer.mainProducts,callback:function(t){e.$set(e.customer,"mainProducts",t)},expression:"customer.mainProducts"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"研发人数"}},[t("el-input",{attrs:{placeholder:"请输入研发人数"},model:{value:e.customer.researchStaffCount,callback:function(t){e.$set(e.customer,"researchStaffCount",t)},expression:"customer.researchStaffCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"博士人数"}},[t("el-input",{attrs:{placeholder:"请输入博士人数"},model:{value:e.customer.doctorCount,callback:function(t){e.$set(e.customer,"doctorCount",t)},expression:"customer.doctorCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"高工人数"}},[t("el-input",{attrs:{placeholder:"请输入高工人数"},model:{value:e.customer.seniorEngineerCount,callback:function(t){e.$set(e.customer,"seniorEngineerCount",t)},expression:"customer.seniorEngineerCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"硕士人数"}},[t("el-input",{attrs:{placeholder:"请输入硕士人数"},model:{value:e.customer.masterCount,callback:function(t){e.$set(e.customer,"masterCount",t)},expression:"customer.masterCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"中工人数"}},[t("el-input",{attrs:{placeholder:"请输入中工人数"},model:{value:e.customer.middleEngineerCount,callback:function(t){e.$set(e.customer,"middleEngineerCount",t)},expression:"customer.middleEngineerCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"本科人数"}},[t("el-input",{attrs:{placeholder:"请输入本科人数"},model:{value:e.customer.bachelorCount,callback:function(t){e.$set(e.customer,"bachelorCount",t)},expression:"customer.bachelorCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"海归人数"}},[t("el-input",{attrs:{placeholder:"请输入海归人数"},model:{value:e.customer.overseasReturneeCount,callback:function(t){e.$set(e.customer,"overseasReturneeCount",t)},expression:"customer.overseasReturneeCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"营业范围"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入营业范围"},model:{value:e.customer.businessScope,callback:function(t){e.$set(e.customer,"businessScope",t)},expression:"customer.businessScope"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"知识产权信息",name:"ipInfo"}},[t("el-form",{ref:"ipForm",staticClass:"add-form",attrs:{model:e.customer,"label-width":"160px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"商标数量/件"}},[t("el-input-number",{attrs:{min:0,placeholder:"请输入商标数量"},model:{value:e.customer.trademarkCount,callback:function(t){e.$set(e.customer,"trademarkCount",t)},expression:"customer.trademarkCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"专利数量/件"}},[t("el-input-number",{attrs:{min:0,placeholder:"请输入专利数量"},model:{value:e.customer.patentCount,callback:function(t){e.$set(e.customer,"patentCount",t)},expression:"customer.patentCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"授权发明专利数量/件"}},[t("el-input-number",{attrs:{min:0,placeholder:"请输入发明专利数量"},model:{value:e.customer.inventionPatentCount,callback:function(t){e.$set(e.customer,"inventionPatentCount",t)},expression:"customer.inventionPatentCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"版权登记数量/件"}},[t("el-input-number",{attrs:{min:0,placeholder:"请输入版权登记数量"},model:{value:e.customer.copyrightCount,callback:function(t){e.$set(e.customer,"copyrightCount",t)},expression:"customer.copyrightCount"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否享受过加计扣除"}},[t("el-switch",{model:{value:e.customer.hasAdditionalDeduction,callback:function(t){e.$set(e.customer,"hasAdditionalDeduction",t)},expression:"customer.hasAdditionalDeduction"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否有校企合作"}},[t("el-switch",{model:{value:e.customer.hasSchoolCooperation,callback:function(t){e.$set(e.customer,"hasSchoolCooperation",t)},expression:"customer.hasSchoolCooperation"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"合作高校名称"}},[t("el-input",{attrs:{placeholder:"请输入合作高校名称"},model:{value:e.customer.cooperationSchool,callback:function(t){e.$set(e.customer,"cooperationSchool",t)},expression:"customer.cooperationSchool"}})],1)],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"更多信息",name:"more"}},[t("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"更多详细信息请点击保存后在详情页编辑",type:"info","show-icon":"",closable:!1}})],1)],1)],1)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-title"},[t("span",[e._v("新增客户")])])}],l=(a("d9e2"),a("14d9"),a("e9f5"),a("f665"),a("ab43"),a("f6b0")),r=a("c24f"),n=a("d3ff"),c=a("ca3a"),i=a("0656"),u={name:"CustomerAdd",data(){return{activeTab:"basic",loading:!1,submitLoading:!1,customer:{name:"",nameEn:"",creditCode:"",companyManager:"",level:"",status:"potential",customerScale:"",businessPerson:"",businessAssistant:"",remark:"",contactName:"",contactPhone:"",email:"",qq:"",wechat:"",country:"中国",province:"",city:"",district:"",address:"",addressEn:"",otherAddress:"",industrialPark:"",companyType:"",registeredCapital:"",foundingDate:"",industry:"",mainProducts:"",businessScope:"",website:"",zipCode:"",accountName:"",bankName:"",bankAccount:"",invoiceAddress:"",invoicePhone:"",isGeneralTaxpayer:!1,billingAddress:"",economicCategory:"",economicDoor:"",economicBigClass:"",economicMidClass:"",economicSmallClass:"",employeeCount:"",researchStaffCount:"",doctorCount:"",seniorEngineerCount:"",masterCount:"",middleEngineerCount:"",bachelorCount:"",overseasReturneeCount:"",researchProject2019:"",projectAmount2019:"",researchProject2020:"",projectAmount2020:"",researchProject2021:"",projectAmount2021:"",trademarkCount:0,patentCount:0,inventionPatentCount:0,copyrightCount:0,hasAdditionalDeduction:!1,hasSchoolCooperation:!1,cooperationSchool:"",sales2021:"",sales2020:"",sales2019:"",rdCost2021:"",rdCost2020:"",rdCost2019:"",researchFee2021:"",researchFee2020:"",researchFee2019:"",loan2021:"",loan2020:"",loan2019:"",rdEquipmentOriginalValue2019:"",hasAuditReport2019:"0",assetLiabilityRatio2019:"",fixedAssetInvestment2019:"",equipmentInvestment2019:"",smartEquipmentInvestment2019:"",rdEquipmentInvestment2019:"",itInvestment2019:"",hasImportedEquipment2019:"0",hasInvestmentRecord2019:"0",recordAmount2019:"",recordPeriod2019:"",rdEquipmentOriginalValue2020:"",hasAuditReport2020:"0",assetLiabilityRatio2020:"",fixedAssetInvestment2020:"",equipmentInvestment2020:"",smartEquipmentInvestment2020:"",rdEquipmentInvestment2020:"",itInvestment2020:"",hasImportedEquipment2020:"0",hasInvestmentRecord2020:"0",recordAmount2020:"",recordPeriod2020:"",rdEquipmentOriginalValue2021:"",hasAuditReport2021:"0",assetLiabilityRatio2021:"",fixedAssetInvestment2021:"",equipmentInvestment2021:"",smartEquipmentInvestment2021:"",rdEquipmentInvestment2021:"",itInvestment2021:"",hasImportedEquipment2021:"0",hasInvestmentRecord2021:"0",recordAmount2021:"",recordPeriod2021:"",isJinxinVerified:"",jinxinVerifyDate:"",isScienceVerified:"",scienceVerifyDate:"",highTechEnterprise:"",highTechDate:"",provinceEnterprise:"",provinceEnterpriseDate:"",cityEnterprise:"",cityEnterpriseDate:"",provinceTechCenter:"",provinceTechCenterDate:"",ipStandard:"",ipStandardDate:"",itStandard:"",infoStandardDate:"",spare1:"",spare2:"",spare3:"",spare4:"",spare5:"",originalSalesperson:"",publicSeaName:""},rules:{name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:this.validateCreditCode,trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},addressRules:{areaCode:[{required:!0,message:"请选择省市区，必须选到区县级别",trigger:"change"},{validator:this.validateAreaCode,trigger:"change"}]},levelOptions:[],businessPersonOptions:[],priceIndexOptions:[],innovationIndexOptions:[],customerScaleOptions:[],countryOptions:[],areaOptions:[],economicDoorOptions:[],economicBigClassOptions:[],economicMidClassOptions:[],economicSmallClassOptions:[],statusOptions:[{value:"potential",label:"潜在客户"},{value:"intention",label:"意向客户"},{value:"signed",label:"已签约"},{value:"lost",label:"已流失"}],companyTypeOptions:[{value:"国有企业",label:"国有企业"},{value:"民营企业",label:"民营企业"},{value:"外资企业",label:"外资企业"},{value:"合资企业",label:"合资企业"},{value:"其他",label:"其他"}],industryOptions:[{value:"农业、林业和渔业",label:"农业、林业和渔业"},{value:"采矿业",label:"采矿业"},{value:"制造业",label:"制造业"},{value:"电力、燃气及供水",label:"电力、燃气及供水"},{value:"建筑业",label:"建筑业"},{value:"批发零售业",label:"批发零售业"},{value:"交通运输与仓储",label:"交通运输与仓储"},{value:"住宿和餐饮业",label:"住宿和餐饮业"},{value:"信息与通信技术（ICT）",label:"信息与通信技术（ICT）"},{value:"金融与保险业",label:"金融与保险业"},{value:"房地产业",label:"房地产业"},{value:"专业、科学与技术服务业",label:"专业、科学与技术服务业"},{value:"教育、医疗、社会工作等公共服务",label:"教育、医疗、社会工作等公共服务"}],economicCategoryOptions:[{value:"农、林、牧、渔业",label:"农、林、牧、渔业"},{value:"采矿业",label:"采矿业"},{value:"制造业",label:"制造业"},{value:"电力、燃气及供水",label:"电力、燃气及供水"},{value:"建筑业",label:"建筑业"},{value:"批发零售业",label:"批发零售业"},{value:"交通运输与仓储",label:"交通运输与仓储"},{value:"住宿和餐饮业",label:"住宿和餐饮业"},{value:"信息与通信技术（ICT）",label:"信息与通信技术（ICT）"},{value:"金融与保险业",label:"金融与保险业"},{value:"其他",label:"其他"}]}},async mounted(){await this.initData()},methods:{async initData(){this.countryOptions=n["a"].map(e=>({label:e.cn,value:e.cn})),this.areaOptions=c,this.initEconomicClassificationOptions(),await this.getConfigData(),await this.getCustomerScaleOptions(),await this.getBusinessPersonList()},async getConfigData(){try{const e=await l["a"].getConfigData();if(e.data&&e.data.success){const t=e.data.data;t.levels&&t.levels.length>0&&(this.levelOptions=t.levels.map(e=>({label:e.label,value:e.value}))),t.priceIndices&&t.priceIndices.length>0&&(this.priceIndexOptions=t.priceIndices.map(e=>({label:e.label,value:e.value}))),t.innovationIndices&&t.innovationIndices.length>0&&(this.innovationIndexOptions=t.innovationIndices.map(e=>({label:e.label,value:e.value})))}}catch(e){console.error("获取配置数据失败:",e),this.$message.warning("获取配置数据失败，请刷新页面重试")}},async getBusinessPersonList(){try{const e=await r["default"].getList({status:1,limit:1e3});e&&e.data&&0===e.data.code&&(this.businessPersonOptions=e.data.data.map(e=>({label:e.real_name||e.username,value:e.id})))}catch(e){console.error("获取业务人员列表失败:",e),this.$message.warning("获取业务人员列表失败")}},async getCustomerScaleOptions(){try{const e=await l["a"].getCustomerScaleOptions();e&&e.data&&0===e.data.code&&(this.customerScaleOptions=e.data.data||[])}catch(e){console.error("获取客户规模选项失败:",e),this.$message.warning("获取客户规模选项失败")}},handleNameChange(){this.customer.name&&!this.customer.accountName&&(this.customer.accountName=this.customer.name)},handleAreaChange(e){e&&e.length>=3?(this.customer.province=this.getAreaNameByCode(e[0],0),this.customer.city=this.getAreaNameByCode(e[1],1,e[0]),this.customer.district=this.getAreaNameByCode(e[2],2,e[0],e[1])):(this.customer.province="",this.customer.city="",this.customer.district="")},getAreaNameByCode(e,t,a=null,s=null){if(0===t){const t=this.areaOptions.find(t=>t.value===e);return t?t.label:""}if(1===t){const t=this.areaOptions.find(e=>e.value===a);if(t&&t.children){const a=t.children.find(t=>t.value===e);return a?a.label:""}}else if(2===t){const t=this.areaOptions.find(e=>e.value===a);if(t&&t.children){const a=t.children.find(e=>e.value===s);if(a&&a.children){const t=a.children.find(t=>t.value===e);return t?t.label:""}}}return""},initEconomicClassificationOptions(){this.economicDoorOptions=i["a"].map(e=>({value:e.value,label:e.label}))},handleDoorChange(e){if(this.customer.economicBigClass="",this.customer.economicMidClass="",this.customer.economicSmallClass="",this.economicBigClassOptions=[],this.economicMidClassOptions=[],this.economicSmallClassOptions=[],e){const t=i["a"].find(t=>t.label===e);t&&t.children&&(this.economicBigClassOptions=t.children.map(e=>({value:e.value,label:e.label})))}},handleBigClassChange(e){if(this.customer.economicMidClass="",this.customer.economicSmallClass="",this.economicMidClassOptions=[],this.economicSmallClassOptions=[],e){const t=i["a"].find(e=>e.label===this.customer.economicDoor);if(t&&t.children){const a=t.children.find(t=>t.label===e);a&&a.children&&(this.economicMidClassOptions=a.children.map(e=>({value:e.value,label:e.label})))}}},handleMidClassChange(e){if(this.customer.economicSmallClass="",this.economicSmallClassOptions=[],e){const t=i["a"].find(e=>e.label===this.customer.economicDoor);if(t&&t.children){const a=t.children.find(e=>e.label===this.customer.economicBigClass);if(a&&a.children){const t=a.children.find(t=>t.label===e);t&&t.children&&(this.economicSmallClassOptions=t.children.map(e=>({value:e.value,label:e.label})))}}}},async checkCreditCodeUnique(){if(this.customer.creditCode)try{const e=await l["a"].checkCustomerCodeUnique({customerCode:this.customer.creditCode});e.data&&!e.data.success&&(this.$message.error("该信用代码已存在，请使用其他信用代码"),this.$refs.basicForm.validateField("creditCode"))}catch(e){console.error("验证信用代码失败:",e)}},validateCreditCode(e,t,a){t?t.length<6?a(new Error("信用代码长度不能少于6位")):a():a(new Error("请输入统一社会信用代码"))},validateAreaCode(e,t,a){!t||t.length<3?a(new Error("请选择省市区，必须选到区县级别")):a()},goBack(){this.$router.go(-1)},handleTabClick(e){console.log("切换到标签页:",e.name),"basic"===this.activeTab&&"basic"!==e.name&&(this.customer.name&&this.customer.contactName&&this.customer.contactPhone||this.$message.warning("请先填写基本信息中的必填项（客户名称、联系人、联系电话）"))},async handleSave(){this.submitLoading||this.$refs.basicForm.validate(async e=>{if(!e)return this.$message.error("请填写必填项"),!1;try{this.submitLoading=!0;const e=this.$message({message:"正在保存客户信息...",type:"info",duration:0}),t={name:this.customer.name,name_en:this.customer.nameEn,credit_code:this.customer.creditCode,legal_representative:this.customer.legalRepresentative,company_manager:this.customer.companyManager,level:this.customer.level,customer_scale:this.customer.customerScale,employee_count:this.customer.employeeCount,business_person:this.customer.businessPerson,business_assistant:this.customer.businessAssistant,business_partner:this.customer.businessPartner,price_index:this.customer.priceIndex,innovation_index:this.customer.innovationIndex,contract_count:this.customer.contractCount,latest_contract_date:this.customer.latestContractDate,creator:this.customer.creator,create_date:this.customer.createDate,updater:this.customer.updater,update_time:this.customer.updateTime,remark:this.customer.remark,contact_name:this.customer.contactName,contact_phone:this.customer.contactPhone,email:this.customer.email,qq:this.customer.qq,wechat:this.customer.wechat,country:this.customer.country,province:this.customer.province,city:this.customer.city,district:this.customer.district,address:this.customer.address,address_en:this.customer.addressEn,other_address:this.customer.otherAddress,industrial_park:this.customer.industrialPark,zip_code:this.customer.zipCode,website:this.customer.website,accountName:this.customer.accountName,bank_name:this.customer.bankName,bank_account:this.customer.bankAccount,invoice_address:this.customer.invoiceAddress,invoice_phone:this.customer.invoicePhone,is_general_taxpayer:this.customer.isGeneralTaxpayer,billing_address:this.customer.billingAddress,company_type:this.customer.companyType,registered_capital:this.customer.registeredCapital,founding_date:this.customer.foundingDate,industry:this.customer.industry,main_products:this.customer.mainProducts,business_scope:this.customer.businessScope,economic_category:this.customer.economicCategory,economic_door:this.customer.economicDoor,economic_big_class:this.customer.economicBigClass,economic_mid_class:this.customer.economicMidClass,economic_small_class:this.customer.economicSmallClass,research_staff_count:this.customer.researchStaffCount,doctor_count:this.customer.doctorCount,senior_engineer_count:this.customer.seniorEngineerCount,master_count:this.customer.masterCount,middle_engineer_count:this.customer.middleEngineerCount,bachelor_count:this.customer.bachelorCount,overseas_returnee_count:this.customer.overseasReturneeCount,trademark_count:this.customer.trademarkCount,patent_count:this.customer.patentCount,invention_patent_count:this.customer.inventionPatentCount,copyright_count:this.customer.copyrightCount,has_additional_deduction:this.customer.hasAdditionalDeduction,has_school_cooperation:this.customer.hasSchoolCooperation,cooperation_school:this.customer.cooperationSchool},a=await l["a"].createCustomer(t);e.close(),this.$message({message:"客户信息保存成功",type:"success"}),setTimeout(()=>{const e=a&&a.data&&(a.data.id||a.data.data&&a.data.data.id)?a.data.id||a.data.data.id:"";this.$router.push("/customer/detail/"+e)},1e3)}catch(t){console.error("保存客户信息失败:",t);let e="保存客户信息失败，请重试";t.response&&t.response.data&&t.response.data.message&&(e=t.response.data.message),this.$message.error(e)}finally{this.submitLoading=!1}})}}},m=u,d=(a("f2b6"),a("2877")),p=Object(d["a"])(m,s,o,!1,null,null,null);t["default"]=p.exports},e41a:function(e,t,a){},f2b6:function(e,t,a){"use strict";a("e41a")}}]);