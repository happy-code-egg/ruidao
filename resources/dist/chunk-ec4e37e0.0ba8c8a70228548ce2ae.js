(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec4e37e0"],{"18c3":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"body-part-search"},[a("div",{staticClass:"filter-form"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"130px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"我方文号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入我方文号",clearable:""},model:{value:e.searchForm.ourRefNumber,callback:function(a){e.$set(e.searchForm,"ourRefNumber",a)},expression:"searchForm.ourRefNumber"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入申请号",clearable:""},model:{value:e.searchForm.applicationNo,callback:function(a){e.$set(e.searchForm,"applicationNo",a)},expression:"searchForm.applicationNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"注册号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入注册号",clearable:""},model:{value:e.searchForm.registrationNo,callback:function(a){e.$set(e.searchForm,"registrationNo",a)},expression:"searchForm.registrationNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入客户名称",clearable:""},model:{value:e.searchForm.clientName,callback:function(a){e.$set(e.searchForm,"clientName",a)},expression:"searchForm.clientName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"案件名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入案件名称",clearable:""},model:{value:e.searchForm.caseName,callback:function(a){e.$set(e.searchForm,"caseName",a)},expression:"searchForm.caseName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"技术主导"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入技术主导",clearable:""},model:{value:e.searchForm.technicalLead,callback:function(a){e.$set(e.searchForm,"technicalLead",a)},expression:"searchForm.technicalLead"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目类型"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.caseType,callback:function(a){e.$set(e.searchForm,"caseType",a)},expression:"searchForm.caseType"}},[a("el-option",{attrs:{label:"专利",value:"专利"}}),a("el-option",{attrs:{label:"商标",value:"商标"}}),a("el-option",{attrs:{label:"版权",value:"版权"}}),a("el-option",{attrs:{label:"科服",value:"科服"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.businessType,callback:function(a){e.$set(e.searchForm,"businessType",a)},expression:"searchForm.businessType"}},[a("el-option",{attrs:{label:"申请",value:"申请"}}),a("el-option",{attrs:{label:"审查",value:"审查"}}),a("el-option",{attrs:{label:"维护",value:"维护"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请类型"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.applicationType,callback:function(a){e.$set(e.searchForm,"applicationType",a)},expression:"searchForm.applicationType"}},[a("el-option",{attrs:{label:"发明专利",value:"发明专利"}}),a("el-option",{attrs:{label:"实用新型",value:"实用新型"}}),a("el-option",{attrs:{label:"外观设计",value:"外观设计"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"处理事项"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.processingItem,callback:function(a){e.$set(e.searchForm,"processingItem",a)},expression:"searchForm.processingItem"}},[a("el-option",{attrs:{label:"官费监控",value:"官费监控"}}),a("el-option",{attrs:{label:"年费监控",value:"年费监控"}}),a("el-option",{attrs:{label:"申请费",value:"申请费"}}),a("el-option",{attrs:{label:"审查费",value:"审查费"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"案件状态"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.caseStatus,callback:function(a){e.$set(e.searchForm,"caseStatus",a)},expression:"searchForm.caseStatus"}},[a("el-option",{attrs:{label:"已提交",value:"已提交"}}),a("el-option",{attrs:{label:"审批中",value:"审批中"}}),a("el-option",{attrs:{label:"已授权",value:"已授权"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"代理机构"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.agencyType,callback:function(a){e.$set(e.searchForm,"agencyType",a)},expression:"searchForm.agencyType"}},[a("el-option",{attrs:{label:"我司代理",value:"我司代理"}}),a("el-option",{attrs:{label:"客户直接申请",value:"客户直接申请"}}),a("el-option",{attrs:{label:"其他代理",value:"其他代理"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入申请人",clearable:""},model:{value:e.searchForm.applicant,callback:function(a){e.$set(e.searchForm,"applicant",a)},expression:"searchForm.applicant"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请国家(地区)"}},[a("el-select",{attrs:{size:"small",placeholder:"默认CN 或选其它",clearable:""},model:{value:e.searchForm.applicationCountry,callback:function(a){e.$set(e.searchForm,"applicationCountry",a)},expression:"searchForm.applicationCountry"}},[a("el-option",{attrs:{label:"中国",value:"中国"}}),a("el-option",{attrs:{label:"美国",value:"美国"}}),a("el-option",{attrs:{label:"欧盟",value:"欧盟"}}),a("el-option",{attrs:{label:"日本",value:"日本"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务人员"}},[a("el-select",{attrs:{size:"small",placeholder:"后台预先选人",clearable:""},model:{value:e.searchForm.businessStaff,callback:function(a){e.$set(e.searchForm,"businessStaff",a)},expression:"searchForm.businessStaff"}},[a("el-option",{attrs:{label:"张三",value:"张三"}}),a("el-option",{attrs:{label:"李四",value:"李四"}}),a("el-option",{attrs:{label:"王五",value:"王五"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"费用名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入费用名称",clearable:""},model:{value:e.searchForm.feeName,callback:function(a){e.$set(e.searchForm,"feeName",a)},expression:"searchForm.feeName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"缴费类型"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.feeType,callback:function(a){e.$set(e.searchForm,"feeType",a)},expression:"searchForm.feeType"}},[a("el-option",{attrs:{label:"申请费",value:"申请费"}}),a("el-option",{attrs:{label:"审查费",value:"审查费"}}),a("el-option",{attrs:{label:"年费",value:"年费"}}),a("el-option",{attrs:{label:"登记费",value:"登记费"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请日"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"年/月/日","end-placeholder":"年/月/日",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",clearable:""},model:{value:e.searchForm.applicationDateRange,callback:function(a){e.$set(e.searchForm,"applicationDateRange",a)},expression:"searchForm.applicationDateRange"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"缴费期限"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"年/月/日","end-placeholder":"年/月/日",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",clearable:""},model:{value:e.searchForm.paymentDeadlineRange,callback:function(a){e.$set(e.searchForm,"paymentDeadlineRange",a)},expression:"searchForm.paymentDeadlineRange"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"应收日期"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"年/月/日","end-placeholder":"年/月/日",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",clearable:""},model:{value:e.searchForm.receivableDateRange,callback:function(a){e.$set(e.searchForm,"receivableDateRange",a)},expression:"searchForm.receivableDateRange"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"实收日期"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"年/月/日","end-placeholder":"年/月/日",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",clearable:""},model:{value:e.searchForm.actualReceiveDateRange,callback:function(a){e.$set(e.searchForm,"actualReceiveDateRange",a)},expression:"searchForm.actualReceiveDateRange"}})],1)],1)],1),a("div",{staticClass:"part-search-buttons"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.exportData}},[e._v("导出")])],1)],1)],1)]),a("div",{staticClass:"body-part-content"},[e._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e._l(e.displayedColumns,(function(e){return[a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.minWidth||120,"show-overflow-tooltip":!0===e.overflow,align:"center"}})]}))],2),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total>0,expression:"pagination.total > 0"}],attrs:{total:e.pagination.total,"current-page":e.pagination.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},s=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-header"},[a("div",{staticClass:"part-table-title"},[a("span",[e._v("官费监控")])])])}],r=(t("14d9"),t("88a7"),t("271a"),t("5494"),t("7cf8")),o={name:"FeeMonitor",data(){return{loading:!1,feeType:"all",searchForm:{ourRefNumber:"",applicationNo:"",registrationNo:"",clientName:"",caseName:"",technicalLead:"",caseType:"",businessType:"",applicationType:"",processingItem:"",caseStatus:"",agencyType:"",applicant:"",applicationCountry:"",businessStaff:"",feeName:"",feeType:"",applicationDateRange:[],paymentDeadlineRange:[],receivableDateRange:[],actualReceiveDateRange:[]},tableData:[],pagination:{currentPage:1,pageSize:20,total:0},selectedRows:[],caseTypeOptions:[],businessTypeOptions:[],applicationTypeOptions:[],processingItemOptions:[],caseStatusOptions:[],agencyTypeOptions:[],applicationCountryOptions:[],feeTypeOptions:[]}},created(){this.loadOptions(),this.fetchData()},computed:{displayedColumns(){const e=[{prop:"ourRefNumber",label:"我方文号"},{prop:"caseName",label:"案件名称",overflow:!0,minWidth:180},{prop:"applicationNo",label:"申请号"},{prop:"applicationType",label:"申请类型"},{prop:"processingItem",label:"处理事项"},{prop:"casePhase",label:"案件阶段"},{prop:"feeName",label:"费用名称"},{prop:"receivableAmount",label:"应收金额"},{prop:"paymentDeadline",label:"缴费期限"},{prop:"feeType",label:"缴费类型"},{prop:"actualReceiveDate",label:"实收日期"},{prop:"clientName",label:"客户名称",overflow:!0,minWidth:160},{prop:"agencyType",label:"代理机构"},{prop:"businessStaff",label:"业务人员"},{prop:"technicalLead",label:"技术主导"}],a=[{prop:"ourRefNumber",label:"我方文号"},{prop:"caseName",label:"案件名称",overflow:!0,minWidth:180},{prop:"registrationNo",label:"注册号"},{prop:"applicationType",label:"申请类型"},{prop:"processingItem",label:"处理事项"},{prop:"casePhase",label:"案件阶段"},{prop:"feeName",label:"费用名称"},{prop:"receivableAmount",label:"应收金额"},{prop:"paymentDeadline",label:"缴费期限"},{prop:"feeType",label:"缴费类型"},{prop:"actualReceiveDate",label:"实收日期"},{prop:"clientName",label:"客户名称",overflow:!0,minWidth:160},{prop:"agencyType",label:"代理机构"},{prop:"businessStaff",label:"业务人员"},{prop:"category",label:"类别"},{prop:"technicalLead",label:"技术主导"}];return"商标"===this.searchForm.caseType?a:e}},methods:{loadOptions(){this.caseTypeOptions=r["a"].getCaseTypes(),this.businessTypeOptions=r["a"].getBusinessTypes(),this.applicationTypeOptions=r["a"].getApplicationTypes(),this.processingItemOptions=r["a"].getProcessingItems(),this.caseStatusOptions=r["a"].getCaseStatuses(),this.agencyTypeOptions=r["a"].getAgencyTypes(),this.applicationCountryOptions=r["a"].getApplicationCountries(),this.feeTypeOptions=r["a"].getFeeTypes()},async fetchData(){this.loading=!0;try{const e={...this.searchForm,page:this.pagination.currentPage,limit:this.pagination.pageSize};this.searchForm.applicationDateRange&&2===this.searchForm.applicationDateRange.length&&(e.application_date_range=this.searchForm.applicationDateRange),this.searchForm.paymentDeadlineRange&&2===this.searchForm.paymentDeadlineRange.length&&(e.payment_deadline_range=this.searchForm.paymentDeadlineRange),this.searchForm.receivableDateRange&&2===this.searchForm.receivableDateRange.length&&(e.receivable_date_range=this.searchForm.receivableDateRange),this.searchForm.actualReceiveDateRange&&2===this.searchForm.actualReceiveDateRange.length&&(e.actual_receive_date_range=this.searchForm.actualReceiveDateRange),e.our_ref_number=e.ourRefNumber,e.application_no=e.applicationNo,e.registration_no=e.registrationNo,e.client_name=e.clientName,e.case_name=e.caseName,e.technical_lead=e.technicalLead,e.case_type=e.caseType,e.business_type=e.businessType,e.application_type=e.applicationType,e.processing_item=e.processingItem,e.case_status=e.caseStatus,e.agency_type=e.agencyType,e.application_country=e.applicationCountry,e.business_staff=e.businessStaff,e.fee_name=e.feeName,e.fee_type=e.feeType;const a=await r["a"].feeMonitor(e);a.data.success?(this.tableData=a.data.data.list,this.pagination.total=a.data.data.total,this.pagination.currentPage=a.data.data.current_page):this.$message.error(a.data.message||"查询失败")}catch(e){console.error("查询官费监控数据失败:",e),this.$message.error("查询失败，请稍后重试")}finally{this.loading=!1}},handleSearch(){this.pagination.currentPage=1,this.fetchData()},resetForm(){this.$refs.searchForm.resetFields(),this.handleSearch()},async exportData(){try{this.$message.info("正在导出数据，请稍候...");const e={...this.searchForm};this.searchForm.applicationDateRange&&2===this.searchForm.applicationDateRange.length&&(e.application_date_range=this.searchForm.applicationDateRange),this.searchForm.paymentDeadlineRange&&2===this.searchForm.paymentDeadlineRange.length&&(e.payment_deadline_range=this.searchForm.paymentDeadlineRange),this.searchForm.receivableDateRange&&2===this.searchForm.receivableDateRange.length&&(e.receivable_date_range=this.searchForm.receivableDateRange),this.searchForm.actualReceiveDateRange&&2===this.searchForm.actualReceiveDateRange.length&&(e.actual_receive_date_range=this.searchForm.actualReceiveDateRange),e.our_ref_number=e.ourRefNumber,e.application_no=e.applicationNo,e.registration_no=e.registrationNo,e.client_name=e.clientName,e.case_name=e.caseName,e.technical_lead=e.technicalLead,e.case_type=e.caseType,e.business_type=e.businessType,e.application_type=e.applicationType,e.processing_item=e.processingItem,e.case_status=e.caseStatus,e.agency_type=e.agencyType,e.application_country=e.applicationCountry,e.business_staff=e.businessStaff,e.fee_name=e.feeName,e.fee_type=e.feeType;const a=await r["a"].exportFeeMonitor(e),t=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=`官费监控_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(l),this.$message.success("数据导出成功")}catch(e){console.error("导出数据失败:",e),this.$message.error("导出失败，请稍后重试")}},handleSizeChange(e){this.pagination.pageSize=e,this.fetchData()},handleCurrentChange(e){this.pagination.currentPage=e,this.fetchData()},handleSelectionChange(e){this.selectedRows=e},handleView(e){const a=e.applicationType.includes("专利")?"patent":"trademark";this.$router.push(`/case/${a}/detail/${e.id}`)},handleEdit(e){this.$message.info("编辑功能暂未实现")}}},n=o,i=t("2877"),c=Object(i["a"])(n,l,s,!1,null,null,null);a["default"]=c.exports},"7cf8":function(e,a,t){"use strict";var l=t("a417"),s=t("c1fb");const r={itemMonitor(e){return s["a"].get(l["a"].host+"/api/case-monitor/item-monitor",{params:e})},exportItemMonitor(e){return s["a"].post(l["a"].host+"/api/case-monitor/item-monitor/export",e,{responseType:"blob"})},feeMonitor(e){return s["a"].get(l["a"].host+"/api/case-monitor/fee-monitor",{params:e})},exportFeeMonitor(e){return s["a"].post(l["a"].host+"/api/case-monitor/fee-monitor/export",e,{responseType:"blob"})},abnormalFee(e){return s["a"].get(l["a"].host+"/api/case-monitor/abnormal-fee",{params:e})},exportAbnormalFee(e){return s["a"].post(l["a"].host+"/api/case-monitor/abnormal-fee/export",e,{responseType:"blob"})},markAbnormalFeeProcessed(e){return s["a"].post(l["a"].host+"/api/case-monitor/abnormal-fee/mark-processed",{ids:e})},getBusinessStaff(){return s["a"].get(l["a"].host+"/api/users/business-staff")},getTechnicalLeads(){return s["a"].get(l["a"].host+"/api/users/technical-leads")},getItemResponsible(){return s["a"].get(l["a"].host+"/api/users/item-responsible")},getCaseTypes(){return[{label:"专利",value:"专利"},{label:"商标",value:"商标"},{label:"版权",value:"版权"},{label:"科服",value:"科服"}]},getBusinessTypes(){return[{label:"申请",value:"申请"},{label:"审查",value:"审查"},{label:"维护",value:"维护"}]},getApplicationTypes(){return[{label:"发明专利",value:"发明专利"},{label:"实用新型",value:"实用新型"},{label:"外观设计",value:"外观设计"}]},getProcessingItems(){return[{label:"官费监控",value:"官费监控"},{label:"年费监控",value:"年费监控"},{label:"申请费",value:"申请费"},{label:"审查费",value:"审查费"}]},getCaseStatuses(){return[{label:"已提交",value:"已提交"},{label:"审批中",value:"审批中"},{label:"已授权",value:"已授权"}]},getAgencyTypes(){return[{label:"我司代理",value:"我司代理"},{label:"客户直接申请",value:"客户直接申请"},{label:"其他代理",value:"其他代理"}]},getApplicationCountries(){return[{label:"中国",value:"中国"},{label:"美国",value:"美国"},{label:"欧盟",value:"欧盟"},{label:"日本",value:"日本"}]},getFeeTypes(){return[{label:"申请费",value:"申请费"},{label:"审查费",value:"审查费"},{label:"年费",value:"年费"},{label:"登记费",value:"登记费"}]},getProcessingItemTypes(){return[{label:"官方来文",value:"官方来文"},{label:"客户来文",value:"客户来文"},{label:"内部事项",value:"内部事项"}]},getProcessingStatuses(){return[{label:"待处理",value:"待处理"},{label:"处理中",value:"处理中"},{label:"已完成",value:"已完成"}]}};a["a"]=r}}]);