(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7eb7"],{5358:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"park-config"},[a("div",{staticClass:"body-part-search"},[a("el-form",{staticClass:"filter-form",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"园区名称"}},[a("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请输入园区名称",clearable:""},model:{value:e.searchForm.park_name,callback:function(a){e.$set(e.searchForm,"park_name",a)},expression:"searchForm.park_name"}})],1),a("el-form-item",{attrs:{label:"是否有效"}},[a("el-select",{staticClass:"filter-item",attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.is_valid,callback:function(a){e.$set(e.searchForm,"is_valid",a)},expression:"searchForm.is_valid"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"body-part-content"},[a("div",{staticClass:"part-table-header"},[e._m(0),a("div",{staticClass:"part-table-operations"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80",align:"center"}}),a("el-table-column",{attrs:{align:"center",prop:"sort_order",label:"排序",width:"80",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"park_name",label:"园区名称","min-width":"160"}}),a("el-table-column",{attrs:{align:"center",prop:"park_code",label:"园区编码"}}),a("el-table-column",{attrs:{align:"center",prop:"address",label:"园区地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"contact_person",label:"联系人",width:"100"}}),a("el-table-column",{attrs:{align:"center",prop:"contact_phone",label:"联系电话",width:"120"}}),a("el-table-column",{attrs:{align:"center",prop:"is_valid",label:"是否有效",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.is_valid?"success":"info"}},[e._v(" "+e._s(t.row.is_valid?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"updater",label:"更新人",width:"100"}}),a("el-table-column",{attrs:{align:"center",prop:"updated_at",label:"更新时间",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.parkDialogTitle,visible:e.parkDialogVisible,width:"650px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(a){e.parkDialogVisible=a}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[a("el-form-item",{attrs:{label:"排序",prop:"sort_order"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"请输入排序值"},model:{value:e.form.sort_order,callback:function(a){e.$set(e.form,"sort_order",a)},expression:"form.sort_order"}})],1),a("el-form-item",{attrs:{label:"园区名称",prop:"park_name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入园区名称"},model:{value:e.form.park_name,callback:function(a){e.$set(e.form,"park_name",a)},expression:"form.park_name"}})],1),a("el-form-item",{attrs:{label:"园区编码",prop:"park_code"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入园区编码"},model:{value:e.form.park_code,callback:function(a){e.$set(e.form,"park_code",a)},expression:"form.park_code"}})],1),a("el-form-item",{attrs:{label:"园区地址",prop:"address"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入园区地址"},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"contact_person"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入联系人"},model:{value:e.form.contact_person,callback:function(a){e.$set(e.form,"contact_person",a)},expression:"form.contact_person"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"contact_phone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入联系电话"},model:{value:e.form.contact_phone,callback:function(a){e.$set(e.form,"contact_phone",a)},expression:"form.contact_phone"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,placeholder:"请输入描述信息"},model:{value:e.form.description,callback:function(a){e.$set(e.form,"description",a)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"是否有效",prop:"is_valid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是或否二选一"},model:{value:e.form.is_valid,callback:function(a){e.$set(e.form,"is_valid",a)},expression:"form.is_valid"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1),"编辑园区"===e.parkDialogTitle?a("el-form-item",{attrs:{label:"更新人"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"系统",disabled:""},model:{value:e.form.updater,callback:function(a){e.$set(e.form,"updater",a)},expression:"form.updater"}})],1):e._e(),"编辑园区"===e.parkDialogTitle?a("el-form-item",{attrs:{label:"更新时间"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"系统记录",disabled:""},model:{value:e.form.updated_at,callback:function(a){e.$set(e.form,"updated_at",a)},expression:"form.updated_at"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)],1)},r=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-title"},[a("span",[e._v("园区名称设置")])])}],i=t("89c4"),s={name:"ParkConfig",data(){return{loading:!1,parkDialogVisible:!1,parkDialogTitle:"新增园区",searchForm:{park_name:"",is_valid:""},tableData:[],pagination:{currentPage:1,pageSize:10,total:0},form:{id:null,park_name:"",park_code:"",description:"",address:"",contact_person:"",contact_phone:"",is_valid:1,sort_order:0,updater:"系统"},rules:{sort_order:[{required:!0,message:"请输入排序值",trigger:"blur"}],park_name:[{required:!0,message:"请输入园区名称",trigger:"blur"}],park_code:[{required:!0,message:"请输入园区编码",trigger:"blur"}],is_valid:[{required:!0,message:"请选择是否有效",trigger:"change"}]}}},created(){this.loadData()},methods:{async loadData(){try{this.loading=!0;const e={page:this.pagination.currentPage,limit:this.pagination.pageSize,park_name:this.searchForm.park_name,is_valid:this.searchForm.is_valid},a=await i["a"].parkConfig.getList(e);a.data.success?(this.tableData=a.data.data.list,this.pagination.total=a.data.data.total):this.$message.error(a.data.message||"获取数据失败")}catch(e){console.error("加载数据失败:",e),this.$message.error("获取数据失败")}finally{this.loading=!1}},handleSearch(){this.pagination.currentPage=1,this.loadData()},resetSearch(){this.searchForm={park_name:"",is_valid:""},this.handleSearch()},handleSizeChange(e){this.pagination.pageSize=e,this.pagination.currentPage=1,this.loadData()},handleCurrentChange(e){this.pagination.currentPage=e,this.loadData()},handleAdd(){this.form={id:null,park_name:"",park_code:"",description:"",address:"",contact_person:"",contact_phone:"",is_valid:1,sort_order:0,updater:"系统"},this.parkDialogTitle="新增园区",this.parkDialogVisible=!0},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.parkDialogTitle="编辑园区",this.parkDialogVisible=!0},async handleSave(){try{const e=await this.$refs.form.validate();if(!e)return;let a;this.loading=!0,a=this.form.id?await i["a"].parkConfig.update(this.form.id,this.form):await i["a"].parkConfig.create(this.form),a.data.success?(this.$message.success(this.form.id?"更新成功":"创建成功"),this.parkDialogVisible=!1,this.loadData()):this.$message.error(a.data.message||"保存失败")}catch(e){console.error("保存失败:",e),this.$message.error("保存失败")}finally{this.loading=!1}},handleCancel(){this.parkDialogVisible=!1},async handleDelete(e){try{await this.$confirm("确定要删除这条记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.loading=!0;const a=await i["a"].parkConfig.delete(e.id);a.data.success?(this.$message.success("删除成功"),this.loadData()):this.$message.error(a.data.message||"删除失败")}catch(a){"cancel"!==a&&(console.error("删除失败:",a),this.$message.error("删除失败"))}finally{this.loading=!1}}}},o=s,n=t("2877"),c=Object(n["a"])(o,l,r,!1,null,"26aef13a",null);a["default"]=c.exports}}]);