(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216bf4"],{c47d:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"completed-case-page"},[a("div",{staticClass:"body-part-search"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"项目类型"}},[a("el-radio-group",{attrs:{max:1},on:{change:e.handleCaseTypeChange},model:{value:e.searchForm.caseTypes,callback:function(a){e.$set(e.searchForm,"caseTypes",a)},expression:"searchForm.caseTypes"}},[a("el-radio",{attrs:{label:"专利"}},[e._v("专利")]),a("el-radio",{attrs:{label:"商标"}},[e._v("商标")]),a("el-radio",{attrs:{label:"版权"}},[e._v("版权")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"我方文号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入我方文号"},model:{value:e.searchForm.ourRefNumber,callback:function(a){e.$set(e.searchForm,"ourRefNumber",a)},expression:"searchForm.ourRefNumber"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.idFieldLabel}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"+e.idFieldLabel},model:{value:e.searchForm.applicationNo,callback:function(a){e.$set(e.searchForm,"applicationNo",a)},expression:"searchForm.applicationNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入客户名称"},model:{value:e.searchForm.customerName,callback:function(a){e.$set(e.searchForm,"customerName",a)},expression:"searchForm.customerName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入申请人"},model:{value:e.searchForm.applicant,callback:function(a){e.$set(e.searchForm,"applicant",a)},expression:"searchForm.applicant"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"处理事项"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择处理事项"},model:{value:e.searchForm.processItems,callback:function(a){e.$set(e.searchForm,"processItems",a)},expression:"searchForm.processItems"}},[a("el-option",{attrs:{label:"官方文件递交",value:"官方文件递交"}}),a("el-option",{attrs:{label:"撰写答复",value:"撰写答复"}}),a("el-option",{attrs:{label:"实质审查",value:"实质审查"}}),a("el-option",{attrs:{label:"材料准备",value:"材料准备"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完成日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.searchForm.completedDateRange,callback:function(a){e.$set(e.searchForm,"completedDateRange",a)},expression:"searchForm.completedDateRange"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请类型"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择申请类型"},model:{value:e.searchForm.applicationTypes,callback:function(a){e.$set(e.searchForm,"applicationTypes",a)},expression:"searchForm.applicationTypes"}},[a("el-option",{attrs:{label:"发明",value:"发明"}}),a("el-option",{attrs:{label:"实用新型",value:"实用新型"}}),a("el-option",{attrs:{label:"外观设计",value:"外观设计"}}),a("el-option",{attrs:{label:"注册",value:"注册"}}),a("el-option",{attrs:{label:"作品登记",value:"作品登记"}})],1)],1)],1)],1),"专利"===e.searchForm.caseTypes?a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"一次提交"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.searchForm.firstSubmitRange,callback:function(a){e.$set(e.searchForm,"firstSubmitRange",a)},expression:"searchForm.firstSubmitRange"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"二次提交"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.searchForm.secondSubmitRange,callback:function(a){e.$set(e.searchForm,"secondSubmitRange",a)},expression:"searchForm.secondSubmitRange"}})],1)],1),a("el-col",{staticStyle:{display:"flex","align-items":"center"},attrs:{span:6}},[a("el-radio-group",{on:{change:e.handleQuickTimeChange},model:{value:e.searchForm.quickTime,callback:function(a){e.$set(e.searchForm,"quickTime",a)},expression:"searchForm.quickTime"}},[a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本周"}},[e._v("本周")]),a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本月"}},[e._v("本月")]),a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本年"}},[e._v("本年")])],1)],1)],1):a("el-row",[a("el-col",{staticStyle:{display:"flex","align-items":"center"},attrs:{span:6}},[a("el-radio-group",{on:{change:e.handleQuickTimeChange},model:{value:e.searchForm.quickTime,callback:function(a){e.$set(e.searchForm,"quickTime",a)},expression:"searchForm.quickTime"}},[a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本周"}},[e._v("本周")]),a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本月"}},[e._v("本月")]),a("el-radio",{staticStyle:{"margin-left":"15px","line-height":"32px"},attrs:{label:"本年"}},[e._v("本年")])],1)],1)],1)],1),a("div",{staticClass:"part-search-buttons"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),a("div",{staticClass:"body-part-content"},[a("div",{staticClass:"part-table-header"},[e._m(0),a("div",{staticClass:"part-table-operations"},[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showMoreFields=!e.showMoreFields}}},[e._v(e._s(e.showMoreFields?"收起更多字段":"显示更多字段"))])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"}}),e._l(e.currentColumns,(function(e){return[a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth}})]})),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleRenew(t.row)}}},[e._v("续展")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleArchive(t.row)}}},[e._v("归档")])]}}])})],2),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},r=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-title"},[a("span",[e._v("已完成（商标专利版权）")])])}],s=(t("14d9"),{name:"CompletedCase",data(){return{loading:!1,showMoreFields:!1,searchForm:{ourRefNumber:"",applicationNo:"",customerName:"",applicant:"",caseType:"",caseTypes:"专利",processItems:[],completedDateRange:[],firstSubmitRange:[],secondSubmitRange:[],applicationTypes:[],quickTime:""},tableData:[],currentPage:1,pageSize:10,total:0,columnConfigs:{"专利":[{prop:"caseName",label:"项目名称"},{prop:"applicationNo",label:"申请号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称"},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:120},{prop:"processStatus",label:"处理状态",width:100},{prop:"officialDocDate",label:"官方发文日",width:120},{prop:"completionDate",label:"完成日",width:120},{prop:"firstSubmit",label:"一次提交",width:100},{prop:"secondSubmit",label:"二次提交",width:100},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignDate",label:"配案日",width:120},{prop:"planFinishDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"caseCoefficient",label:"案件系数",width:100},{prop:"processCoefficient",label:"处理系数",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:120},{prop:"remark",label:"项目备注",minWidth:120}],"商标":[{prop:"ourRefNumber",label:"项目编号",width:120},{prop:"caseName",label:"项目名称"},{prop:"registrationNo",label:"注册号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称"},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:120},{prop:"processStatus",label:"处理状态",width:100},{prop:"receiveDate",label:"收文日期",width:120},{prop:"completionDate",label:"完成日",width:120},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignDate",label:"配案日",width:120},{prop:"planFinishDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"category",label:"类别",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:120},{prop:"remark",label:"项目备注",minWidth:120}],"版权":[{prop:"ourRefNumber",label:"项目编号",width:120},{prop:"caseName",label:"项目名称"},{prop:"registrationNo",label:"登记号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称"},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:120},{prop:"processStatus",label:"处理状态",width:100},{prop:"officialDocDate",label:"官方发文日",width:120},{prop:"completionDate",label:"完成日",width:120},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignDate",label:"配案日",width:120},{prop:"planFinishDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:120},{prop:"remark",label:"项目备注",minWidth:120}]}}},computed:{currentColumns(){return this.columnConfigs[this.searchForm.caseTypes]||[]},idFieldLabel(){return"商标"===this.searchForm.caseTypes?"注册号":"版权"===this.searchForm.caseTypes?"登记号":"申请号"}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const e=await this.$api.personalCase.getCompleted({page:this.currentPage,limit:this.pageSize,case_type:this.searchForm.caseTypes,our_ref_number:this.searchForm.ourRefNumber,application_no:this.searchForm.applicationNo,customer_name:this.searchForm.customerName,applicant:this.searchForm.applicant,process_items:this.searchForm.processItems,application_types:this.searchForm.applicationTypes,start_date:this.searchForm.completedDateRange&&this.searchForm.completedDateRange.length>0?this.searchForm.completedDateRange[0]:null,end_date:this.searchForm.completedDateRange&&this.searchForm.completedDateRange.length>0?this.searchForm.completedDateRange[1]:null,first_submit_start:this.searchForm.firstSubmitRange&&this.searchForm.firstSubmitRange.length>0?this.searchForm.firstSubmitRange[0]:null,first_submit_end:this.searchForm.firstSubmitRange&&this.searchForm.firstSubmitRange.length>0?this.searchForm.firstSubmitRange[1]:null,second_submit_start:this.searchForm.secondSubmitRange&&this.searchForm.secondSubmitRange.length>0?this.searchForm.secondSubmitRange[0]:null,second_submit_end:this.searchForm.secondSubmitRange&&this.searchForm.secondSubmitRange.length>0?this.searchForm.secondSubmitRange[1]:null});e.data.success?(this.tableData=e.data.data.list||[],this.total=e.data.data.total||0):this.$message.error(e.data.message||"获取数据失败")}catch(e){console.error("获取已完成项目失败:",e),this.$message.error("获取数据失败，请稍后重试"),this.tableData=[],this.total=0}finally{this.loading=!1}},setDateRange(e){const a=new Date,t=new Date;if("week"===e){const e=a.getDay()||7;t.setDate(a.getDate()-e+1)}else"month"===e?t.setDate(1):"year"===e&&(t.setMonth(0),t.setDate(1));const l=e=>{const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${a}-${t}-${l}`};this.searchForm.completedDateRange=[l(t),l(a)]},handleSearch(){this.currentPage=1,this.fetchData()},resetForm(){this.$refs.searchForm.resetFields(),this.searchForm.completedDateRange=[],this.searchForm.quickTime=""},handleQuickTimeChange(e){e&&(this.setDateRange("本周"===e?"week":"本月"===e?"month":"year"),this.handleSearch())},handleCaseTypeChange(e){console.log("项目类型变化:",e),this.handleSearch()},handleDetail(e){const a={"专利":"/case/patent/detail/","商标":"/case/trademark/detail/","版权":"/case/copyright/detail/"},t=a[this.searchForm.caseTypes]+e.id;this.$router.push({path:t,query:{refNumber:e.ourRefNumber,mode:"view"}})},handleRenew(e){this.$confirm(`确定要对项目 "${e.ourRefNumber}" 进行续展吗？`,"续展确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{this.$message.success("项目续展申请已提交"),this.fetchData()}catch(e){console.error("续展失败:",e),this.$message.error("续展失败，请稍后重试")}}).catch(()=>{this.$message.info("已取消续展")})},handleArchive(e){this.$confirm(`确定要归档项目 "${e.ourRefNumber}" 吗？归档后项目将不再显示在当前列表中。`,"归档确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{this.$message.success("项目归档成功"),this.fetchData()}catch(e){console.error("归档失败:",e),this.$message.error("归档失败，请稍后重试")}}).catch(()=>{this.$message.info("已取消归档")})},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()}}}),i=s,o=t("2877"),n=Object(o["a"])(i,l,r,!1,null,"668543f1",null);a["default"]=n.exports}}]);