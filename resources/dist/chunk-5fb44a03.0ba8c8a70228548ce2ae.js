(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fb44a03"],{"3f0d":function(e,a,t){"use strict";var l=t("a417"),s=t("c1fb");const i={getNewApplications(e){return s["a"].get(l["a"].host+"/api/assignment/new-applications",{params:e})},getMiddleCases(e){return s["a"].get(l["a"].host+"/api/assignment/middle-cases",{params:e})},getTechServiceCases(e){return s["a"].get(l["a"].host+"/api/assignment/tech-service-cases",{params:e})},getAssignedCases(e){return s["a"].get(l["a"].host+"/api/assignment/assigned-cases",{params:e})},batchAssign(e){return s["a"].post(l["a"].host+"/api/assignment/batch-assign",e)},directAssign(e){return s["a"].post(l["a"].host+"/api/assignment/direct-assign",e)},withdrawAssignment(e){return s["a"].post(l["a"].host+"/api/assignment/withdraw-assignment",e)},getAssignableUsers(){return s["a"].get(l["a"].host+"/api/assignment/assignable-users")},getProcessDetail(e){return s["a"].get(l["a"].host+"/api/assignment/process-detail/"+e)},getCaseTypes(){return[{label:"专利",value:"patent"},{label:"商标",value:"trademark"},{label:"版权",value:"copyright"},{label:"科服",value:"tech_service"}]},getBusinessTypes(){return[{label:"新申请",value:"new"},{label:"答复",value:"response"},{label:"补正",value:"amendment"},{label:"缴费",value:"payment"},{label:"其他",value:"other"}]},getApplicationTypes(){return[{label:"发明专利",value:"invention"},{label:"实用新型",value:"utility"},{label:"外观设计",value:"design"},{label:"商标注册",value:"trademark_registration"},{label:"软件著作权",value:"software_copyright"}]},getProcessingItems(){return[{label:"审查意见答复",value:"response"},{label:"实质审查请求",value:"request"},{label:"缴费",value:"payment"},{label:"补正",value:"amendment"},{label:"登记",value:"registration"}]},getAssignmentStatuses(){return[{label:"未分配",value:"unassigned"},{label:"已分配",value:"assigned"},{label:"处理中",value:"processing"},{label:"已完成",value:"completed"}]}};a["a"]=i},"3f55":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"body-part-search"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDistribute}},[e._v("批量分配")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDirectDistribute}},[e._v("直接分配")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleBatchDistribute}},[e._v("转部门分配")])],1),a("div",{staticClass:"body-part-content"},[a("div",{staticClass:"part-table-header"},[e._m(0),a("div",{staticClass:"part-table-operations"},[a("el-checkbox",{staticStyle:{"padding-top":"10px"},on:{change:e.handleFrozenFilter},model:{value:e.showFrozen,callback:function(a){e.showFrozen=a},expression:"showFrozen"}},[e._v("显示冻结事项")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.filteredTableData,"tooltip-effect":"dark",size:"small",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"caseNumber",label:"项目编号",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"caseTitle",label:"预项名称","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"caseType",label:"项目类型",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"applyType",label:"申请类型",width:"120"}}),a("el-table-column",{attrs:{prop:"processItem",label:"处理事项",width:"120"}}),a("el-table-column",{attrs:{prop:"processor",label:"事项处理人",width:"120"}}),a("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",width:"120"}}),a("el-table-column",{attrs:{prop:"createDate",label:"事项创建日",width:"120"}}),a("el-table-column",{attrs:{prop:"support",label:"售前支持",width:"120"}}),a("el-table-column",{attrs:{prop:"frozen",label:"冻结",width:"120"}}),a("el-table-column",{attrs:{prop:"statusTime",label:"状态时间",width:"150"}}),a("el-table-column",{attrs:{prop:"trademarkType",label:"商标类别",width:"120"}}),a("el-table-column",{attrs:{prop:"frozen",label:"冻结",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.frozen?"danger":"success"}},[e._v(" "+e._s(t.row.frozen?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"batch-dialog",attrs:{title:"批量分配",visible:e.handlerDialogVisible,width:"400px"},on:{"update:visible":function(a){e.handlerDialogVisible=a}}},[a("div",[a("el-form",{attrs:{model:e.processingForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"处理人"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"后台网络选定人 单选"},model:{value:e.processingForm.handler,callback:function(a){e.$set(e.processingForm,"handler",a)},expression:"processingForm.handler"}},e._l(e.handlers,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"内部期限"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"年/月/日"},model:{value:e.processingForm.internalDeadline,callback:function(a){e.$set(e.processingForm,"internalDeadline",a)},expression:"processingForm.internalDeadline"}})],1),a("el-form-item",{attrs:{label:"核稿人员"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"后台网络选定人"},model:{value:e.processingForm.reviewer,callback:function(a){e.$set(e.processingForm,"reviewer",a)},expression:"processingForm.reviewer"}},e._l(e.reviewers,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){e.handlerDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmDistribute}},[e._v("确认")])],1)]),a("el-dialog",{attrs:{title:"列设置",visible:e.showColumnSettings,width:"600px"},on:{"update:visible":function(a){e.showColumnSettings=a}}},[a("el-checkbox-group",{model:{value:e.selectedColumns,callback:function(a){e.selectedColumns=a},expression:"selectedColumns"}},[a("el-row",{attrs:{gutter:10}},e._l(e.allColumns,(function(t){return a("el-col",{key:t.key,attrs:{span:8}},[a("el-checkbox",{attrs:{label:t.key}},[e._v(e._s(t.label))])],1)})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){e.showColumnSettings=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveColumnSettings}},[e._v("确定")])],1)],1)],1)},s=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-title"},[a("span",[e._v("新申请（商标专利版）")])])}],i=(t("14d9"),t("e9f5"),t("910d"),t("7d54"),t("ab43"),t("3f0d")),n={name:"NewApplicationAssignment",data(){return{searchForm:{ourRefNumber:"",caseName:"",docName:"",clientName:"",applicationNo:"",registrationNo:"",applicationType:"",technicalLead:"",delegateDate:[],officialDeadline:[],clientDeadline:[],processingItem:"",handler:"",reviewer:"",transferDept:""},loading:!1,tableData:[],currentPage:1,pageSize:10,total:0,multipleSelection:[],showFrozen:!1,showColumnSettings:!1,selectedColumns:["ourRefNumber","caseName","applicationNo","clientName","applicationType","processingItem","handler","reviewer","internalDeadline","officialDeadline","clientDeadline","processingCreateDate","configurationStatus","statusTime","frozen"],allColumns:[{key:"ourRefNumber",label:"我方文号"},{key:"caseName",label:"项目名称"},{key:"applicationNo",label:"申请号"},{key:"clientName",label:"客户名称"},{key:"applicationType",label:"申请类型"},{key:"processingItem",label:"处理事项"},{key:"handler",label:"处理人"},{key:"reviewer",label:"核稿人"},{key:"internalDeadline",label:"内部期限"},{key:"officialDeadline",label:"官方期限"},{key:"clientDeadline",label:"客户期限"},{key:"processingCreateDate",label:"处理事项创建日期"},{key:"configurationStatus",label:"配置状态"},{key:"statusTime",label:"状态时间"},{key:"frozen",label:"冻结"},{key:"caseType",label:"项目类型"},{key:"businessType",label:"业务类型"},{key:"proposalName",label:"提案名称"},{key:"assignmentRemarks",label:"配案备注"},{key:"processingStatus",label:"处理状态"},{key:"clientRefNumber",label:"客户文号"},{key:"caseRemarks",label:"项目备注"},{key:"processingRemarks",label:"处理事项备注"},{key:"clientCode",label:"客户代码"},{key:"registrationNo",label:"注册号"},{key:"technicalLead",label:"技术主导"},{key:"caseBusinessPerson",label:"项目业务人员"},{key:"caseStatus",label:"项目状态"},{key:"handlerDept",label:"处理事项处理人所属部门"},{key:"applicant",label:"申请人"},{key:"contractNo",label:"合同编号"},{key:"delegateDate",label:"委案日期"}],handlers:[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}],reviewers:[{value:"张工",label:"张工"},{value:"李工",label:"李工"},{value:"王工",label:"王工"}],departments:[{value:"专利部",label:"专利部"},{value:"商标部",label:"商标部"},{value:"法务部",label:"法务部"}],handlerDialogVisible:!1,processingForm:{handler:"",internalDeadline:"",reviewer:""}}},computed:{visibleColumns(){const e={};return this.selectedColumns.forEach(a=>{e[a]=!0}),e},filteredTableData(){return this.showFrozen?this.tableData:this.tableData.filter(e=>!e.frozen)}},created(){this.fetchData(),this.loadUserOptions()},methods:{async fetchData(){this.loading=!0;try{const e={page:this.currentPage,limit:this.pageSize,show_frozen:this.showFrozen},a=await i["a"].getNewApplications(e);a.data.success?(this.tableData=a.data.data.list,this.total=a.data.data.total,this.currentPage=a.data.data.current_page):this.$message.error(a.data.message||"查询失败")}catch(e){console.error("查询新申请数据失败:",e),this.$message.error("查询失败，请稍后重试"),this.tableData=[{id:1,ourRefNumber:"EM-2023-0001",caseName:"智能感应装置",applicationNo:"CN202310XXXXX1",clientName:"上海科技有限公司",applicationType:"发明专利",processingItem:"申请",handler:"",reviewer:"",internalDeadline:"2023-08-15",officialDeadline:"2023-09-01",clientDeadline:"2023-08-20",processingCreateDate:"2023-06-01",configurationStatus:"未配置",statusTime:"2023-06-01",frozen:!1,caseType:"专利项目",businessType:"发明申请",proposalName:"智能感应装置方案",assignmentRemarks:"重要客户项目",processingStatus:"待分配",clientRefNumber:"CLI-2023-001",caseRemarks:"智能感应装置相关专利申请",processingRemarks:"需优先处理",clientCode:"SH001",registrationNo:"",technicalLead:"张工",caseBusinessPerson:"李经理",caseStatus:"申请中",handlerDept:"专利部",applicant:"上海科技有限公司",contractNo:"CON-2023-001",delegateDate:"2023-05-15"},{id:2,ourRefNumber:"EM-2023-0002",caseName:"节能环保装置",applicationNo:"CN202310XXXXX2",clientName:"北京环保科技有限公司",applicationType:"实用新型",processingItem:"申请",handler:"",reviewer:"",internalDeadline:"2023-07-25",officialDeadline:"2023-08-15",clientDeadline:"2023-07-30",processingCreateDate:"2023-05-20",configurationStatus:"已配置",statusTime:"2023-05-20",frozen:!0,caseType:"专利项目",businessType:"实用新型申请",proposalName:"环保装置方案",assignmentRemarks:"环保类项目",processingStatus:"待分配",clientRefNumber:"CLI-2023-002",caseRemarks:"节能环保装置专利申请",processingRemarks:"环保审查要求",clientCode:"BJ002",registrationNo:"",technicalLead:"王工",caseBusinessPerson:"赵经理",caseStatus:"申请中",handlerDept:"专利部",applicant:"北京环保科技有限公司",contractNo:"CON-2023-002",delegateDate:"2023-05-10"},{id:3,ourRefNumber:"EM-2023-0003",caseName:"智能手表外观设计",applicationNo:"CN202310XXXXX3",clientName:"广州电子有限公司",applicationType:"外观设计",processingItem:"申请",handler:"",reviewer:"",internalDeadline:"2023-06-25",officialDeadline:"2023-07-15",clientDeadline:"2023-06-30",processingCreateDate:"2023-05-15",configurationStatus:"未配置",statusTime:"2023-05-15",frozen:!1,caseType:"专利项目",businessType:"外观设计申请",proposalName:"智能手表设计方案",assignmentRemarks:"外观设计类",processingStatus:"待分配",clientRefNumber:"CLI-2023-003",caseRemarks:"智能手表外观设计专利",processingRemarks:"注意设计要点",clientCode:"GZ003",registrationNo:"",technicalLead:"李工",caseBusinessPerson:"钱经理",caseStatus:"申请中",handlerDept:"专利部",applicant:"广州电子有限公司",contractNo:"CON-2023-003",delegateDate:"2023-05-05"}],this.total=3}finally{this.loading=!1}},async loadUserOptions(){try{const e=await i["a"].getAssignableUsers();if(e.data.success){const a=e.data.data;this.handlers=a.map(e=>({value:e.id,label:e.name})),this.reviewers=a.map(e=>({value:e.id,label:e.name}))}}catch(e){console.error("加载用户选项失败:",e)}},handleSearch(){this.currentPage=1,this.fetchData()},resetForm(){this.$refs.searchForm.resetFields()},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},handleView(e){this.$router.push("/case/assignment/new-application/detail/"+e.id)},handleEdit(e){this.$router.push("/case/assignment/new-application/detail/"+e.id)},handleDistribute(){if(0===this.multipleSelection.length)return void this.$message.warning("请至少选择一条记录");const e=this.multipleSelection.filter(e=>e.frozen);e.length>0?this.$message.error("选择的记录中包含冻结状态的处理事项，不允许分配"):this.handlerDialogVisible=!0},async confirmDistribute(){if(this.processingForm.handler)if(this.processingForm.reviewer)try{const e=this.multipleSelection.map(e=>e.id),a=await i["a"].batchAssign({process_ids:e,assigned_to:this.processingForm.handler,reviewer:this.processingForm.reviewer});a.data.success?(this.$message.success("分配成功"),this.handlerDialogVisible=!1,this.fetchData()):this.$message.error(a.data.message||"分配失败")}catch(e){console.error("分配失败:",e),this.$message.error("分配失败，请稍后重试")}else this.$message.warning("请选择核稿人员");else this.$message.warning("请选择处理人")},handleReturn(){this.$message.info("取消操作")},handleSave(){this.$message.success("暂存成功")},handleBatchDistribute(){0!==this.multipleSelection.length?this.$message.success("转部门分配成功"):this.$message.warning("请至少选择一条记录")},handleFrozenFilter(){this.$nextTick(()=>{this.$refs.multipleTable.doLayout()})},saveColumnSettings(){this.showColumnSettings=!1,this.$nextTick(()=>{this.$refs.multipleTable.doLayout()})},handleDirectDistribute(){0!==this.multipleSelection.length?this.$message.success("直接分配成功"):this.$message.warning("请至少选择一条记录")}}},r=n,o=(t("bd0e"),t("2877")),c=Object(o["a"])(r,l,s,!1,null,"31bac52e",null);a["default"]=c.exports},8154:function(e,a,t){},bd0e:function(e,a,t){"use strict";t("8154")}}]);