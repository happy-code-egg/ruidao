(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06d2663e"],{"13d5":function(t,e,a){"use strict";var s=a("23e7"),i=a("d58f").left,l=a("a640"),o=a("1212"),r=a("9adc"),n=!r&&o>79&&o<83,m=n||!l("reduce");s({target:"Array",proto:!0,forced:m},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},"1fd5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"dashboard-container"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"stats-cards"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-icon total"},[e("i",{staticClass:"el-icon-money"})]),e("div",{staticClass:"stat-info"},[e("div",{staticClass:"stat-value"},[t._v(t._s(t._f("currency")(t.dashboardData.totalCommission)))]),e("div",{staticClass:"stat-label"},[t._v("本月总提成")]),e("div",{staticClass:"stat-trend positive"},[e("i",{staticClass:"el-icon-top"}),t._v(" "+t._s(t.dashboardData.commissionGrowth)+"% ")])])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-icon business"},[e("i",{staticClass:"el-icon-user"})]),e("div",{staticClass:"stat-info"},[e("div",{staticClass:"stat-value"},[t._v(t._s(t._f("currency")(t.dashboardData.businessCommission)))]),e("div",{staticClass:"stat-label"},[t._v("商务提成")]),e("div",{staticClass:"stat-trend positive"},[e("i",{staticClass:"el-icon-top"}),t._v(" "+t._s(t.dashboardData.businessGrowth)+"% ")])])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-icon operation"},[e("i",{staticClass:"el-icon-s-tools"})]),e("div",{staticClass:"stat-info"},[e("div",{staticClass:"stat-value"},[t._v(t._s(t._f("currency")(t.dashboardData.operationCommission)))]),e("div",{staticClass:"stat-label"},[t._v("运营提成")]),e("div",{staticClass:"stat-trend positive"},[e("i",{staticClass:"el-icon-top"}),t._v(" "+t._s(t.dashboardData.operationGrowth)+"% ")])])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"stat-card"},[e("div",{staticClass:"stat-icon pending"},[e("i",{staticClass:"el-icon-warning"})]),e("div",{staticClass:"stat-info"},[e("div",{staticClass:"stat-value"},[t._v(t._s(t.dashboardData.pendingCount))]),e("div",{staticClass:"stat-label"},[t._v("待处理事项")]),e("div",{staticClass:"stat-trend"},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 实时更新 ")])])])])],1)],1),e("div",{staticClass:"chart-container"},[e("el-card",{staticClass:"chart-card",attrs:{header:"提成趋势分析"}},[e("div",{staticClass:"chart-header",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("提成趋势分析")]),e("div",{staticClass:"chart-controls"},[e("el-radio-group",{attrs:{size:"small"},on:{change:t.updateChart},model:{value:t.chartPeriod,callback:function(e){t.chartPeriod=e},expression:"chartPeriod"}},[e("el-radio-button",{attrs:{label:"week"}},[t._v("近7天")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("近30天")]),e("el-radio-button",{attrs:{label:"quarter"}},[t._v("本季度")])],1)],1)]),e("div",{staticClass:"chart-content"},[e("div",{staticClass:"chart-placeholder"},[e("i",{staticClass:"el-icon-pie-chart"}),e("p",[t._v("图表数据加载中...")]),e("p",{staticClass:"chart-tip"},[t._v("这里将显示商务提成和运营提成的趋势对比图")])])])])],1)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"quick-actions"},[e("el-card",{staticClass:"action-card",attrs:{header:"快速操作"}},[e("div",{staticClass:"action-list"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-document",block:""},on:{click:t.handleCreateReport}},[t._v(" 生成月度报表 ")]),e("el-button",{attrs:{type:"success",icon:"el-icon-check",block:""},on:{click:t.handleBatchApprove}},[t._v(" 批量审核提成 ")]),e("el-button",{attrs:{type:"warning",icon:"el-icon-money",block:""},on:{click:t.handlePaymentProcess}},[t._v(" 发放管理 ")]),e("el-button",{attrs:{type:"info",icon:"el-icon-download",block:""},on:{click:t.handleExportAll}},[t._v(" 导出财务数据 ")])],1)])],1),e("div",{staticClass:"todo-panel"},[e("el-card",{staticClass:"todo-card",attrs:{header:"待办事项"}},[e("div",{staticClass:"todo-list"},t._l(t.todoList,(function(a,s){return e("div",{key:s,staticClass:"todo-item",on:{click:function(e){return t.handleTodoClick(a)}}},[e("div",{staticClass:"todo-content"},[e("div",{staticClass:"todo-title"},[t._v(t._s(a.title))]),e("div",{staticClass:"todo-desc"},[t._v(t._s(a.description))]),e("div",{staticClass:"todo-time"},[t._v(t._s(a.time))])]),e("div",{staticClass:"todo-badge"},[e("el-badge",{attrs:{value:a.count,type:a.type}})],1)])})),0)])],1)])],1)],1),e("div",{staticClass:"body-part-search"},[e("el-form",{attrs:{model:t.listQuery,"label-width":"100px"}},[e("div",{staticClass:"default-filters"},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"员工姓名",prop:"employeeName"}},[e("el-input",{staticClass:"filter-item",attrs:{placeholder:"员工姓名",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.listQuery.employeeName,callback:function(e){t.$set(t.listQuery,"employeeName",e)},expression:"listQuery.employeeName"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"部门",prop:"department"}},[e("el-select",{staticClass:"filter-item",attrs:{placeholder:"选择部门",clearable:"",size:"small"},model:{value:t.listQuery.department,callback:function(e){t.$set(t.listQuery,"department",e)},expression:"listQuery.department"}},[e("el-option",{attrs:{label:"商务部",value:"business"}}),e("el-option",{attrs:{label:"运营部",value:"operation"}}),e("el-option",{attrs:{label:"技术部",value:"technology"}}),e("el-option",{attrs:{label:"财务部",value:"finance"}})],1)],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"提成月度",prop:"commissionMonth"}},[e("el-date-picker",{staticClass:"filter-item",attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM","value-format":"yyyy-MM",size:"small"},model:{value:t.listQuery.commissionMonth,callback:function(e){t.$set(t.listQuery,"commissionMonth",e)},expression:"listQuery.commissionMonth"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"发放状态",prop:"payStatus"}},[e("el-select",{staticClass:"filter-item",attrs:{placeholder:"发放状态",clearable:"",size:"small"},model:{value:t.listQuery.payStatus,callback:function(e){t.$set(t.listQuery,"payStatus",e)},expression:"listQuery.payStatus"}},[e("el-option",{attrs:{label:"待发放",value:"pending"}}),e("el-option",{attrs:{label:"已发放",value:"paid"}}),e("el-option",{attrs:{label:"已确认",value:"confirmed"}})],1)],1)],1)],1)],1),t.expandVisible?e("div",[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"职级",prop:"level"}},[e("el-select",{staticClass:"filter-item",attrs:{placeholder:"职级",clearable:"",size:"small"},model:{value:t.listQuery.level,callback:function(e){t.$set(t.listQuery,"level",e)},expression:"listQuery.level"}},[e("el-option",{attrs:{label:"初级",value:"junior"}}),e("el-option",{attrs:{label:"中级",value:"middle"}}),e("el-option",{attrs:{label:"高级",value:"senior"}}),e("el-option",{attrs:{label:"专家",value:"expert"}})],1)],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"金额范围",prop:"amountRange"}},[e("div",{staticClass:"custom-range-input"},[e("el-input",{staticClass:"custom-range-item",attrs:{placeholder:"最小金额",size:"small"},model:{value:t.listQuery.minAmount,callback:function(e){t.$set(t.listQuery,"minAmount",e)},expression:"listQuery.minAmount"}}),e("span",{staticClass:"custom-range-separator"},[t._v("-")]),e("el-input",{staticClass:"custom-range-item",attrs:{placeholder:"最大金额",size:"small"},model:{value:t.listQuery.maxAmount,callback:function(e){t.$set(t.listQuery,"maxAmount",e)},expression:"listQuery.maxAmount"}})],1)])],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"发放时间",prop:"payTimeRange"}},[e("el-date-picker",{staticClass:"filter-item",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.payTimeRange,callback:function(e){t.$set(t.listQuery,"payTimeRange",e)},expression:"listQuery.payTimeRange"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"备注关键词",prop:"remarkKeyword"}},[e("el-input",{staticClass:"filter-item",attrs:{placeholder:"备注关键词",clearable:"",size:"small"},model:{value:t.listQuery.remarkKeyword,callback:function(e){t.$set(t.listQuery,"remarkKeyword",e)},expression:"listQuery.remarkKeyword"}})],1)],1)],1)],1):t._e()]),e("div",{staticClass:"part-search-buttons"},[e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")]),e("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:t.resetSearch}},[t._v("重置")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.expandVisible=!t.expandVisible}}},[t._v(" "+t._s(t.expandVisible?"收起":"展开")+" "),e("i",{class:t.expandVisible?"el-icon-arrow-up":"el-icon-arrow-down"})])],1)],1),e("div",{staticClass:"summary-container"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("总提成金额")]),e("div",{staticClass:"summary-value total"},[t._v(t._s(t._f("currency")(t.summaryData.totalAmount)))]),e("div",{staticClass:"summary-desc"},[t._v("本月累计")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("待发放金额")]),e("div",{staticClass:"summary-value pending"},[t._v(t._s(t._f("currency")(t.summaryData.pendingAmount)))]),e("div",{staticClass:"summary-desc"},[t._v(t._s(t.summaryData.pendingCount)+"人")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("已发放金额")]),e("div",{staticClass:"summary-value paid"},[t._v(t._s(t._f("currency")(t.summaryData.paidAmount)))]),e("div",{staticClass:"summary-desc"},[t._v(t._s(t.summaryData.paidCount)+"人")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("平均提成")]),e("div",{staticClass:"summary-value average"},[t._v(t._s(t._f("currency")(t.summaryData.averageAmount)))]),e("div",{staticClass:"summary-desc"},[t._v("人均数据")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("商务占比")]),e("div",{staticClass:"summary-value ratio"},[t._v(t._s(t.summaryData.businessRatio)+"%")]),e("div",{staticClass:"summary-desc"},[t._v("商务/总提成")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"summary-card"},[e("div",{staticClass:"summary-title"},[t._v("运营占比")]),e("div",{staticClass:"summary-value ratio"},[t._v(t._s(t.summaryData.operationRatio)+"%")]),e("div",{staticClass:"summary-desc"},[t._v("运营/总提成")])])])],1)],1),e("div",{staticClass:"body-part-content"},[e("div",{staticClass:"part-table-header"},[e("div",{staticClass:"part-table-title"},[t._v(" 提成汇总管理 ")]),e("div",{staticClass:"part-table-operations"},[e("el-button",{attrs:{size:"small",type:"success",disabled:0===t.selectedRows.length},on:{click:t.handleBatchPay}},[t._v("批量发放")]),e("el-button",{attrs:{size:"small",type:"warning",disabled:0===t.selectedRows.length},on:{click:t.handleBatchConfirm}},[t._v("批量确认")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleGenerateReport}},[t._v("生成报表")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleAdd}},[t._v("新增汇总")]),e("el-button",{attrs:{size:"small"},on:{click:t.handleExport}},[t._v("导出")])],1)]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",size:"small","summary-method":t.getSummaries,"show-summary":""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e("el-table-column",{attrs:{prop:"employeeName",label:"员工姓名",minWidth:"120",align:"center"}}),e("el-table-column",{attrs:{prop:"employeeCode",label:"员工编号",minWidth:"120",align:"center"}}),e("el-table-column",{attrs:{prop:"department",label:"部门",minWidth:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getDepartmentType(a.row.department),size:"small"}},[t._v(" "+t._s(t.getDepartmentText(a.row.department))+" ")])]}}])}),e("el-table-column",{attrs:{prop:"level",label:"职级",minWidth:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getLevelType(a.row.level),size:"small"}},[t._v(" "+t._s(t.getLevelText(a.row.level))+" ")])]}}])}),e("el-table-column",{attrs:{prop:"commissionMonth",label:"提成月度",minWidth:"100",align:"center"}}),e("el-table-column",{attrs:{prop:"businessCommission",label:"商务提成",minWidth:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"business-amount"},[t._v(t._s(t._f("currency")(a.row.businessCommission)))])]}}])}),e("el-table-column",{attrs:{prop:"operationCommission",label:"运营提成",minWidth:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"operation-amount"},[t._v(t._s(t._f("currency")(a.row.operationCommission)))])]}}])}),e("el-table-column",{attrs:{prop:"totalCommission",label:"总提成",minWidth:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"total-amount"},[t._v(t._s(t._f("currency")(a.row.totalCommission)))])]}}])}),e("el-table-column",{attrs:{prop:"taxAmount",label:"税费",minWidth:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"tax-amount"},[t._v(t._s(t._f("currency")(a.row.taxAmount)))])]}}])}),e("el-table-column",{attrs:{prop:"finalAmount",label:"实发金额",minWidth:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"final-amount"},[t._v(t._s(t._f("currency")(a.row.finalAmount)))])]}}])}),e("el-table-column",{attrs:{prop:"payStatus",label:"发放状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getPayStatusType(a.row.payStatus),size:"small"}},[t._v(" "+t._s(t.getPayStatusText(a.row.payStatus))+" ")])]}}])}),e("el-table-column",{attrs:{prop:"payTime",label:"发放时间",minWidth:"160",align:"center"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(e){return t.handleView(a.row)}}},[t._v("查看")]),"pending"===a.row.payStatus?e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-money"},on:{click:function(e){return t.handlePay(a.row)}}},[t._v("发放")]):t._e(),"paid"===a.row.payStatus?e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-check"},on:{click:function(e){return t.handleConfirm(a.row)}}},[t._v("确认")]):t._e(),e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")])]}}])})],1),e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:"提成明细",visible:t.detailDialogVisible,width:"80%","before-close":t.handleDetailDialogClose},on:{"update:visible":function(e){t.detailDialogVisible=e}}},[t.currentEmployee?e("div",[e("el-card",{staticClass:"detail-card",attrs:{header:"员工信息"}},[e("el-descriptions",{attrs:{column:3,border:""}},[e("el-descriptions-item",{attrs:{label:"员工姓名"}},[t._v(t._s(t.currentEmployee.employeeName))]),e("el-descriptions-item",{attrs:{label:"员工编号"}},[t._v(t._s(t.currentEmployee.employeeCode))]),e("el-descriptions-item",{attrs:{label:"所属部门"}},[t._v(t._s(t.getDepartmentText(t.currentEmployee.department)))]),e("el-descriptions-item",{attrs:{label:"职级"}},[t._v(t._s(t.getLevelText(t.currentEmployee.level)))]),e("el-descriptions-item",{attrs:{label:"提成月度"}},[t._v(t._s(t.currentEmployee.commissionMonth))]),e("el-descriptions-item",{attrs:{label:"发放状态"}},[e("el-tag",{attrs:{type:t.getPayStatusType(t.currentEmployee.payStatus),size:"small"}},[t._v(" "+t._s(t.getPayStatusText(t.currentEmployee.payStatus))+" ")])],1)],1)],1),e("el-card",{staticClass:"detail-card",attrs:{header:"提成构成"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"commission-breakdown"},[e("h4",[t._v("商务提成明细")]),e("el-table",{attrs:{data:t.currentEmployee.businessDetails||[],border:"",size:"small"}},[e("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),e("el-table-column",{attrs:{prop:"customerName",label:"客户名称"}}),e("el-table-column",{attrs:{prop:"amount",label:"提成金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.row.amount))+" ")]}}],null,!1,2411823663)}),e("el-table-column",{attrs:{prop:"rate",label:"提成比例"}})],1)],1)]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"commission-breakdown"},[e("h4",[t._v("运营提成明细")]),e("el-table",{attrs:{data:t.currentEmployee.operationDetails||[],border:"",size:"small"}},[e("el-table-column",{attrs:{prop:"taskName",label:"任务名称"}}),e("el-table-column",{attrs:{prop:"caseNo",label:"项目编号"}}),e("el-table-column",{attrs:{prop:"amount",label:"提成金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.row.amount))+" ")]}}],null,!1,2411823663)}),e("el-table-column",{attrs:{prop:"workload",label:"工作量"}})],1)],1)])],1)],1),e("el-card",{staticClass:"detail-card",attrs:{header:"发放记录"}},[e("el-timeline",t._l(t.currentEmployee.paymentRecords||[],(function(a,s){return e("el-timeline-item",{key:s,attrs:{timestamp:a.timestamp,type:t.getTimelineType(a.type)}},[e("strong",[t._v(t._s(a.action))]),e("p",[t._v("操作人："+t._s(a.operator))]),a.remark?e("p",[t._v("备注："+t._s(a.remark))]):t._e(),a.amount?e("p",[t._v("金额："+t._s(t._f("currency")(a.amount)))]):t._e()])})),1)],1)],1):t._e()]),e("el-dialog",{attrs:{title:"发放确认",visible:t.payDialogVisible,width:"50%"},on:{"update:visible":function(e){t.payDialogVisible=e}}},[t.currentPayRow?e("div",[e("div",{staticClass:"pay-info"},[e("p",[e("strong",[t._v("员工信息：")]),t._v(t._s(t.currentPayRow.employeeName)+" ("+t._s(t.currentPayRow.employeeCode)+")")]),e("p",[e("strong",[t._v("总提成金额：")]),e("span",{staticClass:"amount-highlight"},[t._v(t._s(t._f("currency")(t.currentPayRow.totalAmount)))])]),e("p",[e("strong",[t._v("代扣税费：")]),e("span",{staticClass:"tax-highlight"},[t._v(t._s(t._f("currency")(t.currentPayRow.taxAmount)))])]),e("p",[e("strong",[t._v("实发金额：")]),e("span",{staticClass:"final-highlight"},[t._v(t._s(t._f("currency")(t.currentPayRow.finalAmount)))])])]),e("el-form",{attrs:{model:t.payForm,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"发放方式"}},[e("el-radio-group",{model:{value:t.payForm.method,callback:function(e){t.$set(t.payForm,"method",e)},expression:"payForm.method"}},[e("el-radio",{attrs:{label:"bank_transfer"}},[t._v("银行转账")]),e("el-radio",{attrs:{label:"cash"}},[t._v("现金发放")]),e("el-radio",{attrs:{label:"salary"}},[t._v("随工资发放")])],1)],1),e("el-form-item",{attrs:{label:"发放时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择发放时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.payForm.payTime,callback:function(e){t.$set(t.payForm,"payTime",e)},expression:"payForm.payTime"}})],1),e("el-form-item",{attrs:{label:"发放备注"}},[e("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入发放备注"},model:{value:t.payForm.remark,callback:function(e){t.$set(t.payForm,"remark",e)},expression:"payForm.remark"}})],1)],1)],1):t._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.payDialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirmPay}},[t._v("确认发放")])],1)]),e("el-dialog",{attrs:{title:"生成月度报表",visible:t.reportDialogVisible,width:"50%"},on:{"update:visible":function(e){t.reportDialogVisible=e}}},[e("el-form",{attrs:{model:t.reportForm,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"报表月度",required:""}},[e("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM","value-format":"yyyy-MM"},model:{value:t.reportForm.month,callback:function(e){t.$set(t.reportForm,"month",e)},expression:"reportForm.month"}})],1),e("el-form-item",{attrs:{label:"报表类型"}},[e("el-checkbox-group",{model:{value:t.reportForm.types,callback:function(e){t.$set(t.reportForm,"types",e)},expression:"reportForm.types"}},[e("el-checkbox",{attrs:{label:"business"}},[t._v("商务提成报表")]),e("el-checkbox",{attrs:{label:"operation"}},[t._v("运营提成报表")]),e("el-checkbox",{attrs:{label:"summary"}},[t._v("汇总报表")]),e("el-checkbox",{attrs:{label:"tax"}},[t._v("税费报表")])],1)],1),e("el-form-item",{attrs:{label:"输出格式"}},[e("el-radio-group",{model:{value:t.reportForm.format,callback:function(e){t.$set(t.reportForm,"format",e)},expression:"reportForm.format"}},[e("el-radio",{attrs:{label:"excel"}},[t._v("Excel")]),e("el-radio",{attrs:{label:"pdf"}},[t._v("PDF")])],1)],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入备注"},model:{value:t.reportForm.remark,callback:function(e){t.$set(t.reportForm,"remark",e)},expression:"reportForm.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.reportDialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirmGenerateReport}},[t._v("生成报表")])],1)],1),e("el-dialog",{attrs:{title:t.addForm.id?"编辑提成汇总":"新增提成汇总",visible:t.addDialogVisible,width:"70%","before-close":t.handleAddDialogClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[e("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules,"label-width":"120px"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"员工姓名",prop:"employeeName"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择员工",filterable:""},model:{value:t.addForm.employeeName,callback:function(e){t.$set(t.addForm,"employeeName",e)},expression:"addForm.employeeName"}},t._l(t.employeeList,(function(t){return e("el-option",{key:t.id,attrs:{label:`${t.name} (${t.code})`,value:t.name}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"员工编号",prop:"employeeCode"}},[e("el-input",{attrs:{placeholder:"员工编号"},model:{value:t.addForm.employeeCode,callback:function(e){t.$set(t.addForm,"employeeCode",e)},expression:"addForm.employeeCode"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"部门",prop:"department"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择部门"},model:{value:t.addForm.department,callback:function(e){t.$set(t.addForm,"department",e)},expression:"addForm.department"}},[e("el-option",{attrs:{label:"商务部",value:"business"}}),e("el-option",{attrs:{label:"技术部",value:"technical"}}),e("el-option",{attrs:{label:"财务部",value:"finance"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"职级",prop:"level"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职级"},model:{value:t.addForm.level,callback:function(e){t.$set(t.addForm,"level",e)},expression:"addForm.level"}},[e("el-option",{attrs:{label:"初级",value:"junior"}}),e("el-option",{attrs:{label:"中级",value:"middle"}}),e("el-option",{attrs:{label:"高级",value:"senior"}}),e("el-option",{attrs:{label:"专家",value:"expert"}})],1)],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"提成月度",prop:"commissionMonth"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM","value-format":"yyyy-MM"},model:{value:t.addForm.commissionMonth,callback:function(e){t.$set(t.addForm,"commissionMonth",e)},expression:"addForm.commissionMonth"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"发放状态",prop:"payStatus"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发放状态"},model:{value:t.addForm.payStatus,callback:function(e){t.$set(t.addForm,"payStatus",e)},expression:"addForm.payStatus"}},[e("el-option",{attrs:{label:"待发放",value:"pending"}}),e("el-option",{attrs:{label:"已发放",value:"paid"}}),e("el-option",{attrs:{label:"已确认",value:"confirmed"}})],1)],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"商务提成",prop:"businessCommission"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2},on:{change:t.calculateTotal},model:{value:t.addForm.businessCommission,callback:function(e){t.$set(t.addForm,"businessCommission",e)},expression:"addForm.businessCommission"}},[e("template",{slot:"prepend"},[t._v("¥")])],2)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"运营提成",prop:"operationCommission"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2},on:{change:t.calculateTotal},model:{value:t.addForm.operationCommission,callback:function(e){t.$set(t.addForm,"operationCommission",e)},expression:"addForm.operationCommission"}},[e("template",{slot:"prepend"},[t._v("¥")])],2)],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"总提成金额"}},[e("el-input",{attrs:{value:t._f("currency")(t.addForm.totalCommission),disabled:""}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"税费",prop:"taxAmount"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2},on:{change:t.calculateFinal},model:{value:t.addForm.taxAmount,callback:function(e){t.$set(t.addForm,"taxAmount",e)},expression:"addForm.taxAmount"}},[e("template",{slot:"prepend"},[t._v("¥")])],2)],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"实发金额"}},[e("el-input",{attrs:{value:t._f("currency")(t.addForm.finalAmount),disabled:""}})],1)],1),e("el-col",{attrs:{span:12}},["paid"===t.addForm.payStatus?e("el-form-item",{attrs:{label:"发放时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择发放时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.addForm.payTime,callback:function(e){t.$set(t.addForm,"payTime",e)},expression:"addForm.payTime"}})],1):t._e()],1)],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入备注"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleAddDialogClose}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitAdd}},[t._v(t._s(t.addForm.id?"保存修改":"确认新增"))])],1)],1)],1)},i=[],l=(a("14d9"),a("13d5"),a("e9f5"),a("d866"),a("910d"),a("7d54"),a("ab43"),a("9485"),{name:"FinanceCommission",filters:{currency(t){return t?"¥"+Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2}):"¥0.00"}},data(){return{listLoading:!1,expandVisible:!1,detailDialogVisible:!1,payDialogVisible:!1,reportDialogVisible:!1,addDialogVisible:!1,currentEmployee:null,currentPayRow:null,selectedRows:[],chartPeriod:"month",listQuery:{page:1,limit:20,employeeName:"",department:"",commissionMonth:"2024-01",payStatus:"",level:"",minAmount:"",maxAmount:"",payTimeRange:[],remarkKeyword:""},list:[],total:0,dashboardData:{totalCommission:0,businessCommission:0,operationCommission:0,pendingCount:0,commissionGrowth:0,businessGrowth:0,operationGrowth:0},summaryData:{totalAmount:0,pendingAmount:0,paidAmount:0,averageAmount:0,pendingCount:0,paidCount:0,businessRatio:0,operationRatio:0},payForm:{method:"bank_transfer",payTime:"",remark:""},reportForm:{month:"2024-01",types:["summary"],format:"excel",description:""},addForm:{id:null,employeeName:"",employeeCode:"",department:"",level:"",commissionMonth:"",payStatus:"pending",businessCommission:0,operationCommission:0,totalCommission:0,taxAmount:0,finalAmount:0,payTime:"",remark:""},addRules:{employeeName:[{required:!0,message:"请选择员工",trigger:"change"}],employeeCode:[{required:!0,message:"请输入员工编号",trigger:"blur"}],department:[{required:!0,message:"请选择部门",trigger:"change"}],level:[{required:!0,message:"请选择职级",trigger:"change"}],commissionMonth:[{required:!0,message:"请选择提成月度",trigger:"change"}],payStatus:[{required:!0,message:"请选择发放状态",trigger:"change"}],businessCommission:[{required:!0,message:"商务提成不能为空",trigger:"blur"}],operationCommission:[{required:!0,message:"运营提成不能为空",trigger:"blur"}],taxAmount:[{required:!0,message:"税费不能为空",trigger:"blur"}],payTime:[{required:!0,message:"发放时间不能为空",trigger:"change"}]},employeeList:[{id:1,name:"张三",code:"EMP0001"},{id:2,name:"李四",code:"EMP0002"},{id:3,name:"王五",code:"EMP0003"},{id:4,name:"赵六",code:"EMP0004"},{id:5,name:"钱七",code:"EMP0005"},{id:6,name:"孙八",code:"EMP0006"},{id:7,name:"周九",code:"EMP0007"},{id:8,name:"吴十",code:"EMP0008"},{id:9,name:"郑十一",code:"EMP0009"},{id:10,name:"王十二",code:"EMP0010"}],todoList:[]}},created(){this.getList(),this.getDashboardData(),this.getTodoList()},methods:{getList(){this.listLoading=!0,setTimeout(()=>{this.list=this.getMockData(),this.total=45,this.getSummaryData(),this.listLoading=!1},500)},getMockData(){const t=[],e=["张三","李四","王五","赵六","钱七","孙八","周九","吴十","陈一","林二"],a=["business","operation","technology","finance"],s=["junior","middle","senior","expert"],i=["pending","paid","confirmed"];for(let l=1;l<=20;l++){const o=Math.floor(25e3*Math.random())+5e3,r=Math.floor(18e3*Math.random())+3e3,n=o+r,m=Math.floor(.03*n),c=n-m,d=i[Math.floor(Math.random()*i.length)];t.push({id:l,employeeCode:"EMP"+String(1e3+l).padStart(4,"0"),employeeName:e[l%e.length],department:a[l%a.length],level:s[l%s.length],commissionMonth:"2024-01",businessAmount:o,operationAmount:r,totalAmount:n,taxAmount:m,finalAmount:c,payStatus:d,payTime:"pending"===d?null:"2024-02-05 10:30:00",remark:"提成发放备注",businessDetails:[{projectName:"专利申请项目A",customerName:"客户A",amount:.6*o,rate:"8%"},{projectName:"商标注册项目B",customerName:"客户B",amount:.4*o,rate:"5%"}],operationDetails:[{taskName:"专利撰写任务",caseNo:"AN20001",amount:.7*r,workload:"40h"},{taskName:"技术审核任务",caseNo:"AN20002",amount:.3*r,workload:"20h"}],paymentRecords:[{action:"创建提成记录",operator:"系统",timestamp:"2024-01-31 23:59:59",type:"create",remark:"月度提成自动计算"},{action:"pending"===d?"等待发放":"发放完成",operator:"财务人员",timestamp:"2024-02-05 10:30:00",type:"pending"===d?"pending":"pay",amount:c,remark:"银行转账发放"}]})}return t},getDashboardData(){this.dashboardData={totalCommission:856e3,businessCommission:52e4,operationCommission:336e3,pendingCount:8,commissionGrowth:12.5,businessGrowth:15.2,operationGrowth:8.8}},getSummaryData(){const t=this.list.reduce((t,e)=>t+e.totalAmount,0),e=this.list.filter(t=>"pending"===t.payStatus),a=this.list.filter(t=>["paid","confirmed"].includes(t.payStatus)),s=e.reduce((t,e)=>t+e.totalAmount,0),i=a.reduce((t,e)=>t+e.totalAmount,0),l=this.list.reduce((t,e)=>t+e.businessAmount,0),o=this.list.reduce((t,e)=>t+e.operationAmount,0);this.summaryData={totalAmount:t,pendingAmount:s,paidAmount:i,averageAmount:t/this.list.length||0,pendingCount:e.length,paidCount:a.length,businessRatio:t>0?(l/t*100).toFixed(1):0,operationRatio:t>0?(o/t*100).toFixed(1):0}},getTodoList(){this.todoList=[{title:"待发放提成",description:"8名员工提成待发放",time:"今天",count:8,type:"warning",action:"payment"},{title:"待审核申报",description:"运营提成申报待审核",time:"今天",count:12,type:"primary",action:"approve"},{title:"月度报表",description:"上月提成报表待生成",time:"昨天",count:1,type:"info",action:"report"},{title:"异常记录",description:"发现2笔异常提成记录",time:"2天前",count:2,type:"danger",action:"review"}]},resetSearch(){this.listQuery={page:1,limit:20,employeeName:"",department:"",commissionMonth:"2024-01",payStatus:"",level:"",minAmount:"",maxAmount:"",payTimeRange:[],remarkKeyword:""},this.getList()},handleSearch(){this.listQuery.page=1,this.getList()},handleView(t){this.currentEmployee={...t},this.detailDialogVisible=!0},handlePay(t){this.currentPayRow={...t},this.payForm={method:"bank_transfer",payTime:(new Date).toISOString().slice(0,19).replace("T"," "),remark:""},this.payDialogVisible=!0},handleConfirmPay(){this.listLoading=!0,setTimeout(()=>{const t=this.list.findIndex(t=>t.id===this.currentPayRow.id);t>-1&&(this.list[t].payStatus="paid",this.list[t].payTime=this.payForm.payTime,this.list[t].remark=this.payForm.remark),this.$message.success("发放成功"),this.payDialogVisible=!1,this.listLoading=!1,this.getSummaryData(),this.getDashboardData()},1e3)},handleConfirm(t){this.$confirm("确认该员工已收到提成吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.payStatus="confirmed",this.$message.success("确认成功"),this.getSummaryData()})},handleRevokePay(t){this.$confirm("确认要撤销该员工的发放状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.payStatus="pending",t.payTime=null,this.$message.success("撤销成功"),this.getSummaryData()})},handleBatchPay(){const t=this.selectedRows.filter(t=>"pending"===t.payStatus);0!==t.length?this.$confirm(`确定要批量发放选中的 ${t.length} 条记录吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.listLoading=!0,setTimeout(()=>{t.forEach(t=>{t.payStatus="paid",t.payTime=(new Date).toLocaleString()}),this.$message.success(`批量发放完成，共处理 ${t.length} 条记录`),this.listLoading=!1,this.getSummaryData()},1500)}):this.$message.warning("请选择待发放的记录")},handleBatchConfirm(){const t=this.selectedRows.filter(t=>"paid"===t.payStatus);0!==t.length?this.$confirm(`确定要批量确认选中的 ${t.length} 条记录吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.listLoading=!0,setTimeout(()=>{t.forEach(t=>{t.payStatus="confirmed"}),this.$message.success(`批量确认完成，共处理 ${t.length} 条记录`),this.listLoading=!1,this.getSummaryData()},1500)}):this.$message.warning("请选择已发放的记录")},handleGenerateReport(){this.reportDialogVisible=!0},handleConfirmReport(){this.$message.success("报表生成中，请稍后查看下载"),this.reportDialogVisible=!1},handleAdd(){this.addForm={id:null,employeeName:"",employeeCode:"",department:"",level:"",commissionMonth:"",payStatus:"pending",businessCommission:0,operationCommission:0,totalCommission:0,taxAmount:0,finalAmount:0,payTime:"",remark:""},this.addDialogVisible=!0},handleEdit(t){this.addForm={...t},this.addDialogVisible=!0},handleAddDialogClose(){this.addDialogVisible=!1,this.$refs.addForm&&this.$refs.addForm.resetFields()},handleSubmitAdd(){this.$refs.addForm.validate(t=>{t&&(this.listLoading=!0,setTimeout(()=>{const t=this.list.findIndex(t=>t.id===this.addForm.id);if(t>-1)this.list[t]=this.addForm,this.$message.success("编辑成功");else{const t=this.list.length+1;this.list.push({...this.addForm,id:t}),this.$message.success("新增成功")}this.addDialogVisible=!1,this.listLoading=!1,this.getSummaryData(),this.getDashboardData()},1e3))})},calculateTotal(){this.addForm.totalCommission=this.addForm.businessCommission+this.addForm.operationCommission,this.addForm.finalAmount=this.addForm.totalCommission-this.addForm.taxAmount},calculateFinal(){this.addForm.finalAmount=this.addForm.totalCommission-this.addForm.taxAmount},handleCreateReport(){this.handleGenerateReport()},handleBatchApprove(){this.$message.info("跳转到审核页面...")},handlePaymentProcess(){this.$message.info("打开发放管理面板...")},handleExportAll(){this.$message.info("导出所有财务数据...")},handleExport(){this.$message.info("导出提成明细数据...")},updateChart(){this.$message.info("更新图表数据...")},handleTodoClick(t){this.$message.info("处理待办事项："+t.title)},handleViewAudit(t){this.$message.info("查看审核记录")},handlePrint(t){this.$message.info("打印发放凭证")},handleAddRemark(t){this.$message.info("添加备注")},handleDetailDialogClose(){this.detailDialogVisible=!1,this.currentEmployee=null},handleSelectionChange(t){this.selectedRows=t},handleSizeChange(t){this.listQuery.limit=t,this.getList()},handleCurrentChange(t){this.listQuery.page=t,this.getList()},getDepartmentType(t){const e={business:"primary",operation:"success",technology:"warning",finance:"info"};return e[t]||"default"},getDepartmentText(t){const e={business:"商务部",operation:"运营部",technology:"技术部",finance:"财务部"};return e[t]||t},getLevelType(t){const e={junior:"info",middle:"warning",senior:"success",expert:"primary"};return e[t]||"info"},getLevelText(t){const e={junior:"初级",middle:"中级",senior:"高级",expert:"专家"};return e[t]||t},getPayStatusType(t){const e={pending:"warning",paid:"primary",confirmed:"success"};return e[t]||"info"},getPayStatusText(t){const e={pending:"待发放",paid:"已发放",confirmed:"已确认"};return e[t]||t},getTimelineType(t){const e={create:"primary",pending:"warning",pay:"success",confirm:"info"};return e[t]||"primary"},getSummaries(t){const{columns:e,data:a}=t,s=[];return e.forEach((t,e)=>{if(0!==e)if(["businessAmount","operationAmount","totalAmount","taxAmount","finalAmount"].includes(t.property)){const i=a.map(e=>Number(e[t.property]));i.every(t=>isNaN(t))?s[e]="N/A":(s[e]=i.reduce((t,e)=>{const a=Number(e);return isNaN(a)?t:t+e},0),s[e]=this.$options.filters.currency(s[e]))}else s[e]="";else s[e]="合计"}),s}}}),o=l,r=(a("bef7"),a("2877")),n=Object(r["a"])(o,s,i,!1,null,"57ba396a",null);e["default"]=n.exports},8558:function(t,e,a){"use strict";var s=a("cfe9"),i=a("b5db"),l=a("c6b6"),o=function(t){return i.slice(0,t.length)===t};t.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":s.Bun&&"string"==typeof Bun.version?"BUN":s.Deno&&"object"==typeof Deno.version?"DENO":"process"===l(s.process)?"NODE":s.window&&s.document?"BROWSER":"REST"}()},9485:function(t,e,a){"use strict";var s=a("23e7"),i=a("2266"),l=a("59ed"),o=a("825a"),r=a("46c4"),n=TypeError;s({target:"Iterator",proto:!0,real:!0},{reduce:function(t){o(this),l(t);var e=r(this),a=arguments.length<2,s=a?void 0:arguments[1],m=0;if(i(e,(function(e){a?(a=!1,s=e):s=t(s,e,m),m++}),{IS_RECORD:!0}),a)throw new n("Reduce of empty iterator with no initial value");return s}})},"9adc":function(t,e,a){"use strict";var s=a("8558");t.exports="NODE"===s},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},bef7:function(t,e,a){"use strict";a("ffca")},d58f:function(t,e,a){"use strict";var s=a("59ed"),i=a("7b0b"),l=a("44ad"),o=a("07fa"),r=TypeError,n="Reduce of empty array with no initial value",m=function(t){return function(e,a,m,c){var d=i(e),u=l(d),p=o(d);if(s(a),0===p&&m<2)throw new r(n);var y=t?p-1:0,h=t?-1:1;if(m<2)while(1){if(y in u){c=u[y],y+=h;break}if(y+=h,t?y<0:p<=y)throw new r(n)}for(;t?y>=0:p>y;y+=h)y in u&&(c=a(c,u[y],y,d));return c}};t.exports={left:m(!1),right:m(!0)}},ffca:function(t,e,a){}}]);