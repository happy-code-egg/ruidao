(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-590dec65"],{2687:function(e,t,a){"use strict";a("f841")},d004:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-container"},[t("h2",[e._v("测试处理事项费用和附件数据加载")]),t("el-card",[t("h3",[e._v("测试参数")]),t("el-form",{attrs:{inline:""}},[t("el-form-item",{attrs:{label:"案件ID"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入案件ID"},model:{value:e.testCaseId,callback:function(t){e.testCaseId=t},expression:"testCaseId"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.testLoadData}},[e._v("测试加载数据")])],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.openProcessItemDialog}},[e._v("打开处理事项对话框")])],1)],1)],1),e.contractData?t("el-card",{staticStyle:{"margin-top":"20px"}},[t("h3",[e._v("Contract Case Record 数据")]),t("pre",[e._v(e._s(JSON.stringify(e.contractData,null,2)))])]):e._e(),e.loadedFees.length>0||e.loadedAttachments.length>0?t("el-card",{staticStyle:{"margin-top":"20px"}},[t("h3",[e._v("加载的费用和附件数据")]),t("h4",[e._v("服务费 ("+e._s(e.loadedFees.length)+"项)")]),t("el-table",{attrs:{data:e.loadedFees,border:""}},[t("el-table-column",{attrs:{prop:"feeName",label:"费用名称"}}),t("el-table-column",{attrs:{prop:"feeDescription",label:"费用描述"}}),t("el-table-column",{attrs:{prop:"amount",label:"金额"}}),t("el-table-column",{attrs:{prop:"currency",label:"币种"}})],1),t("h4",{staticStyle:{"margin-top":"20px"}},[e._v("附件 ("+e._s(e.loadedAttachments.length)+"个)")]),t("el-table",{attrs:{data:e.loadedAttachments,border:""}},[t("el-table-column",{attrs:{prop:"file_type",label:"文件类型"}}),t("el-table-column",{attrs:{prop:"file_name",label:"文件名称"}}),t("el-table-column",{attrs:{prop:"file_desc",label:"文件描述"}})],1)],1):e._e(),t("ProcessItemDialog",{attrs:{visible:e.processItemDialogVisible,"case-id":parseInt(e.testCaseId),"case-type":2},on:{"update:visible":function(t){e.processItemDialogVisible=t},save:e.handleProcessItemSave}})],1)},l=[],o=(a("e9f5"),a("ab43"),a("21a4")),r={name:"TestProcessItemLoad",components:{ProcessItemDialog:o["a"]},data(){return{testCaseId:"68",contractData:null,loadedFees:[],loadedAttachments:[],processItemDialogVisible:!1}},methods:{async testLoadData(){if(this.testCaseId)try{console.log("测试加载数据，案件ID:",this.testCaseId);const t=await this.$api.customer.getContractCaseRecordByCaseId(this.testCaseId);if(console.log("API响应:",t),t.data&&t.data.success){this.contractData=t.data.data,console.log("获取到的数据:",this.contractData);const e=this.contractData.service_fees||[],a=this.contractData.official_fees||[],s=this.contractData.attachments||[];console.log("原始数据类型:",{serviceFees:typeof e,officialFees:typeof a,attachments:typeof s}),this.loadedFees=this.formatFeeData([...e,...a]),this.loadedAttachments=this.formatAttachmentData(s),this.$message.success(`数据加载成功！服务费${e.length}项，官费${a.length}项，附件${s.length}个`)}else{var e;this.$message.error("API返回错误: "+((null===(e=t.data)||void 0===e?void 0:e.message)||"未知错误"))}}catch(a){var t;console.error("API调用失败:",a),this.$message.error("API调用失败: "+((null===(t=a.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||a.message))}else this.$message.error("请输入案件ID")},openProcessItemDialog(){this.testCaseId?this.processItemDialogVisible=!0:this.$message.error("请输入案件ID")},handleProcessItemSave(e){console.log("处理事项保存成功:",e),this.$message.success("处理事项保存成功")},formatFeeData(e){return Array.isArray(e)?e.map(e=>({feeName:e.fee_name||e.feeName||"",feeDescription:e.fee_description||e.feeDescription||"",amount:e.amount||0,currency:e.currency||"RMB",remarks:e.remarks||e.remark||""})):[]},formatAttachmentData(e){return Array.isArray(e)?e.map(e=>({file_type:e.file_type||"",file_sub_type:e.file_sub_type||"",file_desc:e.file_desc||e.file_description||"",file_name:e.file_name||e.fileName||"",file_path:e.file_path||e.filePath||"",file_size:e.file_size||e.fileSize||0})):[]}}},i=r,c=(a("2687"),a("2877")),n=Object(c["a"])(i,s,l,!1,null,"42930f04",null);t["default"]=n.exports},f841:function(e,t,a){}}]);