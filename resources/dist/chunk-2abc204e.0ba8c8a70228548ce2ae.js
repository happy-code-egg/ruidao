(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2abc204e"],{"39a4":function(e,t,s){"use strict";s("9b99")},"9b99":function(e,t,s){},"9dbb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pending-case-page"},[t("div",{staticClass:"body-part-search"},[t("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"项目类型"}},[t("el-radio-group",{attrs:{max:1},on:{change:e.handleCaseTypeChange},model:{value:e.searchForm.caseTypes,callback:function(t){e.$set(e.searchForm,"caseTypes",t)},expression:"searchForm.caseTypes"}},[t("el-radio",{attrs:{label:"专利"}},[e._v("专利")]),t("el-radio",{attrs:{label:"商标"}},[e._v("商标")]),t("el-radio",{attrs:{label:"版权"}},[e._v("版权")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"内部期限"}},[t("el-radio-group",{model:{value:e.searchForm.internalDeadlines,callback:function(t){e.$set(e.searchForm,"internalDeadlines",t)},expression:"searchForm.internalDeadlines"}},[t("el-radio",{attrs:{label:"今日到期"}},[e._v("今日到期")]),t("el-radio",{attrs:{label:"十五日到限"}},[e._v("十五日到限")]),t("el-radio",{attrs:{label:"七日到限"}},[e._v("七日到限")]),t("el-radio",{attrs:{label:"三日到限"}},[e._v("三日到限")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"官方期限"}},[t("el-radio-group",{model:{value:e.searchForm.officialDeadlines,callback:function(t){e.$set(e.searchForm,"officialDeadlines",t)},expression:"searchForm.officialDeadlines"}},[t("el-radio",{attrs:{label:"今日绝限"}},[e._v("今日绝限")]),t("el-radio",{attrs:{label:"十五日绝限"}},[e._v("十五日绝限")]),t("el-radio",{attrs:{label:"七日绝限"}},[e._v("七日绝限")]),t("el-radio",{attrs:{label:"三日绝限"}},[e._v("三日绝限")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"处理状态"}},[t("el-radio-group",{model:{value:e.searchForm.processStatus,callback:function(t){e.$set(e.searchForm,"processStatus",t)},expression:"searchForm.processStatus"}},[t("el-radio",{attrs:{label:"撰写中"}},[e._v("撰写中")]),t("el-radio",{attrs:{label:"暂停"}},[e._v("暂停")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"处理事项"}},[t("el-radio-group",{model:{value:e.searchForm.processItems,callback:function(t){e.$set(e.searchForm,"processItems",t)},expression:"searchForm.processItems"}},[t("el-radio",{attrs:{label:"新申请"}},[e._v("新申请")]),t("el-radio",{attrs:{label:"处理审查意见"}},[e._v("处理审查意见")]),t("el-radio",{attrs:{label:"补正"}},[e._v("补正")]),t("el-radio",{attrs:{label:"提供使用证据"}},[e._v("提供使用证据")])],1)],1)],1)],1)],1),t("div",{staticClass:"part-search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAddProcessNote}},[e._v("添加处理备注")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleModifyEstimatedTime}},[e._v("修改预计完成时间")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAddComplete}},[e._v("添加完成")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleStartDraft}},[e._v("启动递交")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleStartSupplement}},[e._v("启动核稿")])],1)],1),t("div",{staticClass:"body-part-content"},[t("div",{staticClass:"part-table-header"},[t("div",{staticClass:"part-table-title"},[t("span",[e._v("待处理（"+e._s(e.searchForm.caseTypes)+"）")])])]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small",border:""}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"}}),e._l(e.currentColumns,(function(e){return[t("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth}})]})),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDetail(s.row)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleProcess(s.row)}}},[e._v("处理")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleTransfer(s.row)}}},[e._v("移交")])]}}])})],2),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"修改预计完成时间",visible:e.modifyTimeDialogVisible,width:"500px","before-close":e.handleModifyTimeClose},on:{"update:visible":function(t){e.modifyTimeDialogVisible=t}}},[t("el-form",{attrs:{model:e.modifyTimeForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"项目号"}},[t("el-input",{attrs:{disabled:""},model:{value:e.modifyTimeForm.projectNo,callback:function(t){e.$set(e.modifyTimeForm,"projectNo",t)},expression:"modifyTimeForm.projectNo"}})],1),t("el-form-item",{attrs:{label:"处理事项"}},[t("el-input",{attrs:{disabled:""},model:{value:e.modifyTimeForm.processItem,callback:function(t){e.$set(e.modifyTimeForm,"processItem",t)},expression:"modifyTimeForm.processItem"}})],1),t("el-form-item",{attrs:{label:"选择日期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"年/月/日","value-format":"yyyy-MM-dd"},model:{value:e.modifyTimeForm.selectedDate,callback:function(t){e.$set(e.modifyTimeForm,"selectedDate",t)},expression:"modifyTimeForm.selectedDate"}})],1),t("el-form-item",{attrs:{label:"添加备注"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"多行输入"},model:{value:e.modifyTimeForm.remark,callback:function(t){e.$set(e.modifyTimeForm,"remark",t)},expression:"modifyTimeForm.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleModifyTimeClose}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleModifyTimeConfirm}},[e._v("确认")])],1)],1),t("el-dialog",{attrs:{title:"添加完成",visible:e.addCompleteDialogVisible,width:"500px","before-close":e.handleAddCompleteClose},on:{"update:visible":function(t){e.addCompleteDialogVisible=t}}},[t("el-form",{attrs:{model:e.addCompleteForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"项目号"}},[t("el-input",{attrs:{disabled:""},model:{value:e.addCompleteForm.projectNo,callback:function(t){e.$set(e.addCompleteForm,"projectNo",t)},expression:"addCompleteForm.projectNo"}})],1),t("el-form-item",{attrs:{label:"处理事项"}},[t("el-input",{attrs:{disabled:""},model:{value:e.addCompleteForm.processItem,callback:function(t){e.$set(e.addCompleteForm,"processItem",t)},expression:"addCompleteForm.processItem"}})],1),t("el-form-item",{attrs:{label:"选择日期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"年/月/日","value-format":"yyyy-MM-dd"},model:{value:e.addCompleteForm.selectedDate,callback:function(t){e.$set(e.addCompleteForm,"selectedDate",t)},expression:"addCompleteForm.selectedDate"}})],1),t("el-form-item",{attrs:{label:"处理状态"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"下拉菜单 单选 专利17里的"},model:{value:e.addCompleteForm.processStatus,callback:function(t){e.$set(e.addCompleteForm,"processStatus",t)},expression:"addCompleteForm.processStatus"}},[t("el-option",{attrs:{label:"专利17里的",value:"patent_17th"}}),t("el-option",{attrs:{label:"专利18里的",value:"patent_18th"}}),t("el-option",{attrs:{label:"专利19里的",value:"patent_19th"}}),t("el-option",{attrs:{label:"已完成",value:"completed"}}),t("el-option",{attrs:{label:"进行中",value:"in_progress"}})],1)],1),t("el-form-item",{attrs:{label:"添加备注"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"多行输入"},model:{value:e.addCompleteForm.remark,callback:function(t){e.$set(e.addCompleteForm,"remark",t)},expression:"addCompleteForm.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleAddCompleteClose}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAddCompleteConfirm}},[e._v("确认")])],1)],1),t("el-dialog",{attrs:{title:"添加处理事项注",visible:e.addProcessNoteDialogVisible,width:"600px","before-close":e.handleAddProcessNoteClose},on:{"update:visible":function(t){e.addProcessNoteDialogVisible=t}}},[e.selectedRowsForNote.length>1?t("div",{staticClass:"batch-info"},[t("p",[e._v("批量添加备注（共"+e._s(e.selectedRowsForNote.length)+"个项目）")])]):e._e(),t("el-form",{attrs:{model:e.addProcessNoteForm,"label-width":"100px"}},[1===e.selectedRowsForNote.length?t("el-form-item",{attrs:{label:"项目号"}},[t("el-input",{attrs:{disabled:""},model:{value:e.addProcessNoteForm.projectNo,callback:function(t){e.$set(e.addProcessNoteForm,"projectNo",t)},expression:"addProcessNoteForm.projectNo"}})],1):e._e(),1===e.selectedRowsForNote.length?t("el-form-item",{attrs:{label:"处理事项"}},[t("el-input",{attrs:{disabled:""},model:{value:e.addProcessNoteForm.processItem,callback:function(t){e.$set(e.addProcessNoteForm,"processItem",t)},expression:"addProcessNoteForm.processItem"}})],1):e._e(),e.selectedRowsForNote.length>1?t("el-form-item",{attrs:{label:"选中项目"}},[t("div",{staticClass:"selected-cases"},e._l(e.selectedRowsForNote,(function(s){return t("div",{key:s.id,staticClass:"case-item"},[t("span",[e._v(e._s(s.ourRefNumber)+" - "+e._s(s.processItem))])])})),0)]):e._e(),t("el-form-item",{attrs:{label:"添加备注"}},[t("el-input",{attrs:{type:"textarea",rows:6,placeholder:"多行输入"},model:{value:e.addProcessNoteForm.remark,callback:function(t){e.$set(e.addProcessNoteForm,"remark",t)},expression:"addProcessNoteForm.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleAddProcessNoteClose}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAddProcessNoteConfirm}},[e._v("确认")])],1)],1),t("el-dialog",{attrs:{title:"修改预计完成时间",visible:e.modifyEstimatedTimeDialogVisible,width:"500px","before-close":e.handleModifyEstimatedTimeClose},on:{"update:visible":function(t){e.modifyEstimatedTimeDialogVisible=t}}},[e.selectedRowsForTime.length>1?t("div",{staticClass:"batch-info"},[t("p",[e._v("批量修改预计完成时间（共"+e._s(e.selectedRowsForTime.length)+"个项目）")])]):e._e(),t("el-form",{attrs:{model:e.modifyEstimatedTimeForm,"label-width":"120px"}},[1===e.selectedRowsForTime.length?t("el-form-item",{attrs:{label:"项目号"}},[t("el-input",{attrs:{disabled:""},model:{value:e.modifyEstimatedTimeForm.projectNo,callback:function(t){e.$set(e.modifyEstimatedTimeForm,"projectNo",t)},expression:"modifyEstimatedTimeForm.projectNo"}})],1):e._e(),t("el-form-item",{attrs:{label:"预计完成时间",prop:"estimatedTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择预计完成时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.modifyEstimatedTimeForm.estimatedTime,callback:function(t){e.$set(e.modifyEstimatedTimeForm,"estimatedTime",t)},expression:"modifyEstimatedTimeForm.estimatedTime"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入备注（可选）"},model:{value:e.modifyEstimatedTimeForm.remark,callback:function(t){e.$set(e.modifyEstimatedTimeForm,"remark",t)},expression:"modifyEstimatedTimeForm.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleModifyEstimatedTimeClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleModifyEstimatedTimeConfirm}},[e._v("确定")])],1)],1)],1)},o=[],i=(s("14d9"),s("e9f5"),s("910d"),s("7d54"),s("ab43"),s("a732"),{name:"PendingCase",data(){return{loading:!1,searchForm:{caseTypes:"专利",internalDeadlines:[],officialDeadlines:[],processStatus:[],processItems:[]},tableData:[],currentPage:1,pageSize:10,total:0,modifyTimeDialogVisible:!1,addCompleteDialogVisible:!1,addProcessNoteDialogVisible:!1,modifyEstimatedTimeDialogVisible:!1,modifyTimeForm:{projectNo:"",processItem:"",selectedDate:"",remark:""},addCompleteForm:{projectNo:"",processItem:"",selectedDate:"",processStatus:"",remark:""},addProcessNoteForm:{projectNo:"",processItem:"",remark:""},currentRowData:null,selectedRowsForNote:[],selectedRowsForTime:[],modifyEstimatedTimeForm:{projectNo:"",estimatedTime:"",remark:""},columnConfigs:{"专利":[{prop:"ourRefNumber",label:"项目编号",width:120},{prop:"caseName",label:"项目名称",minWidth:150},{prop:"applicationNo",label:"申请号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称",minWidth:150},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:150},{prop:"processStatus",label:"处理状态",width:100},{prop:"officialDate",label:"官方发文日",width:120},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignmentDate",label:"配案日",width:120},{prop:"estimatedCompleteDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"caseCoefficient",label:"案件系数",width:100},{prop:"processCoefficient",label:"处理系数",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:150},{prop:"caseRemark",label:"项目备注",minWidth:150}],"商标":[{prop:"ourRefNumber",label:"项目编号",width:120},{prop:"caseName",label:"项目名称",minWidth:150},{prop:"registrationNo",label:"注册号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称",minWidth:150},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:150},{prop:"processStatus",label:"处理状态",width:100},{prop:"receiveDate",label:"收文日期",width:120},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignmentDate",label:"配案日",width:120},{prop:"estimatedCompleteDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"category",label:"类别",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:150},{prop:"caseRemark",label:"项目备注",minWidth:150}],"版权":[{prop:"ourRefNumber",label:"项目编号",width:120},{prop:"caseName",label:"项目名称",minWidth:150},{prop:"registrationNo",label:"登记号",width:120},{prop:"applicationType",label:"申请类型",width:100},{prop:"customerName",label:"客户名称",minWidth:150},{prop:"technicalManager",label:"技术主导",width:100},{prop:"processItem",label:"处理事项",minWidth:150},{prop:"processStatus",label:"处理状态",width:100},{prop:"officialDate",label:"官方发文日",width:120},{prop:"officialDeadline",label:"官方期限",width:120},{prop:"internalDeadline",label:"内部期限",width:120},{prop:"assignmentDate",label:"配案日",width:120},{prop:"estimatedCompleteDate",label:"预计完成日",width:120},{prop:"businessPerson",label:"业务人员",width:100},{prop:"processRemark",label:"处理事项备注",minWidth:150},{prop:"caseRemark",label:"项目备注",minWidth:150}]},notificationItems:["通知书送达","缴费通知","答复通知书","补正通知书","审查意见通知书","授权通知书","驳回通知书"],officialItems:["新申请","答复审查意见","补正","缴费","提交使用证据","申请复审","申请无效"]}},computed:{currentColumns(){return this.columnConfigs[this.searchForm.caseTypes]||[]}},created(){this.fetchData()},methods:{handleCaseTypeChange(e){this.fetchData()},getStatusType(e){const t={"准备中":"info","已申请":"primary","已受理":"warning","实审中":"warning","已授权":"success","已驳回":"danger"};return t[e]||"info"},async fetchData(){this.loading=!0;try{const e=await this.$api.personalCase.getPending({page:this.currentPage,limit:this.pageSize,case_type:this.searchForm.caseTypes,internal_deadline:this.searchForm.internalDeadlines,official_deadline:this.searchForm.officialDeadlines,process_status:this.searchForm.processStatus,process_items:this.searchForm.processItems});e.data.success?(this.tableData=e.data.data.list||[],this.total=e.data.data.total||0):this.$message.error(e.data.message||"获取数据失败")}catch(e){console.error("获取待处理项目失败:",e),this.$message.error("获取数据失败，请稍后重试"),this.tableData=[],this.total=0}finally{this.loading=!1}},handleSearch(){this.currentPage=1,this.fetchData()},resetForm(){this.$refs.searchForm.resetFields(),this.searchForm.caseTypes="专利",this.searchForm.internalDeadlines=[],this.searchForm.officialDeadlines=[],this.searchForm.processStatus=[],this.searchForm.processItems=[]},handleDetail(e){const t={patent:"/case/patent/detail/",trademark:"/case/trademark/detail/",copyright:"/case/copyright/detail/",project:"/case/project/detail/"},s=t[e.type]+e.id;this.$router.push({path:s,query:{refNumber:e.ourRefNumber}})},handleProcess(e){const t={"专利":"/case/patent/detail/","商标":"/case/trademark/detail/","版权":"/case/copyright/detail/"},s=t[this.searchForm.caseTypes]+e.id;this.$router.push({path:s,query:{refNumber:e.ourRefNumber,mode:"process"}})},handleTransfer(e){this.$confirm(`确定要移交项目 "${e.ourRefNumber}" 吗？`,"移交确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{this.$message.success("项目移交成功"),this.fetchData()}catch(e){console.error("移交失败:",e),this.$message.error("移交失败，请稍后重试")}}).catch(()=>{this.$message.info("已取消移交")})},handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.currentPage=e,this.fetchData()},isNotificationItem(e){return this.notificationItems.some(t=>e.includes(t))},isOfficialItem(e){return this.officialItems.some(t=>e.includes(t))},handleModifyEstimatedTime(){const e=this.$refs.table?this.$refs.table.selection:[];if(0!==e.length){if(this.selectedRowsForTime=e,1===e.length){const t=e[0];this.modifyEstimatedTimeForm={projectNo:t.ourRefNumber,estimatedTime:t.estimatedCompleteDate,remark:""}}else this.modifyEstimatedTimeForm={projectNo:"",estimatedTime:"",remark:""};this.modifyEstimatedTimeDialogVisible=!0}else this.$message.warning("请先选择要修改的项目")},async handleModifyTimeConfirm(){if(this.modifyTimeForm.selectedDate)try{const e=await this.$api.personalCase.modifyEstimatedTime({case_ids:[this.currentRowData.id],selected_date:this.modifyTimeForm.selectedDate,remark:this.modifyTimeForm.remark});e.data.success?(this.$message.success("修改预计完成时间成功"),this.modifyTimeDialogVisible=!1,this.currentRowData&&(this.currentRowData.estimatedCompleteDate=this.modifyTimeForm.selectedDate)):this.$message.error(e.data.message||"修改失败")}catch(e){console.error("修改预计完成时间失败:",e),this.$message.error("修改失败，请稍后重试")}else this.$message.warning("请选择日期")},handleModifyTimeClose(){this.modifyTimeDialogVisible=!1,this.modifyTimeForm={projectNo:"",processItem:"",selectedDate:"",remark:""}},handleAddComplete(){const e=this.$refs.table?this.$refs.table.selection:[];if(0===e.length)return void this.$message.warning("请先选择要完成的项目");if(e.length>1)return void this.$message.warning("只能选择一个项目进行完成");const t=e[0];this.isNotificationItem(t.processItem)?(this.currentRowData=t,this.addCompleteForm={projectNo:t.ourRefNumber,processItem:t.processItem,selectedDate:"",processStatus:"patent_17th",remark:""},this.addCompleteDialogVisible=!0):this.$message.warning("只有通知类事项才能添加完成")},async handleAddCompleteConfirm(){if(this.addCompleteForm.selectedDate)if(this.addCompleteForm.processStatus)try{const e=await this.$api.personalCase.addComplete({case_ids:[this.currentRowData.id],selected_date:this.addCompleteForm.selectedDate,process_status:this.addCompleteForm.processStatus,remark:this.addCompleteForm.remark});e.data.success?(this.$message.success("添加完成成功"),this.addCompleteDialogVisible=!1,this.currentRowData&&(this.currentRowData.processStatus="已完成")):this.$message.error(e.data.message||"添加完成失败")}catch(e){console.error("添加完成失败:",e),this.$message.error("添加完成失败，请稍后重试")}else this.$message.warning("请选择处理状态");else this.$message.warning("请选择日期")},handleAddCompleteClose(){this.addCompleteDialogVisible=!1,this.addCompleteForm={projectNo:"",processItem:"",selectedDate:"",processStatus:"",remark:""}},handleAddProcessNote(){const e=this.$refs.table?this.$refs.table.selection:[];if(0!==e.length){if(this.selectedRowsForNote=e,1===e.length){const t=e[0];this.addProcessNoteForm={projectNo:t.ourRefNumber,processItem:t.processItem,remark:t.processRemark||""}}else this.addProcessNoteForm={projectNo:"",processItem:"",remark:""};this.addProcessNoteDialogVisible=!0}else this.$message.warning("请先选择要添加备注的项目")},async handleAddProcessNoteConfirm(){if(this.addProcessNoteForm.remark.trim())try{const e=this.selectedRowsForNote.map(e=>e.id),t=await this.$api.personalCase.addProcessNote({case_ids:e,remark:this.addProcessNoteForm.remark});if(t.data.success){const e=this.selectedRowsForNote.length;this.$message.success(`批量添加处理事项注成功（${e}个项目）`),this.addProcessNoteDialogVisible=!1,this.selectedRowsForNote.forEach(e=>{e.processRemark=this.addProcessNoteForm.remark})}else this.$message.error(t.data.message||"添加备注失败")}catch(e){console.error("添加处理事项备注失败:",e),this.$message.error("添加备注失败，请稍后重试")}else this.$message.warning("请输入备注内容")},handleAddProcessNoteClose(){this.addProcessNoteDialogVisible=!1,this.selectedRowsForNote=[],this.addProcessNoteForm={projectNo:"",processItem:"",remark:""}},async handleStartDraft(){const e=this.$refs.table?this.$refs.table.selection:[];if(0===e.length)return void this.$message.warning("请先选择要启动递交的项目");if("专利"!==this.searchForm.caseTypes)return void this.$message.warning("启动递交仅允许专利类项目操作");const t=e.filter(e=>!this.isOfficialItem(e.processItem));if(t.length>0){const e=t.map(e=>e.ourRefNumber).join("、");this.$message.warning("以下项目不是官方事项，不允许启动递交："+e)}else try{const t=e.map(e=>e.id),s=await this.$api.personalCase.startDraft({case_ids:t});s.data.success?(this.$message.success(`启动递交成功（${e.length}个项目）`),this.fetchData(),this.$refs.table&&this.$refs.table.clearSelection()):this.$message.error(s.data.message||"启动递交失败")}catch(s){console.error("启动递交失败:",s),this.$message.error("启动递交失败，请稍后重试")}},async handleStartSupplement(){const e=this.$refs.table?this.$refs.table.selection:[];if(0===e.length)return void this.$message.warning("请先选择要启动核稿的项目");if("专利"!==this.searchForm.caseTypes)return void this.$message.warning("启动核稿仅允许专利类项目操作");const t=e.filter(e=>!this.isOfficialItem(e.processItem));if(t.length>0){const e=t.map(e=>e.ourRefNumber).join("、");this.$message.warning("以下项目不是官方事项，不允许启动核稿："+e)}else try{const t=e.map(e=>e.id),s=await this.$api.personalCase.startSupplement({case_ids:t});s.data.success?(this.$message.success(`启动核稿成功（${e.length}个项目）`),this.fetchData(),this.$refs.table&&this.$refs.table.clearSelection()):this.$message.error(s.data.message||"启动核稿失败")}catch(s){console.error("启动核稿失败:",s),this.$message.error("启动核稿失败，请稍后重试")}},async handleModifyEstimatedTimeConfirm(){if(this.modifyEstimatedTimeForm.estimatedTime)try{const e=this.selectedRowsForTime.map(e=>e.id),t=await this.$api.personalCase.modifyEstimatedTime({case_ids:e,estimated_time:this.modifyEstimatedTimeForm.estimatedTime,remark:this.modifyEstimatedTimeForm.remark});if(t.data.success){const e=this.selectedRowsForTime.length;this.$message.success(`批量修改预计完成时间成功（${e}个项目）`),this.modifyEstimatedTimeDialogVisible=!1,this.selectedRowsForTime.forEach(e=>{e.estimatedCompleteDate=this.modifyEstimatedTimeForm.estimatedTime}),this.$refs.table&&this.$refs.table.clearSelection()}else this.$message.error(t.data.message||"修改预计完成时间失败")}catch(e){console.error("修改预计完成时间失败:",e),this.$message.error("修改预计完成时间失败，请稍后重试")}else this.$message.warning("请选择预计完成时间")},handleModifyEstimatedTimeClose(){this.modifyEstimatedTimeDialogVisible=!1,this.selectedRowsForTime=[],this.modifyEstimatedTimeForm={projectNo:"",estimatedTime:"",remark:""}}}}),r=i,l=(s("39a4"),s("2877")),m=Object(l["a"])(r,a,o,!1,null,"50aacbf4",null);t["default"]=m.exports}}]);