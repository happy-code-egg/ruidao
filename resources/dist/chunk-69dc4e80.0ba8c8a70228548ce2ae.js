(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69dc4e80"],{"0d26":function(e,t,r){"use strict";var a=r("e330"),o=Error,n=a("".replace),i=function(e){return String(new o(e).stack)}("zxcasd"),l=/\n\s*at [^:]*:[^\n]*/,s=l.test(i);e.exports=function(e,t){if(s&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=n(e,l,"");return e}},1787:function(e,t,r){"use strict";var a=r("861d");e.exports=function(e){return a(e)||null===e}},2509:function(e,t,r){"use strict";r("85f8")},"2ba4":function(e,t,r){"use strict";var a=r("40d5"),o=Function.prototype,n=o.apply,i=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?i.bind(n):function(){return i.apply(n,arguments)})},"3bbe":function(e,t,r){"use strict";var a=r("1787"),o=String,n=TypeError;e.exports=function(e){if(a(e))return e;throw new n("Can't set "+o(e)+" as a prototype")}},"3df1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payment-request-pending-container"},[t("div",{staticClass:"body-part-search"},[t("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"请款单号",prop:"requestNo"}},[t("el-input",{attrs:{placeholder:"请款单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.requestNo,callback:function(t){e.$set(e.searchForm,"requestNo",t)},expression:"searchForm.requestNo"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-input",{attrs:{placeholder:"客户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.customerName,callback:function(t){e.$set(e.searchForm,"customerName",t)},expression:"searchForm.customerName"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"申请人",prop:"creator"}},[t("el-input",{attrs:{placeholder:"申请人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.creator,callback:function(t){e.$set(e.searchForm,"creator",t)},expression:"searchForm.creator"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"申请时间",prop:"createTimeRange"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.searchForm.createTimeRange,callback:function(t){e.$set(e.searchForm,"createTimeRange",t)},expression:"searchForm.createTimeRange"}})],1)],1)],1)],1),t("div",{staticClass:"part-search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),t("div",{staticClass:"body-part-content"},[t("div",{staticClass:"part-table-header"},[t("div",{staticClass:"part-table-title"},[e._v("待审核请款单")]),t("div",{staticClass:"part-table-operations"},[t("el-button",{attrs:{size:"small",type:"success",disabled:0===e.selectedRows.length},on:{click:e.handleBatchApprove}},[e._v("批量审核通过")]),t("el-button",{attrs:{size:"small",type:"warning",disabled:0===e.selectedRows.length},on:{click:e.handleBatchReject}},[e._v("批量退回")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"requestNo",label:"请款单号",width:"140","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"contractNo",label:"合同号",width:"140","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"totalAmount",label:"请款金额",width:"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticClass:"amount-text"},[e._v("¥"+e._s(r.row.totalAmount))])]}}])}),t("el-table-column",{attrs:{prop:"officialFee",label:"官费",width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v("¥"+e._s(r.row.officialFee))])]}}])}),t("el-table-column",{attrs:{prop:"serviceFee",label:"服务费",width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v("¥"+e._s(r.row.serviceFee))])]}}])}),t("el-table-column",{attrs:{prop:"creator",label:"申请人",width:"100"}}),t("el-table-column",{attrs:{prop:"createTime",label:"申请时间",width:"150"}}),t("el-table-column",{attrs:{prop:"urgentLevel",label:"紧急程度",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{type:e.getUrgentType(r.row.urgentLevel),size:"small"}},[e._v(" "+e._s(e.getUrgentText(r.row.urgentLevel))+" ")])]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleView(r.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleApprove(r.row)}}},[e._v("审核通过")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleReject(r.row)}}},[e._v("退回")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.approveDialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.approveDialogVisible=t}}},[t("el-form",{ref:"approveForm",attrs:{model:e.approveForm,rules:e.approveRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"审核结果",prop:"result"}},[t("el-radio-group",{model:{value:e.approveForm.result,callback:function(t){e.$set(e.approveForm,"result",t)},expression:"approveForm.result"}},[t("el-radio",{attrs:{label:"approve"}},[e._v("审核通过")]),t("el-radio",{attrs:{label:"reject"}},[e._v("退回修改")])],1)],1),t("el-form-item",{attrs:{label:"审核意见",prop:"comment"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审核意见（退回时必填）"},model:{value:e.approveForm.comment,callback:function(t){e.$set(e.approveForm,"comment",t)},expression:"approveForm.comment"}})],1),"approve"===e.approveForm.result?t("el-form-item",{attrs:{label:"调整金额",prop:"adjustedAmount"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"如需调整金额请输入"},model:{value:e.approveForm.adjustedAmount,callback:function(t){e.$set(e.approveForm,"adjustedAmount",t)},expression:"approveForm.adjustedAmount"}},[t("template",{slot:"prepend"},[e._v("¥")])],2),t("span",{staticStyle:{color:"#999","margin-left":"10px"}},[e._v("不填写则按原金额审核")])],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.approveDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleConfirmApprove}},[e._v("确认")])],1)],1),t("el-dialog",{attrs:{title:"请款单详情",visible:e.viewDialogVisible,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[t("div",{staticClass:"request-detail"},[t("div",{staticClass:"detail-section"},[t("h4",[e._v("基础信息")]),t("el-descriptions",{attrs:{column:3,border:""}},[t("el-descriptions-item",{attrs:{label:"请款单号"}},[e._v(e._s(e.viewData.requestNo))]),t("el-descriptions-item",{attrs:{label:"客户名称"}},[e._v(e._s(e.viewData.customerName))]),t("el-descriptions-item",{attrs:{label:"合同号"}},[e._v(e._s(e.viewData.contractNo))]),t("el-descriptions-item",{attrs:{label:"请款金额"}},[e._v("¥"+e._s(e.viewData.totalAmount))]),t("el-descriptions-item",{attrs:{label:"官费"}},[e._v("¥"+e._s(e.viewData.officialFee))]),t("el-descriptions-item",{attrs:{label:"服务费"}},[e._v("¥"+e._s(e.viewData.serviceFee))]),t("el-descriptions-item",{attrs:{label:"申请人"}},[e._v(e._s(e.viewData.creator))]),t("el-descriptions-item",{attrs:{label:"申请时间"}},[e._v(e._s(e.viewData.createTime))]),t("el-descriptions-item",{attrs:{label:"紧急程度"}},[t("el-tag",{attrs:{type:e.getUrgentType(e.viewData.urgentLevel),size:"small"}},[e._v(" "+e._s(e.getUrgentText(e.viewData.urgentLevel))+" ")])],1)],1)],1),t("div",{staticClass:"detail-section"},[t("h4",[e._v("请款明细")]),t("el-table",{attrs:{data:e.viewData.items,border:"",size:"small"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"caseNo",label:"项目编号",width:"120"}}),t("el-table-column",{attrs:{prop:"caseName",label:"项目名称"}}),t("el-table-column",{attrs:{prop:"feeType",label:"费用类型",width:"100"}}),t("el-table-column",{attrs:{prop:"amount",label:"金额",width:"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ¥"+e._s(t.row.amount)+" ")]}}])}),t("el-table-column",{attrs:{prop:"dueDate",label:"交费期限",width:"120"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"120"}})],1)],1),t("div",{staticClass:"detail-section"},[t("h4",[e._v("备注信息")]),t("p",[e._v(e._s(e.viewData.remark||"无"))])])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.viewDialogVisible=!1}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleApproveFromDetail}},[e._v("审核")])],1)])],1)},o=[],n=(r("d9e2"),r("e9f5"),r("ab43"),{name:"PaymentRequestPending",data(){return{loading:!1,submitting:!1,searchForm:{requestNo:"",customerName:"",creator:"",createTimeRange:[]},tableData:[],selectedRows:[],currentPage:1,pageSize:10,total:0,approveDialogVisible:!1,dialogTitle:"审核请款单",approveForm:{result:"approve",comment:"",adjustedAmount:""},approveRules:{result:[{required:!0,message:"请选择审核结果",trigger:"change"}],comment:[{validator:(e,t,r)=>{"reject"!==this.approveForm.result||t?r():r(new Error("退回时必须填写审核意见"))},trigger:"blur"}]},currentApproveRow:null,viewDialogVisible:!1,viewData:{}}},created(){this.getList()},methods:{getList(){this.loading=!0,setTimeout(()=>{this.tableData=Array.from({length:15}).map((e,t)=>({id:t+1,requestNo:"QK"+String(Date.now()+t).slice(-8),customerName:"客户公司"+(t+1),contractNo:"HT"+String(1e4+t).padStart(6,"0"),totalAmount:(5e3+2e4*Math.random()).toFixed(2),officialFee:(1e3+3e3*Math.random()).toFixed(2),serviceFee:(2e3+8e3*Math.random()).toFixed(2),creator:"申请人"+(t+1),createTime:new Date(Date.now()-7*Math.random()*24*60*60*1e3).toLocaleString(),urgentLevel:["normal","urgent","emergency"][Math.floor(3*Math.random())],remark:t%3===0?"请款备注信息"+(t+1):"",items:[{caseNo:"AN"+String(3e4+t).padStart(6,"0"),caseName:"专利申请项目"+(t+1),feeType:"申请费",amount:(1e3+2e3*Math.random()).toFixed(2),dueDate:"2024-06-30",remark:"申请费备注"},{caseNo:"AN"+String(30001+t).padStart(6,"0"),caseName:"商标注册项目"+(t+1),feeType:"服务费",amount:(2e3+3e3*Math.random()).toFixed(2),dueDate:"2024-07-15",remark:"服务费备注"}]})),this.total=this.tableData.length,this.loading=!1},500)},handleSearch(){this.currentPage=1,this.getList()},handleReset(){this.searchForm={requestNo:"",customerName:"",creator:"",createTimeRange:[]},this.getList()},handleSelectionChange(e){this.selectedRows=e},handleSizeChange(e){this.pageSize=e,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()},getUrgentType(e){const t={normal:"",urgent:"warning",emergency:"danger"};return t[e]||""},getUrgentText(e){const t={normal:"普通",urgent:"紧急",emergency:"特急"};return t[e]||e},handleView(e){this.viewData={...e},this.viewDialogVisible=!0},handleApprove(e){this.currentApproveRow=e,this.dialogTitle="审核请款单 - "+e.requestNo,this.approveForm={result:"approve",comment:"",adjustedAmount:""},this.approveDialogVisible=!0},handleReject(e){this.currentApproveRow=e,this.dialogTitle="审核请款单 - "+e.requestNo,this.approveForm={result:"reject",comment:"",adjustedAmount:""},this.approveDialogVisible=!0},handleApproveFromDetail(){this.viewDialogVisible=!1,this.handleApprove(this.viewData)},handleConfirmApprove(){this.$refs.approveForm.validate(e=>{e&&(this.submitting=!0,setTimeout(()=>{const e="approve"===this.approveForm.result?"审核通过":"退回修改";this.$message.success(e+"成功"),this.approveDialogVisible=!1,this.submitting=!1,this.getList()},1e3))})},handleBatchApprove(){this.$confirm(`确认批量审核通过选中的 ${this.selectedRows.length} 条请款单吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,setTimeout(()=>{this.$message.success("批量审核通过成功"),this.loading=!1,this.getList()},1e3)})},handleBatchReject(){this.$prompt("请输入退回原因","批量退回",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"退回原因不能为空"}).then(({value:e})=>{this.loading=!0,setTimeout(()=>{this.$message.success("批量退回成功"),this.loading=!1,this.getList()},1e3)})}}}),i=n,l=(r("2509"),r("2877")),s=Object(l["a"])(i,a,o,!1,null,"030be671",null);t["default"]=s.exports},"6f19":function(e,t,r){"use strict";var a=r("9112"),o=r("0d26"),n=r("b980"),i=Error.captureStackTrace;e.exports=function(e,t,r,l){n&&(i?i(e,t):a(e,"stack",o(r,l)))}},7156:function(e,t,r){"use strict";var a=r("1626"),o=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var i,l;return n&&a(i=t.constructor)&&i!==r&&o(l=i.prototype)&&l!==r.prototype&&n(e,l),e}},7282:function(e,t,r){"use strict";var a=r("e330"),o=r("59ed");e.exports=function(e,t,r){try{return a(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}},"85f8":function(e,t,r){},ab36:function(e,t,r){"use strict";var a=r("861d"),o=r("9112");e.exports=function(e,t){a(t)&&"cause"in t&&o(e,"cause",t.cause)}},aeb0:function(e,t,r){"use strict";var a=r("9bf2").f;e.exports=function(e,t,r){r in e||a(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},b980:function(e,t,r){"use strict";var a=r("d039"),o=r("5c6c");e.exports=!a((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},d2bb:function(e,t,r){"use strict";var a=r("7282"),o=r("861d"),n=r("1d80"),i=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=a(Object.prototype,"__proto__","set"),e(r,[]),t=r instanceof Array}catch(l){}return function(r,a){return n(r),i(a),o(r)?(t?e(r,a):r.__proto__=a,r):r}}():void 0)},d9e2:function(e,t,r){"use strict";var a=r("23e7"),o=r("cfe9"),n=r("2ba4"),i=r("e5cb"),l="WebAssembly",s=o[l],c=7!==new Error("e",{cause:7}).cause,u=function(e,t){var r={};r[e]=i(e,t,c),a({global:!0,constructor:!0,arity:1,forced:c},r)},p=function(e,t){if(s&&s[e]){var r={};r[e]=i(l+"."+e,t,c),a({target:l,stat:!0,constructor:!0,arity:1,forced:c},r)}};u("Error",(function(e){return function(t){return n(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return n(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return n(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return n(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return n(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return n(e,this,arguments)}})),u("URIError",(function(e){return function(t){return n(e,this,arguments)}})),p("CompileError",(function(e){return function(t){return n(e,this,arguments)}})),p("LinkError",(function(e){return function(t){return n(e,this,arguments)}})),p("RuntimeError",(function(e){return function(t){return n(e,this,arguments)}}))},e391:function(e,t,r){"use strict";var a=r("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:a(e)}},e5cb:function(e,t,r){"use strict";var a=r("d066"),o=r("1a2d"),n=r("9112"),i=r("3a9b"),l=r("d2bb"),s=r("e893"),c=r("aeb0"),u=r("7156"),p=r("e391"),d=r("ab36"),m=r("6f19"),h=r("83ab"),v=r("c430");e.exports=function(e,t,r,f){var b="stackTraceLimit",g=f?2:1,w=e.split("."),y=w[w.length-1],_=a.apply(null,w);if(_){var k=_.prototype;if(!v&&o(k,"cause")&&delete k.cause,!r)return _;var x=a("Error"),F=t((function(e,t){var r=p(f?t:e,void 0),a=f?new _(e):new _;return void 0!==r&&n(a,"message",r),m(a,F,a.stack,2),this&&i(k,this)&&u(a,this,F),arguments.length>g&&d(a,arguments[g]),a}));if(F.prototype=k,"Error"!==y?l?l(F,x):s(F,x,{name:!0}):h&&b in _&&(c(F,_,b),c(F,_,"prepareStackTrace")),s(F,_),!v)try{k.name!==y&&n(k,"name",y),k.constructor=F}catch(D){}return F}}}}]);