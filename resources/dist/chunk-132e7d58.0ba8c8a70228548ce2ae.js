(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-132e7d58"],{"1cd4":function(e,t,a){"use strict";a("4739")},4739:function(e,t,a){},8488:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"public-customer-container"},[t("div",{staticClass:"body-part-search"},[t("div",{staticClass:"filter-form"},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,"label-width":"100px"}},[t("div",{staticClass:"default-filters"},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"客户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"信用代码",prop:"creditCode"}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"信用代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.creditCode,callback:function(t){e.$set(e.queryParams,"creditCode",t)},expression:"queryParams.creditCode"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户等级",prop:"level"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"客户等级",clearable:"",size:"small"},model:{value:e.queryParams.level,callback:function(t){e.$set(e.queryParams,"level",t)},expression:"queryParams.level"}},e._l(e.levelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户规模",prop:"customerScale"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"客户规模",clearable:"",size:"small"},model:{value:e.queryParams.customerScale,callback:function(t){e.$set(e.queryParams,"customerScale",t)},expression:"queryParams.customerScale"}},e._l(e.customerScaleOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"合同数量",prop:"contractCount"}},[t("el-input",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:e.queryParams.contractCount1,callback:function(t){e.$set(e.queryParams,"contractCount1",t)},expression:"queryParams.contractCount1"}}),e._v(" 到 "),t("el-input",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:e.queryParams.contractCount2,callback:function(t){e.$set(e.queryParams,"contractCount2",t)},expression:"queryParams.contractCount2"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"最新合同日期",prop:"latestContractDate"}},[t("el-date-picker",{staticClass:"filter-item date-range",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"业务人员",prop:"businessPerson"}},[t("SelectPerson",{staticClass:"filter-item",attrs:{placeholder:"业务人员",multiple:"",clearable:"",size:"small"},model:{value:e.queryParams.businessPerson,callback:function(t){e.$set(e.queryParams,"businessPerson",t)},expression:"queryParams.businessPerson"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"公司负责人",prop:"companyManager"}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"公司负责人",clearable:"",size:"small"},model:{value:e.queryParams.companyManager,callback:function(t){e.$set(e.queryParams,"companyManager",t)},expression:"queryParams.companyManager"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"创建人",prop:"creator"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"创建人",clearable:"",size:"small"},model:{value:e.queryParams.creator,callback:function(t){e.$set(e.queryParams,"creator",t)},expression:"queryParams.creator"}},e._l(e.userOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"创建日期",prop:"createDate"}},[t("el-date-picker",{staticClass:"filter-item date-range",attrs:{type:"daterange","range-separator":"至","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"small"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"省",prop:"province"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"省",clearable:"",size:"small"},model:{value:e.queryParams.province,callback:function(t){e.$set(e.queryParams,"province",t)},expression:"queryParams.province"}},e._l(e.provinceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"市",prop:"city"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"市",clearable:"",size:"small"},model:{value:e.queryParams.city,callback:function(t){e.$set(e.queryParams,"city",t)},expression:"queryParams.city"}},e._l(e.cityOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"区",prop:"district"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"区",clearable:"",size:"small"},model:{value:e.queryParams.district,callback:function(t){e.$set(e.queryParams,"district",t)},expression:"queryParams.district"}},e._l(e.districtOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"产业园区",prop:"industrialPark"}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"产业园区",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.industrialPark,callback:function(t){e.$set(e.queryParams,"industrialPark",t)},expression:"queryParams.industrialPark"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"创新指数",prop:"innovationIndex"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"创新指数",clearable:"",size:"small"},model:{value:e.queryParams.innovationIndex,callback:function(t){e.$set(e.queryParams,"innovationIndex",t)},expression:"queryParams.innovationIndex"}},[t("el-option",{attrs:{label:"高",value:"1"}}),t("el-option",{attrs:{label:"中",value:"2"}}),t("el-option",{attrs:{label:"低",value:"3"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"价格指数",prop:"priceIndex"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"价格指数",clearable:"",size:"small"},model:{value:e.queryParams.priceIndex,callback:function(t){e.$set(e.queryParams,"priceIndex",t)},expression:"queryParams.priceIndex"}},[t("el-option",{attrs:{label:"高",value:"1"}}),t("el-option",{attrs:{label:"中",value:"2"}}),t("el-option",{attrs:{label:"低",value:"3"}})],1)],1)],1)],1)],1)]),t("div",{staticClass:"part-search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("搜索")]),t("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)]),t("div",{staticClass:"table-container"},[t("div",{staticClass:"table-header"},[e._m(0),t("div",{staticClass:"table-operations"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("新增客户")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleReceive}},[e._v("领取客户")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleExport}},[e._v("导出")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.customerList,border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),t("el-table-column",{attrs:{label:"客户名称",align:"center",prop:"name","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{staticClass:"customer-link",attrs:{to:"/customer/detail/"+a.row.id}},[e._v(" "+e._s(a.row.name)+" ")])]}}])}),t("el-table-column",{attrs:{label:"联系人",align:"center",prop:"contactName","min-width":"100"}}),t("el-table-column",{attrs:{label:"联系电话",align:"center",prop:"contactPhone","min-width":"120"}}),t("el-table-column",{attrs:{label:"所属行业",align:"center",prop:"industry","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getIndustryLabel(t.row.industry))+" ")]}}])}),t("el-table-column",{attrs:{label:"客户等级",align:"center",prop:"level","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getLevelTagType(a.row.level)}},[e._v(e._s(e.getLevelLabel(a.row.level)))])]}}])}),t("el-table-column",{attrs:{label:"进入公海时间",align:"center",prop:"publicTime"}}),t("el-table-column",{attrs:{label:"进入公海原因",align:"center",prop:"publicReason","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"公海池",align:"center",prop:"publicPool","min-width":"120"}}),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-share"},on:{click:function(t){return e.handleReceiveSingle(a.row)}}},[e._v("领取")]),t("el-dropdown",{attrs:{size:"mini"}},[t("span",{staticClass:"el-dropdown-link"},[e._v(" 更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleFollowup(a.row)}}},[e._v("添加跟进")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])],1)],1)]}}])})],1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100]},on:{"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"领取客户",visible:e.receiveOpen,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.receiveOpen=t}}},[e.ids.length>0?t("div",[t("div",{staticClass:"receive-info"},[t("p",[e._v("您选择了 "),t("span",{staticClass:"highlight"},[e._v(e._s(e.ids.length))]),e._v(" 个客户进行领取")]),t("p",[e._v("领取后，这些客户将成为您的专属客户")])]),t("div",{staticClass:"receive-note"},[t("p",[e._v("请输入领取理由：")]),t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入领取理由"},model:{value:e.receiveForm.reason,callback:function(t){e.$set(e.receiveForm,"reason",t)},expression:"receiveForm.reason"}})],1)]):t("div",{staticClass:"no-selection"},[e._v(" 请先选择要领取的客户 ")]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.receiveOpen=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary",disabled:0===e.ids.length},on:{click:e.submitReceive}},[e._v("确 定")])],1)])],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-title"},[t("span",[e._v("公海客户列表")])])}],s=(a("14d9"),a("e9f5"),a("910d"),a("f665"),a("ab43"),{name:"PublicCustomer",data(){return{loading:!1,ids:[],single:!0,multiple:!0,total:0,customerList:[],receiveOpen:!1,dateRange:[],queryParams:{pageNum:1,pageSize:10,name:void 0,industry:void 0,level:void 0,source:void 0,publicPool:void 0},receiveForm:{customerIds:[],reason:void 0},industryOptions:[{value:"IT",label:"信息技术"},{value:"金融",label:"金融行业"},{value:"教育",label:"教育行业"},{value:"医疗",label:"医疗行业"},{value:"制造",label:"制造业"},{value:"零售",label:"零售业"},{value:"其他",label:"其他行业"}],levelOptions:[{value:"A",label:"A级",type:"danger"},{value:"B",label:"B级",type:"warning"},{value:"C",label:"C级",type:"success"},{value:"D",label:"D级",type:"info"}],sourceOptions:[{value:"0",label:"网络推广"},{value:"1",label:"电话营销"},{value:"2",label:"老客户推荐"},{value:"3",label:"合作伙伴"},{value:"4",label:"社交媒体"},{value:"5",label:"其他来源"}],publicPoolOptions:[{value:"1",label:"普通公海池"},{value:"2",label:"高价值公海池"},{value:"3",label:"长期搁置公海池"}]}},created(){this.getList()},methods:{getList(){this.loading=!0,setTimeout(()=>{const e=[],t=["长期无跟进","客户转移超时未确认","手动移入公海","客户价值变更","业务调整"],a=["普通公海池","高价值公海池","长期搁置公海池"];for(let o=1;o<=40;o++){const l=Math.random(),r=l>.75?"A":l>.5?"B":l>.25?"C":"D",s=this.industryOptions[Math.floor(l*this.industryOptions.length)].value,i=Math.floor(6*l).toString(),n=Math.floor(Math.random()*t.length),c=Math.floor(Math.random()*a.length);e.push({id:o,name:"公海客户"+o,contactName:"联系人"+o,contactPhone:"1381234"+(1e4+o).toString().substring(1),industry:s,level:r,source:i,publicTime:this.getRandomDate(),publicReason:t[n],publicPool:a[c]})}let l=e;if(this.queryParams.name&&(l=l.filter(e=>e.name.includes(this.queryParams.name))),this.queryParams.industry&&(l=l.filter(e=>e.industry===this.queryParams.industry)),this.queryParams.level&&(l=l.filter(e=>e.level===this.queryParams.level)),this.queryParams.source&&(l=l.filter(e=>e.source===this.queryParams.source)),this.queryParams.publicPool){var r;const e=null===(r=this.publicPoolOptions.find(e=>e.value===this.queryParams.publicPool))||void 0===r?void 0:r.label;l=l.filter(t=>t.publicPool===e)}const s=l.length,i=(this.queryParams.pageNum-1)*this.queryParams.pageSize,n=i+this.queryParams.pageSize;l=l.slice(i,n),this.customerList=l,this.total=s,this.loading=!1},300)},getRandomDate(){const e=new Date,t=e.getFullYear(),a=e.getMonth(),l=e.getDate(),r=Math.floor(90*Math.random())+1,s=new Date(t,a,l-r);return s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")+" "+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0")},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.dateRange=[],this.queryParams={pageNum:1,pageSize:10,name:void 0,industry:void 0,level:void 0,source:void 0,publicPool:void 0},this.handleQuery()},handleSelectionChange(e){this.ids=e.map(e=>e.id),this.single=1!==e.length,this.multiple=!e.length},handleAdd(){this.$router.push("/customer/add")},handleUpdate(e){this.$router.push("/customer/edit/"+e.id)},handleFollowup(e){this.$router.push(`/customer/followup/${e.id}?name=${encodeURIComponent(e.name)}`)},handleDelete(e){const t=e.id||this.ids;!t||Array.isArray(t)&&0===t.length?this.$message.warning("请选择要删除的客户"):this.$confirm("是否确认删除所选客户?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("删除成功"),this.getList()}).catch(()=>{})},handleReceive(){0!==this.ids.length?(this.receiveForm={customerIds:this.ids,reason:void 0},this.receiveOpen=!0):this.$message.warning("请选择要领取的客户")},handleReceiveSingle(e){this.ids=[e.id],this.receiveForm={customerIds:[e.id],reason:void 0},this.receiveOpen=!0},submitReceive(){this.receiveForm.reason?(this.$message.success("领取成功"),this.receiveOpen=!1,this.getList()):this.$message.warning("请输入领取理由")},handleExport(){this.$confirm("是否确认导出所有公海客户数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("导出成功")}).catch(()=>{})},getLevelTagType(e){const t={A:"danger",B:"warning",C:"success",D:"info"};return t[e]||""},getLevelLabel(e){const t={A:"A级",B:"B级",C:"C级",D:"D级"};return t[e]||e},getIndustryLabel(e){const t=this.industryOptions.find(t=>t.value===e);return t?t.label:e},handleSizeChange(e){this.queryParams.pageSize=e,this.getList()},handleCurrentChange(e){this.queryParams.pageNum=e,this.getList()}}}),i=s,n=(a("1cd4"),a("2877")),o=Object(n["a"])(i,l,r,!1,null,null,null);t["default"]=o.exports}}]);