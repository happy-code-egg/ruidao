(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-293f63f6"],{"3a25":function(t,o,e){"use strict";e.r(o);var l=function(){var t=this,o=t._self._c;return o("div",{staticClass:"opportunity-detail-container"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("商机详情")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.goBack}},[t._v("返回")])],1),o("el-descriptions",{attrs:{column:2,border:""}},[o("el-descriptions-item",{attrs:{label:"商机名称"}},[t._v(t._s(t.opportunityInfo.opportunityName))]),o("el-descriptions-item",{attrs:{label:"客户名称"}},[t._v(t._s(t.opportunityInfo.customerName))]),o("el-descriptions-item",{attrs:{label:"商机类型"}},[t._v(t._s(t.opportunityInfo.opportunityType))]),o("el-descriptions-item",{attrs:{label:"商机状态"}},[o("el-tag",{attrs:{type:t.getStatusType(t.opportunityInfo.status)}},[t._v(t._s(t.opportunityInfo.status))])],1),o("el-descriptions-item",{attrs:{label:"预计金额"}},[t._v(t._s(t.opportunityInfo.expectedAmount)+"元")]),o("el-descriptions-item",{attrs:{label:"预计签约时间"}},[t._v(t._s(t.opportunityInfo.expectedSigningDate))]),o("el-descriptions-item",{attrs:{label:"负责人"}},[t._v(t._s(t.opportunityInfo.principal))]),o("el-descriptions-item",{attrs:{label:"跟进次数"}},[t._v(t._s(t.opportunityInfo.followUpCount))]),o("el-descriptions-item",{attrs:{label:"最后跟进时间"}},[t._v(t._s(t.opportunityInfo.lastFollowUpDate))]),o("el-descriptions-item",{attrs:{label:"创建时间"}},[t._v(t._s(t.opportunityInfo.createDate))]),o("el-descriptions-item",{attrs:{label:"备注",span:2}},[t._v(t._s(t.opportunityInfo.remark))])],1),o("div",{staticClass:"button-container"},[o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:t.handleEdit}},[t._v("编辑商机")]),o("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-message"},on:{click:t.handleFollowUp}},[t._v("添加跟进")])],1)],1),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("跟进历史记录")])]),o("el-timeline",t._l(t.followUpHistory,(function(e,l){return o("el-timeline-item",{key:l,attrs:{timestamp:e.followUpDate,type:t.getTimelineType(l)}},[o("el-card",{staticClass:"timeline-card"},[o("h4",[t._v(t._s(e.followUpMethod)+" - "+t._s(e.followUpType))]),o("p",{staticClass:"timeline-content"},[t._v("跟进内容："+t._s(e.followUpContent))]),o("p",[t._v("跟进联系人："+t._s(e.followUpContact))]),o("p",[t._v("跟进满意度： "),o("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900"},model:{value:e.followUpSatisfaction,callback:function(o){t.$set(e,"followUpSatisfaction",o)},expression:"activity.followUpSatisfaction"}})],1),e.nextFollowUpTime?o("p",[t._v("下次跟进时间："+t._s(e.nextFollowUpTime))]):t._e(),e.nextFollowUpContent?o("p",[t._v("下次跟进内容："+t._s(e.nextFollowUpContent))]):t._e(),e.attachments&&e.attachments.length>0?o("p",[t._v(" 附件： "),t._l(e.attachments,(function(e,l){return o("el-link",{key:l,staticStyle:{"margin-right":"10px"},attrs:{href:e.url,target:"_blank",type:"primary"}},[t._v(" "+t._s(e.name)+" ")])}))],2):t._e()])],1)})),1),0===t.followUpHistory.length?o("div",{staticClass:"empty-block"},[o("el-empty",{attrs:{description:"暂无跟进记录"}})],1):t._e()],1)],1)},n=[],i=(e("14d9"),{name:"OpportunityDetail",data(){return{opportunityId:null,opportunityInfo:{},followUpHistory:[]}},created(){this.opportunityId=this.$route.params.id,this.opportunityId?(this.getOpportunityInfo(),this.getFollowUpHistory()):(this.$message.error("商机ID不能为空"),this.goBack())},methods:{getStatusType(t){const o={"初期沟通":"info","需求确认":"info","方案制定":"warning","商务谈判":"warning","合同签署":"success","已成交":"success","已失败":"danger"};return o[t]||""},getTimelineType(t){const o=["primary","success","warning","danger","info"];return o[t%o.length]},getOpportunityInfo(){this.opportunityInfo={id:this.opportunityId,opportunityName:"发明专利申请代理",customerName:"四川大学",opportunityType:"专利申请",status:"方案制定",expectedAmount:"25000",expectedSigningDate:"2024-06-30",principal:"李明",followUpCount:3,lastFollowUpDate:"2024-05-25",createDate:"2024-05-10",remark:"客户对方案基本满意，需要进一步完善细节"}},getFollowUpHistory(){this.followUpHistory=[{id:1,followUpDate:"2024-05-25 14:30",followUpMethod:"电话",followUpType:"方案制定",followUpContent:"客户基本满意我们的方案，但希望能够增加专利文本的编辑服务",followUpContact:"张教授",followUpSatisfaction:4,nextFollowUpTime:"2024-06-05 10:00",nextFollowUpContent:"提供修改后的方案和报价",attachments:[{name:"沟通记录.docx",url:"#"}]},{id:2,followUpDate:"2024-05-15 09:30",followUpMethod:"邮件",followUpType:"需求确认",followUpContent:"向客户发送了初步的服务方案和报价，对方表示需要时间评估",followUpContact:"张教授",followUpSatisfaction:3,nextFollowUpTime:"2024-05-25 14:00",nextFollowUpContent:"电话沟通方案细节",attachments:[{name:"服务方案.pdf",url:"#"},{name:"报价单.xlsx",url:"#"}]},{id:3,followUpDate:"2024-05-10 15:00",followUpMethod:"拜访",followUpType:"初次沟通",followUpContent:"与客户进行了初步沟通，了解到他们需要为一项新技术申请发明专利，需要专业代理服务",followUpContact:"张教授",followUpSatisfaction:5,nextFollowUpTime:"2024-05-15 09:00",nextFollowUpContent:"发送服务方案和报价",attachments:[]}]},handleEdit(){this.$router.push({path:"/customer/opportunity/edit/"+this.opportunityId})},handleFollowUp(){this.$router.push({path:"/customer/opportunity/followup/"+this.opportunityId})},goBack(){this.$router.go(-1)}}}),s=i,a=(e("5521"),e("2877")),p=Object(a["a"])(s,l,n,!1,null,null,null);o["default"]=p.exports},5521:function(t,o,e){"use strict";e("5908")},5908:function(t,o,e){}}]);