(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67eb066a"],{"13d5":function(e,t,a){"use strict";var l=a("23e7"),s=a("d58f").left,i=a("a640"),o=a("1212"),r=a("9adc"),n=!r&&o>79&&o<83,c=n||!i("reduce");l({target:"Array",proto:!0,forced:c},{reduce:function(e){var t=arguments.length;return s(this,e,t,t>1?arguments[1]:void 0)}})},"157d":function(e,t,a){"use strict";a("292e")},"292e":function(e,t,a){},3351:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payment-request-draft-container"},[t("div",{staticClass:"body-part-content"},[t("div",{staticClass:"part-table-header"},[t("div",{staticClass:"part-table-title"},[e._v(" 请款单草稿 ")]),t("div",{staticClass:"part-table-operations"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)]),t("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"clientName",label:"客户名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"officialFee",label:"官费","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"serviceFee",label:"服务费","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"totalFee",label:"总费用","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"requestRemark",label:"请款单备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"creator",label:"创建人","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"creationDate",label:"创建日期","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{staticClass:"payment-detail-dialog",attrs:{title:"",visible:e.viewDialogVisible,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[t("div",{staticClass:"dialog-header-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handlePreview}},[e._v("预览")]),t("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.handleDownload}},[e._v("下载")])],1),t("div",{staticClass:"fee-summary-section"},[t("el-row",[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"fee-item"},[t("span",{staticClass:"fee-label"},[e._v("官费")]),t("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.viewForm.officialFee,callback:function(t){e.$set(e.viewForm,"officialFee",t)},expression:"viewForm.officialFee"}})],1)]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"fee-item"},[t("span",{staticClass:"fee-label"},[e._v("服务费")]),t("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.viewForm.serviceFee,callback:function(t){e.$set(e.viewForm,"serviceFee",t)},expression:"viewForm.serviceFee"}})],1)]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"fee-item"},[t("span",{staticClass:"fee-label"},[e._v("总费用")]),t("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.viewForm.totalFee,callback:function(t){e.$set(e.viewForm,"totalFee",t)},expression:"viewForm.totalFee"}})],1)])],1)],1),t("div",{staticClass:"detail-table-section"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailTableData,border:"",size:"small"},on:{"selection-change":e.handleDetailSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"ourCaseNumber",label:"我方案号",width:"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"applicationNumber",label:"申请号",width:"140","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"caseType",label:"案件类型",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"caseName",label:"案件名称","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"invoiceNumber",label:"对应发票号（手动填写）",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"请输入发票号"},on:{change:function(t){return e.handleInvoiceNumberChange(a.$index,a.row.invoiceNumber)}},model:{value:a.row.invoiceNumber,callback:function(t){e.$set(a.row,"invoiceNumber",t)},expression:"scope.row.invoiceNumber"}})]}}])}),t("el-table-column",{attrs:{prop:"feeItem",label:"费用项目",width:"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"feeAmount",label:"费用（元）",width:"140",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{color:"#909399"}},[e._v(e._s(a.row.feeAmount))])]}}])})],1),t("div",{staticClass:"total-row"},[t("el-row",[t("el-col",{staticStyle:{"text-align":"right","padding-right":"10px","line-height":"32px"},attrs:{span:18}},[t("strong",[e._v("合计：")])]),t("el-col",{staticStyle:{"text-align":"right","padding-right":"20px","line-height":"32px"},attrs:{span:6}},[t("strong",{staticStyle:{color:"#f56c6c"}},[e._v("¥"+e._s(e.getTotalAmount()))])])],1)],1)],1),t("div",{staticClass:"remarks-section"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"请款单备注"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"备注输入"},model:{value:e.viewForm.requestRemarks,callback:function(t){e.$set(e.viewForm,"requestRemarks",t)},expression:"viewForm.requestRemarks"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.viewDialogVisible=!1}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSavePaymentRequest}},[e._v("保存")])],1)]),t("el-dialog",{attrs:{title:"新增请款单",visible:e.addDialogVisible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.handleAddDialogClose}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-width":"120px",size:"small"}},[t("div",{staticClass:"form-section"},[t("div",{staticClass:"section-title"},[e._v("基本信息")]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择客户",filterable:"",remote:"","remote-method":e.searchCustomers,loading:e.customerLoading},on:{change:e.handleCustomerChange},model:{value:e.addForm.customerName,callback:function(t){e.$set(e.addForm,"customerName",t)},expression:"addForm.customerName"}},e._l(e.customerOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"合同号",prop:"contractNo"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择合同",filterable:"",disabled:!e.addForm.customerName},on:{change:e.handleContractChange},model:{value:e.addForm.contractNo,callback:function(t){e.$set(e.addForm,"contractNo",t)},expression:"addForm.contractNo"}},e._l(e.contractOptions,(function(e){return t("el-option",{key:e.no,attrs:{label:`${e.no} - ${e.name}`,value:e.no}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"紧急程度",prop:"urgentLevel"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择紧急程度"},model:{value:e.addForm.urgentLevel,callback:function(t){e.$set(e.addForm,"urgentLevel",t)},expression:"addForm.urgentLevel"}},[t("el-option",{attrs:{label:"普通",value:"normal"}}),t("el-option",{attrs:{label:"紧急",value:"urgent"}}),t("el-option",{attrs:{label:"特急",value:"emergency"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"技术负责人",prop:"techLead"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择技术负责人"},model:{value:e.addForm.techLead,callback:function(t){e.$set(e.addForm,"techLead",t)},expression:"addForm.techLead"}},[t("el-option",{attrs:{label:"张工程师",value:"张工程师"}}),t("el-option",{attrs:{label:"李工程师",value:"李工程师"}}),t("el-option",{attrs:{label:"王工程师",value:"王工程师"}}),t("el-option",{attrs:{label:"赵工程师",value:"赵工程师"}})],1)],1)],1)],1)],1),t("div",{staticClass:"form-section"},[t("div",{staticClass:"section-title"},[e._v("费用信息")]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"官费",prop:"officialFee"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:2,min:0,max:999999,"controls-position":"right"},on:{change:e.calculateTotal},model:{value:e.addForm.officialFee,callback:function(t){e.$set(e.addForm,"officialFee",t)},expression:"addForm.officialFee"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"服务费",prop:"serviceFee"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:2,min:0,max:999999,"controls-position":"right"},on:{change:e.calculateTotal},model:{value:e.addForm.serviceFee,callback:function(t){e.$set(e.addForm,"serviceFee",t)},expression:"addForm.serviceFee"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"总金额"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{value:e.totalAmount,readonly:""}},[t("template",{slot:"prepend"},[e._v("¥")])],2)],1)],1)],1)],1),t("div",{staticClass:"form-section"},[t("div",{staticClass:"section-title"},[e._v("关联项目")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.addForm.caseList,border:"",size:"mini","max-height":"200"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"caseNo",label:"我方文号",width:"140"}}),t("el-table-column",{attrs:{prop:"caseName",label:"案件名称","min-width":"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"applicant",label:"申请人",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"caseType",label:"案件类型",width:"100"}}),t("el-table-column",{attrs:{prop:"status",label:"发票号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{placeholder:"请输入发票号"},model:{value:a.row.invoiceNumber,callback:function(t){e.$set(a.row,"invoiceNumber",t)},expression:"scope.row.invoiceNumber"}})]}}])}),t("el-table-column",{attrs:{prop:"feeItem",label:"费用项目","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"feeAmount",label:"费用（元）",width:"140",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{color:"#909399"}},[e._v(e._s(a.row.feeAmount))])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeCaseFromList(a.$index)}}},[e._v(" 移除 ")])]}}])})],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showCaseSelector}},[e._v("添加项目")])],1)],1),t("div",{staticClass:"form-section"},[t("div",{staticClass:"section-title"},[e._v("备注信息")]),t("el-form-item",{attrs:{label:"请款事由",prop:"reason"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入请款事由",maxlength:"200","show-word-limit":""},model:{value:e.addForm.reason,callback:function(t){e.$set(e.addForm,"reason",t)},expression:"addForm.reason"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"500","show-word-limit":""},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveDraft}},[e._v("新增")])],1)],1),t("el-dialog",{attrs:{title:"选择项目",visible:e.caseSelectorVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.caseSelectorVisible=t}}},[t("div",{staticClass:"case-search-form"},[t("el-form",{attrs:{model:e.caseSearchForm,size:"small",inline:!0}},[t("el-form-item",{attrs:{label:"项目编号"}},[t("el-input",{attrs:{placeholder:"项目编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchCases.apply(null,arguments)}},model:{value:e.caseSearchForm.caseNo,callback:function(t){e.$set(e.caseSearchForm,"caseNo",t)},expression:"caseSearchForm.caseNo"}})],1),t("el-form-item",{attrs:{label:"项目名称"}},[t("el-input",{attrs:{placeholder:"项目名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchCases.apply(null,arguments)}},model:{value:e.caseSearchForm.caseName,callback:function(t){e.$set(e.caseSearchForm,"caseName",t)},expression:"caseSearchForm.caseName"}})],1),t("el-form-item",{attrs:{label:"项目类型"}},[t("el-select",{attrs:{placeholder:"项目类型",clearable:""},model:{value:e.caseSearchForm.caseType,callback:function(t){e.$set(e.caseSearchForm,"caseType",t)},expression:"caseSearchForm.caseType"}},[t("el-option",{attrs:{label:"发明专利",value:"发明专利"}}),t("el-option",{attrs:{label:"实用新型",value:"实用新型"}}),t("el-option",{attrs:{label:"外观设计",value:"外观设计"}}),t("el-option",{attrs:{label:"商标注册",value:"商标注册"}}),t("el-option",{attrs:{label:"版权登记",value:"版权登记"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchCases}},[e._v("搜索")]),t("el-button",{on:{click:e.resetCaseSearch}},[e._v("重置")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.caseLoading,expression:"caseLoading"}],staticStyle:{width:"100%"},attrs:{data:e.availableCases,border:"",size:"small","max-height":"400"},on:{"selection-change":e.handleCaseSelection}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"caseNo",label:"项目编号",width:"140"}}),t("el-table-column",{attrs:{prop:"caseName",label:"项目名称","min-width":"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"applicant",label:"申请人",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"caseType",label:"项目类型",width:"100"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getCaseStatusType(a.row.status),size:"mini"}},[e._v(" "+e._s(a.row.status)+" ")])]}}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.caseSelectorVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmCaseSelection}},[e._v("确定")])],1)],1)],1)},s=[],i=(a("14d9"),a("13d5"),a("e9f5"),a("910d"),a("7d54"),a("ab43"),a("9485"),a("a732"),{name:"PaymentRequestDraft",data(){return{searchForm:{paymentStatusFilter:"unrequested",ourRef:"",applicationNo:"",clientName:"",applicationDate:[],paymentDeadline:[],techLead:"",applicantName:"",caseStatus:"",applicationType:"",caseName:"",feeName:"",contractNo:"",excludeLateFee:!1},tableData:[],selectedRows:[],currentPage:1,pageSize:10,total:0,viewDialogVisible:!1,viewForm:{officialFee:"1000",serviceFee:"2000",totalFee:"2000",requestRemarks:""},detailTableData:[],detailSelectedRows:[],additionalFields:[{key:"caseType",label:"项目类型"},{key:"caseFlow",label:"项目流向"},{key:"applicationCountry",label:"申请国家(地区)"},{key:"exchangeRate",label:"折算系数"},{key:"exchangedAmount",label:"折算后金额"}],addDialogVisible:!1,addForm:{customerName:"",contractNo:"",urgentLevel:"normal",techLead:"",officialFee:0,serviceFee:0,reason:"",remark:"",caseList:[]},addRules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],contractNo:[{required:!0,message:"请选择合同号",trigger:"change"}],urgentLevel:[{required:!0,message:"请选择紧急程度",trigger:"change"}],techLead:[{required:!0,message:"请选择技术负责人",trigger:"change"}],officialFee:[{required:!0,message:"请输入官费",trigger:"blur"},{type:"number",min:0,message:"官费不能小于0",trigger:"blur"}],serviceFee:[{required:!0,message:"请输入服务费",trigger:"blur"},{type:"number",min:0,message:"服务费不能小于0",trigger:"blur"}],reason:[{required:!0,message:"请输入请款事由",trigger:"blur"}]},customerLoading:!1,customerOptions:[],contractOptions:[],caseSelectorVisible:!1,caseLoading:!1,availableCases:[],selectedCases:[],caseSearchForm:{caseNo:"",caseName:"",caseType:""}}},created(){this.getList()},methods:{getList(){this.tableData=Array.from({length:8}).map((e,t)=>({id:t+1,clientName:"客户公司"+(t+1),officialFee:(1e3+100*t).toFixed(2),serviceFee:(2e3+200*t).toFixed(2),totalFee:(3e3+300*t).toFixed(2),requestRemark:t%2===0?"请尽快处理":"",creator:"业务员"+(t+1),creationDate:"2023-05-11 15:33"})),this.total=this.tableData.length},handleSearch(){this.currentPage=1,this.getList(),this.$message.info("执行搜索")},handleReset(){this.searchForm={paymentStatusFilter:"unrequested"},this.getList(),this.$message.info("重置搜索条件")},handleAddToRequest(){0!==this.selectedRows.length?this.$message.success("已加入请款单"):this.$message.warning("请至少选择一条记录")},handleSelectionChange(e){this.selectedRows=e},handleDetailSelectionChange(e){this.detailSelectedRows=e},handleSizeChange(e){this.pageSize=e,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()},handleView(e){this.viewDialogVisible=!0,this.viewForm={officialFee:e.officialFee,serviceFee:e.serviceFee,totalFee:e.totalFee,requestRemarks:e.requestRemark||""},this.detailTableData=[{id:1,ourCaseNumber:"EM-2023-001",applicationNumber:"202310123456.7",caseType:"发明专利",caseName:"智能设备控制方法",invoiceNumber:"",feeItem:"申请费",feeAmount:"1000.00"},{id:2,ourCaseNumber:"EM-2023-002",applicationNumber:"202310123457.8",caseType:"商标申请",caseName:"品牌标识注册",invoiceNumber:"",feeItem:"审查费",feeAmount:"800.00"},{id:3,ourCaseNumber:"EM-2023-003",applicationNumber:"202310123458.9",caseType:"外观设计",caseName:"产品外观设计",invoiceNumber:"",feeItem:"申请费",feeAmount:"500.00"}]},handleDelete(e){this.$confirm(`确认删除请款草稿 "${e.clientName}" 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.tableData=this.tableData.filter(t=>t.id!==e.id),this.total=this.tableData.length,this.$message.success("删除成功")}).catch(()=>{this.$message.info("已取消删除")})},handleTransfer(){this.$message.success("流转操作执行中...")},handleReturn(){this.$confirm("确认要退回吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("退回成功"),this.viewDialogVisible=!1}).catch(()=>{this.$message.info("已取消退回")})},handleDeleteItem(){this.$confirm("确认要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message.success("删除成功"),this.viewDialogVisible=!1}).catch(()=>{this.$message.info("已取消删除")})},handleSavePaymentRequest(){this.$message.success("保存成功"),this.viewDialogVisible=!1},moveOut(e){this.$message.info("移出字段: "+e.label)},handleAdd(){this.addDialogVisible=!0,this.initAddForm()},showCaseSelector(){this.caseSelectorVisible=!0,this.searchCases()},searchCases(){this.caseLoading=!0,setTimeout(()=>{this.availableCases=Array.from({length:10}).map((e,t)=>({id:t+1,caseNo:"CN"+String(202300001+t),caseName:"智能设备控制方法"+(t+1),applicant:this.addForm.customerName||"申请人"+(t+1),caseType:["发明专利","实用新型","外观设计","商标注册","版权登记"][t%5],status:["申请中","审查中","已授权","已驳回"][t%4]})),this.caseLoading=!1},500)},resetCaseSearch(){this.caseSearchForm={caseNo:"",caseName:"",caseType:""},this.searchCases()},handleCaseSelection(e){this.selectedCases=e},confirmCaseSelection(){0!==this.selectedCases.length?(this.selectedCases.forEach(e=>{const t=this.addForm.caseList.some(t=>t.id===e.id);t||this.addForm.caseList.push({...e})}),this.caseSelectorVisible=!1,this.selectedCases=[]):this.$message.warning("请选择至少一个项目")},removeCaseFromList(e){this.addForm.caseList.splice(e,1)},getCaseStatusType(e){const t={"申请中":"warning","审查中":"info","已授权":"success","已驳回":"danger"};return t[e]||""},handleSaveDraft(){this.$refs.addForm.validate(e=>{e&&(this.loading=!0,setTimeout(()=>{this.$message.success("请款单已保存为草稿"),this.addDialogVisible=!1,this.getList(),this.getStatistics(),this.loading=!1},1e3))})},handleSubmitAdd(){this.$refs.addForm.validate(e=>{if(e){if(0===this.addForm.caseList.length)return void this.$message.warning("请至少添加一个关联项目");this.loading=!0,setTimeout(()=>{this.$message.success("请款单已提交审核"),this.addDialogVisible=!1,this.getList(),this.getStatistics(),this.loading=!1},1e3)}})},handleEdit(e){this.$message.info("编辑请款草稿: "+e.clientName),this.handleView(e)},handleInvoiceNumberChange(e,t){this.detailTableData[e].invoiceNumber=t},getTotalAmount(){return this.detailTableData.reduce((e,t)=>e+parseFloat(t.feeAmount||0),0).toFixed(2)},handleAddDialogClose(){this.initAddForm()},initAddForm(){this.addForm={customerName:"",contractNo:"",urgentLevel:"normal",techLead:"",officialFee:0,serviceFee:0,reason:"",remark:"",caseList:[]},this.customerOptions=[],this.contractOptions=[]},searchCustomers(e){this.customerLoading=!0,setTimeout(()=>{this.customerOptions=[{id:1,name:"北京科技有限公司"},{id:2,name:"上海贸易有限公司"},{id:3,name:"深圳创新科技"},{id:4,name:"广州制造集团"}].filter(t=>t.name.includes(e||"")),this.customerLoading=!1},300)},handleCustomerChange(e){this.addForm.contractNo="",this.contractOptions=[{no:"HT2023001",name:"技术服务合同"},{no:"HT2023002",name:"知识产权代理合同"},{no:"HT2023003",name:"专利申请服务合同"}]},handleContractChange(e){console.log("选择合同:",e)},calculateTotal(){this.addForm.totalAmount=(this.addForm.officialFee+this.addForm.serviceFee).toFixed(2)}},computed:{totalAmount(){return(this.addForm.officialFee+this.addForm.serviceFee).toFixed(2)}}}),o=i,r=(a("157d"),a("2877")),n=Object(r["a"])(o,l,s,!1,null,"acfcc9ee",null);t["default"]=n.exports},8558:function(e,t,a){"use strict";var l=a("cfe9"),s=a("b5db"),i=a("c6b6"),o=function(e){return s.slice(0,e.length)===e};e.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":l.Bun&&"string"==typeof Bun.version?"BUN":l.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(l.process)?"NODE":l.window&&l.document?"BROWSER":"REST"}()},9485:function(e,t,a){"use strict";var l=a("23e7"),s=a("2266"),i=a("59ed"),o=a("825a"),r=a("46c4"),n=TypeError;l({target:"Iterator",proto:!0,real:!0},{reduce:function(e){o(this),i(e);var t=r(this),a=arguments.length<2,l=a?void 0:arguments[1],c=0;if(s(t,(function(t){a?(a=!1,l=t):l=e(l,t,c),c++}),{IS_RECORD:!0}),a)throw new n("Reduce of empty iterator with no initial value");return l}})},"9adc":function(e,t,a){"use strict";var l=a("8558");e.exports="NODE"===l},a640:function(e,t,a){"use strict";var l=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&l((function(){a.call(null,t||function(){return 1},1)}))}},d58f:function(e,t,a){"use strict";var l=a("59ed"),s=a("7b0b"),i=a("44ad"),o=a("07fa"),r=TypeError,n="Reduce of empty array with no initial value",c=function(e){return function(t,a,c,d){var m=s(t),u=i(m),p=o(m);if(l(a),0===p&&c<2)throw new r(n);var h=e?p-1:0,b=e?-1:1;if(c<2)while(1){if(h in u){d=u[h],h+=b;break}if(h+=b,e?h<0:p<=h)throw new r(n)}for(;e?h>=0:p>h;h+=b)h in u&&(d=a(d,u[h],h,m));return d}};e.exports={left:c(!1),right:c(!0)}}}]);