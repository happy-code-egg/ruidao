(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc589e72"],{"0d26":function(e,t,a){"use strict";var o=a("e330"),s=Error,r=o("".replace),n=function(e){return String(new s(e).stack)}("zxcasd"),c=/\n\s*at [^:]*:[^\n]*/,l=c.test(n);e.exports=function(e,t){if(l&&"string"==typeof e&&!s.prepareStackTrace)while(t--)e=r(e,c,"");return e}},1787:function(e,t,a){"use strict";var o=a("861d");e.exports=function(e){return o(e)||null===e}},"205f":function(e,t,a){"use strict";a("e153")},"2ba4":function(e,t,a){"use strict";var o=a("40d5"),s=Function.prototype,r=s.apply,n=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?n.bind(r):function(){return n.apply(r,arguments)})},"3bbe":function(e,t,a){"use strict";var o=a("1787"),s=String,r=TypeError;e.exports=function(e){if(o(e))return e;throw new r("Can't set "+s(e)+" as a prototype")}},"582a":function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-applicant-wrapper"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus",disabled:e.disabled},on:{click:e.handleClick}},[e._v(" 选择申请人 ")]),t("el-dialog",{attrs:{title:"选择申请人",visible:e.dialogVisible,width:"600px","close-on-click-modal":!1,"close-on-press-escape":!0},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleCancel}},[t("div",{staticClass:"search-section"},[t("el-input",{attrs:{placeholder:"请输入申请人名称、信用代码或地区","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.handleSearch,input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1),t("div",{staticClass:"table-container"},[e.loading||0!==e.filteredApplicantData.length?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.filteredApplicantData,"show-checkbox":e.multiple,"check-strictly":!1,height:"400","element-loading-text":"加载申请人数据中..."},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[e.multiple?t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}):e._e(),t("el-table-column",{attrs:{label:"申请人名称",prop:"name","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"信用代码",prop:"creditCode","min-width":"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"省",prop:"province",width:"80"}}),t("el-table-column",{attrs:{label:"市",prop:"city",width:"100"}}),t("el-table-column",{attrs:{label:"地址",prop:"address","min-width":"200","show-overflow-tooltip":""}})],1):t("div",{staticClass:"no-data-tip"},[t("el-empty",{attrs:{description:"该客户暂无申请人数据，请先在客户管理中添加申请人"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleReset}},[e._v("重置")]),t("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1)])],1)},s=[],r=(a("e9f5"),a("910d"),a("f665"),a("7d54"),a("ab43"),a("f6b0")),n={name:"SelectApplicant",model:{prop:"value",event:"input"},props:{value:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},customerId:{type:[String,Number],default:""}},data(){return{dialogVisible:!1,searchKeyword:"",selectedApplicants:[],loading:!1,originalApplicantData:[],fallbackApplicantData:[{id:"applicant-1",name:"北京科技有限公司",creditCode:"91110000123456789A",province:"北京",city:"北京市",address:"北京市海淀区中关村大街1号"},{id:"applicant-2",name:"上海智能技术有限公司",creditCode:"91310000234567890B",province:"上海",city:"上海市",address:"上海市浦东新区张江路2号"},{id:"applicant-3",name:"深圳创新科技股份有限公司",creditCode:"91440300345678901C",province:"广东",city:"深圳市",address:"深圳市南山区科技园南区3号"},{id:"applicant-4",name:"杭州网络技术有限公司",creditCode:"91330100456789012D",province:"浙江",city:"杭州市",address:"杭州市西湖区文三路4号"},{id:"applicant-5",name:"广州软件开发有限公司",creditCode:"91440100567890123E",province:"广东",city:"广州市",address:"广州市天河区珠江新城5号"},{id:"applicant-6",name:"南京信息技术有限公司",creditCode:"91320100678901234F",province:"江苏",city:"南京市",address:"南京市玄武区中山路6号"},{id:"applicant-7",name:"武汉数据科技有限公司",creditCode:"91420100789012345G",province:"湖北",city:"武汉市",address:"武汉市洪山区光谷大道7号"},{id:"applicant-8",name:"成都人工智能有限公司",creditCode:"91510100890123456H",province:"四川",city:"成都市",address:"成都市高新区天府大道8号"},{id:"applicant-9",name:"西安电子科技有限公司",creditCode:"91610100901234567I",province:"陕西",city:"西安市",address:"西安市雁塔区科技路9号"},{id:"applicant-10",name:"青岛海洋科技有限公司",creditCode:"91370200012345678J",province:"山东",city:"青岛市",address:"青岛市市南区香港中路10号"}]}},computed:{filteredApplicantData(){const e=this.originalApplicantData;if(console.log("SelectApplicant: filteredApplicantData计算",{originalDataLength:this.originalApplicantData.length,dataSourceLength:e.length,customerId:this.customerId}),!this.searchKeyword.trim())return e;const t=this.searchKeyword.trim().toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(t)||e.creditCode&&e.creditCode.toLowerCase().includes(t)||e.province&&e.province.toLowerCase().includes(t)||e.city&&e.city.toLowerCase().includes(t)||e.address&&e.address.toLowerCase().includes(t))}},watch:{value:{immediate:!0,handler(e){this.initSelectedApplicants(e)}},dialogVisible:{handler(e){e&&(console.log("SelectApplicant: 对话框打开, customerId:",this.customerId),this.customerId&&this.loadApplicantData(),this.$nextTick(()=>{this.syncTableSelection()}))}},customerId:{handler(e){e&&this.loadApplicantData()},immediate:!0}},created(){this.customerId&&this.loadApplicantData()},methods:{async loadApplicantData(){if(console.log("SelectApplicant: 开始加载申请人数据, customerId:",this.customerId),this.customerId){this.loading=!0;try{console.log("SelectApplicant: 调用API获取申请人列表, 参数:",{customer_id:this.customerId,page:1,page_size:999});const e=await r["a"].getApplicantList({customer_id:this.customerId,page:1,page_size:999});if(console.log("SelectApplicant: API响应:",e.data),e.data&&e.data.success){const t=e.data.data.list||[];console.log("SelectApplicant: 获取到申请人数据:",t.length,"条"),this.originalApplicantData=t.map(e=>({id:e.id,name:e.applicant_name_cn||e.applicantName||"",creditCode:e.applicant_code||"",province:e.province||"",city:e.city||"",address:e.business_location||e.address||"",type:e.applicant_type||"",country:e.country||""})),console.log("SelectApplicant: 处理后的申请人数据:",this.originalApplicantData)}else console.warn("SelectApplicant: 获取申请人列表失败，API返回:",e.data),console.warn("SelectApplicant: 使用备用数据")}catch(e){console.error("SelectApplicant: 加载申请人数据失败:",e),console.warn("SelectApplicant: 使用备用数据")}finally{this.loading=!1}}else console.warn("SelectApplicant: 未提供客户ID，使用备用数据")},initSelectedApplicants(e){this.selectedApplicants=Array.isArray(e)?[...e]:[]},handleClick(){this.disabled||(console.log("SelectApplicant: 点击选择申请人按钮, customerId:",this.customerId),this.dialogVisible=!0,this.customerId&&0===this.originalApplicantData.length&&(console.log("SelectApplicant: 对话框打开时重新加载数据"),this.loadApplicantData()))},handleSearch(){},handleSelectionChange(e){this.multiple&&(this.selectedApplicants=e)},handleRowClick(e){this.multiple||(this.selectedApplicants=[e],this.handleConfirm())},handleConfirm(){this.emitChange(),this.dialogVisible=!1},handleCancel(){this.initSelectedApplicants(this.value),this.dialogVisible=!1,this.searchKeyword=""},handleReset(){this.selectedApplicants=[],this.searchKeyword="",this.$refs.table&&this.$refs.table.clearSelection&&this.$refs.table.clearSelection()},emitChange(){const e=[...this.selectedApplicants];this.$emit("input",e),this.$emit("change",e)},syncTableSelection(){this.$refs.table&&this.multiple&&(this.$refs.table.clearSelection(),this.selectedApplicants.forEach(e=>{const t=this.filteredApplicantData.find(t=>t.id===e.id);t&&this.$refs.table.toggleRowSelection(t,!0)}))}}},c=n,l=(a("205f"),a("2877")),i=Object(l["a"])(c,o,s,!1,null,"7e143a36",null);t["a"]=i.exports},"6eed":function(e,t,a){},"6f19":function(e,t,a){"use strict";var o=a("9112"),s=a("0d26"),r=a("b980"),n=Error.captureStackTrace;e.exports=function(e,t,a,c){r&&(n?n(e,t):o(e,"stack",s(a,c)))}},7156:function(e,t,a){"use strict";var o=a("1626"),s=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var n,c;return r&&o(n=t.constructor)&&n!==a&&s(c=n.prototype)&&c!==a.prototype&&r(e,c),e}},7419:function(e){e.exports=JSON.parse('[{"en":"Afghanistan","cn":"阿富汗","code":"+93","short_code":"AF"},{"en":"Alaska(U.S.A)","cn":"阿拉斯加","code":"+1907","short_code":"US"},{"en":"Albania","cn":"阿尔巴尼亚","code":"+355","short_code":"AL"},{"en":"Algeria","cn":"阿尔及利亚","code":"+213","short_code":"DZ"},{"en":"American Samoa","cn":"美属萨摩亚","code":"+684","short_code":"AS"},{"en":"Andorra","cn":"安道尔共和国","code":"+376","short_code":"AD"},{"en":"Angola","cn":"安哥拉","code":"+244","short_code":"AO"},{"en":"Anguilla","cn":"安圭拉岛","code":"+1254","short_code":"AI"},{"en":"Antigua and Barbuda","cn":"安提瓜和巴布达","code":"+1268","short_code":"AG"},{"en":"Argentina","cn":"阿根廷","code":"+54","short_code":"AR"},{"en":"Armenia","cn":"亚美尼亚","code":"+374","short_code":"AM"},{"en":"Aruba","cn":"阿鲁巴岛","code":"+297","short_code":"AW"},{"en":"Ascension","cn":"阿森松","code":"+247","short_code":"AC"},{"en":"Australia","cn":"澳大利亚","code":"+61","short_code":"AU"},{"en":"Austria","cn":"奥地利","code":"+43","short_code":"AT"},{"en":"Azerbaijan","cn":"阿塞拜疆","code":"+994","short_code":"AZ"},{"en":"Bahamas","cn":"巴哈马","code":"+1242","short_code":"BS"},{"en":"Bahrain","cn":"巴林","code":"+973","short_code":"BH"},{"en":"Bangladesh","cn":"孟加拉国","code":"+880","short_code":"BD"},{"en":"Barbados","cn":"巴巴多斯","code":"+1246","short_code":"BB"},{"en":"Belarus","cn":"白俄罗斯","code":"+375","short_code":"BY"},{"en":"Belgium","cn":"比利时","code":"+32","short_code":"BE"},{"en":"Belize","cn":"伯利兹","code":"+501","short_code":"BZ"},{"en":"Benin","cn":"贝宁","code":"+229","short_code":"BJ"},{"en":"Bermuda Is","cn":"百慕大群岛","code":"+1441","short_code":"BM"},{"en":"Bhutan","cn":"不丹","code":"+975","short_code":"BT"},{"en":"Bolivia","cn":"玻利维亚","code":"+591","short_code":"BO"},{"en":"Bosnia And Herzegovina","cn":"波斯尼亚和黑塞哥维那","code":"+387","short_code":"BA"},{"en":"Botswana","cn":"博茨瓦纳","code":"+267","short_code":"BW"},{"en":"Brazil","cn":"巴西","code":"+55","short_code":"BR"},{"en":"Brunei","cn":"文莱","code":"+673","short_code":"BN"},{"en":"Bulgaria","cn":"保加利亚","code":"+359","short_code":"BG"},{"en":"Burkina Faso","cn":"布基纳法索","code":"+226","short_code":"BF"},{"en":"Burma","cn":"缅甸","code":"+95","short_code":"MM"},{"en":"Burundi","cn":"布隆迪","code":"+257","short_code":"BI"},{"en":"Cambodia","cn":"柬埔寨","code":"+855","short_code":"KH"},{"en":"Cameroon","cn":"喀麦隆","code":"+237","short_code":"CM"},{"en":"Canada","cn":"加拿大","code":"+1","short_code":"CA"},{"en":"Cape Verde","cn":"佛得角","code":"+238","short_code":"CV"},{"en":"Cayman Is","cn":"开曼群岛","code":"+1345","short_code":"KY"},{"en":"Central African Republic","cn":"中非共和国","code":"+236","short_code":"CF"},{"en":"Chad","cn":"乍得","code":"+235","short_code":"TD"},{"en":"Chile","cn":"智利","code":"+56","short_code":"CL"},{"en":"China","cn":"中国","code":"+86","short_code":"CN"},{"en":"Colombia","cn":"哥伦比亚","code":"+57","short_code":"CO"},{"en":"Congo","cn":"刚果","code":"+242","short_code":"CG"},{"en":"Cook Is","cn":"库克群岛","code":"+682","short_code":"CK"},{"en":"Costa Rica","cn":"哥斯达黎加","code":"+506","short_code":"CR"},{"en":"Cuba","cn":"古巴","code":"+53","short_code":"CU"},{"en":"Cyprus","cn":"塞浦路斯","code":"+357","short_code":"CY"},{"en":"Czech Republic","cn":"捷克","code":"+420","short_code":"CZ"},{"en":"Denmark","cn":"丹麦","code":"+45","short_code":"DK"},{"en":"Djibouti","cn":"吉布提","code":"+253","short_code":"DJ"},{"en":"Dominica Rep","cn":"多米尼加共和国","code":"+1809","short_code":"DO"},{"en":"DR Congo","cn":"民主刚果","code":"+243","short_code":"CD"},{"en":"Ecuador","cn":"厄瓜多尔","code":"+593","short_code":"EC"},{"en":"Egypt","cn":"埃及","code":"+20","short_code":"EG"},{"en":"El Salvador","cn":"萨尔瓦多","code":"+503","short_code":"SV"},{"en":"Estonia","cn":"爱沙尼亚","code":"+372","short_code":"EE"},{"en":"Ethiopia","cn":"埃塞俄比亚","code":"+251","short_code":"ET"},{"en":"Falkland Islands","cn":"福克兰群岛","code":"+500","short_code":"FK"},{"en":"Fiji","cn":"斐济","code":"+679","short_code":"FJ"},{"en":"Finland","cn":"芬兰","code":"+358","short_code":"FI"},{"en":"France","cn":"法国","code":"+33","short_code":"FR"},{"en":"French Guiana","cn":"法属圭亚那","code":"+594","short_code":"GF"},{"en":"French Polynesia","cn":"法属玻利尼西亚","code":"+689","short_code":"PF"},{"en":"Gabon","cn":"加蓬","code":"+241","short_code":"GA"},{"en":"Gambia","cn":"冈比亚","code":"+220","short_code":"GM"},{"en":"Georgia","cn":"格鲁吉亚","code":"+995","short_code":"GE"},{"en":"Germany","cn":"德国","code":"+49","short_code":"DE"},{"en":"Ghana","cn":"加纳","code":"+233","short_code":"GH"},{"en":"Gibraltar","cn":"直布罗陀","code":"+350","short_code":"GI"},{"en":"Greece","cn":"希腊","code":"+30","short_code":"GR"},{"en":"Grenada","cn":"格林纳达","code":"+1473","short_code":"GD"},{"en":"Guam","cn":"关岛","code":"+1671","short_code":"GU"},{"en":"Guatemala","cn":"危地马拉","code":"+502","short_code":"GT"},{"en":"Guinea","cn":"几内亚","code":"+224","short_code":"GN"},{"en":"Guyana","cn":"圭亚那","code":"+592","short_code":"GY"},{"en":"Haiti","cn":"海地","code":"+509","short_code":"HT"},{"en":"Honduras","cn":"洪都拉斯","code":"+504","short_code":"HN"},{"en":"Hongkong","cn":"香港","code":"+852","short_code":"HK"},{"en":"Hungary","cn":"匈牙利","code":"+36","short_code":"HU"},{"en":"Iceland","cn":"冰岛","code":"+354","short_code":"IS"},{"en":"India","cn":"印度","code":"+91","short_code":"IN"},{"en":"Indonesia","cn":"印度尼西亚","code":"+62","short_code":"ID"},{"en":"Iran","cn":"伊朗","code":"+98","short_code":"IR"},{"en":"Iraq","cn":"伊拉克","code":"+964","short_code":"IQ"},{"en":"Ireland","cn":"爱尔兰","code":"+353","short_code":"IE"},{"en":"Israel","cn":"以色列","code":"+972","short_code":"IL"},{"en":"Italy","cn":"意大利","code":"+39","short_code":"IT"},{"en":"Ivory Coast","cn":"科特迪瓦","code":"+225","short_code":"CI"},{"en":"Jamaica","cn":"牙买加","code":"+1876","short_code":"JM"},{"en":"Japan","cn":"日本","code":"+81","short_code":"JP"},{"en":"Jordan","cn":"约旦","code":"+962","short_code":"JO"},{"en":"Kazakhstan","cn":"哈萨克斯坦","code":"+7","short_code":"KZ"},{"en":"Kenya","cn":"肯尼亚","code":"+254","short_code":"KE"},{"en":"Korea","cn":"韩国","code":"+82","short_code":"KR"},{"en":"Kosovo","cn":"科索沃","code":"+383","short_code":"XK"},{"en":"Kuwait","cn":"科威特","code":"+965","short_code":"KW"},{"en":"Kyrgyzstan","cn":"吉尔吉斯坦","code":"+996","short_code":"KG"},{"en":"Laos","cn":"老挝","code":"+856","short_code":"LA"},{"en":"Latvia","cn":"拉脱维亚","code":"+371","short_code":"LV"},{"en":"Lebanon","cn":"黎巴嫩","code":"+961","short_code":"LB"},{"en":"Lesotho","cn":"莱索托","code":"+266","short_code":"LS"},{"en":"Liberia","cn":"利比里亚","code":"+231","short_code":"LR"},{"en":"Libya","cn":"利比亚","code":"+218","short_code":"LY"},{"en":"Liechtenstein","cn":"列支敦士登","code":"+423","short_code":"LI"},{"en":"Lithuania","cn":"立陶宛","code":"+370","short_code":"LT"},{"en":"Luxembourg","cn":"卢森堡","code":"+352","short_code":"LU"},{"en":"Macao","cn":"澳门","code":"+853","short_code":"MO"},{"en":"Madagascar","cn":"马达加斯加","code":"+261","short_code":"MG"},{"en":"Malawi","cn":"马拉维","code":"+265","short_code":"MW"},{"en":"Malaysia","cn":"马来西亚","code":"+60","short_code":"MY"},{"en":"Maldives","cn":"马尔代夫","code":"+960","short_code":"MV"},{"en":"Mali","cn":"马里","code":"+223","short_code":"ML"},{"en":"Malta","cn":"马耳他","code":"+356","short_code":"MT"},{"en":"Mariana Is","cn":"马里亚那群岛","code":"+1670","short_code":"MP"},{"en":"Martinique","cn":"马提尼克","code":"+596","short_code":"MQ"},{"en":"Mauritius","cn":"毛里求斯","code":"+230","short_code":"MU"},{"en":"Mexico","cn":"墨西哥","code":"+52","short_code":"MX"},{"en":"Moldova","cn":"摩尔多瓦","code":"+373","short_code":"MD"},{"en":"Monaco","cn":"摩纳哥","code":"+377","short_code":"MC"},{"en":"Mongolia","cn":"蒙古","code":"+976","short_code":"MN"},{"en":"Montenegro","cn":"黑山","code":"+382","short_code":"ME"},{"en":"Montserrat Is","cn":"蒙特塞拉特岛","code":"+1664","short_code":"MS"},{"en":"Morocco","cn":"摩洛哥","code":"+212","short_code":"MA"},{"en":"Mozambique","cn":"莫桑比克","code":"+258","short_code":"MZ"},{"en":"Namibia","cn":"纳米比亚","code":"+264","short_code":"NA"},{"en":"Nauru","cn":"瑙鲁","code":"+674","short_code":"NR"},{"en":"Nepal","cn":"尼泊尔","code":"+977","short_code":"NP"},{"en":"Netherlands","cn":"荷兰","code":"+31","short_code":"NL"},{"en":"Netherlands Antilles","cn":"荷属安的列斯","code":"+599","short_code":"AN"},{"en":"New Zealand","cn":"新西兰","code":"+64","short_code":"NZ"},{"en":"Nicaragua","cn":"尼加拉瓜","code":"+505","short_code":"NI"},{"en":"Niger","cn":"尼日尔","code":"+227","short_code":"NE"},{"en":"Nigeria","cn":"尼日利亚","code":"+234","short_code":"NG"},{"en":"North Korea","cn":"朝鲜","code":"+850","short_code":"KP"},{"en":"North Macedonia","cn":"北马其顿","code":"+389","short_code":"MK"},{"en":"Norway","cn":"挪威","code":"+47","short_code":"NO"},{"en":"Oman","cn":"阿曼","code":"+968","short_code":"OM"},{"en":"Pakistan","cn":"巴基斯坦","code":"+92","short_code":"PK"},{"en":"Palestine","cn":"巴勒斯坦","code":"+970","short_code":"PS"},{"en":"Panama","cn":"巴拿马","code":"+507","short_code":"PA"},{"en":"Papua New Guinea","cn":"巴布亚新几内亚","code":"+675","short_code":"PG"},{"en":"Paraguay","cn":"巴拉圭","code":"+595","short_code":"PY"},{"en":"Peru","cn":"秘鲁","code":"+51","short_code":"PE"},{"en":"Philippines","cn":"菲律宾","code":"+63","short_code":"PH"},{"en":"Poland","cn":"波兰","code":"+48","short_code":"PL"},{"en":"Portugal","cn":"葡萄牙","code":"+351","short_code":"PT"},{"en":"Puerto Rico","cn":"波多黎各","code":"+1787","short_code":"PR"},{"en":"Qatar","cn":"卡塔尔","code":"+974","short_code":"QA"},{"en":"Republic of Croatia","cn":"克罗地亚共和国","code":"+385","short_code":"HR"},{"en":"Reunion","cn":"留尼旺","code":"+262","short_code":"RE"},{"en":"Romania","cn":"罗马尼亚","code":"+40","short_code":"RO"},{"en":"Russia","cn":"俄罗斯","code":"+7","short_code":"RU"},{"en":"Saint Lucia","cn":"圣卢西亚","code":"+1758","short_code":"LC"},{"en":"Saint Vincent","cn":"圣文森特","code":"+1784","short_code":"VC"},{"en":"Samoa","cn":"萨摩亚","code":"+685","short_code":"WS"},{"en":"San Marino","cn":"圣马力诺","code":"+378","short_code":"SM"},{"en":"Sao Tome and Principe","cn":"圣多美和普林西比","code":"+239","short_code":"ST"},{"en":"Saudi Arabia","cn":"沙特阿拉伯","code":"+966","short_code":"SA"},{"en":"Senegal","cn":"塞内加尔","code":"+221","short_code":"SN"},{"en":"Seychelles","cn":"塞舌尔","code":"+248","short_code":"SC"},{"en":"Sierra Leone","cn":"塞拉利昂","code":"+232","short_code":"SL"},{"en":"Singapore","cn":"新加坡","code":"+65","short_code":"SG"},{"en":"Slovakia","cn":"斯洛伐克","code":"+421","short_code":"SK"},{"en":"Slovenia","cn":"斯洛文尼亚","code":"+386","short_code":"SI"},{"en":"Solomon Is","cn":"所罗门群岛","code":"+677","short_code":"SB"},{"en":"Somali","cn":"索马里","code":"+252","short_code":"SO"},{"en":"South Africa","cn":"南非","code":"+27","short_code":"ZA"},{"en":"South Sudan","cn":"南苏丹","code":"+211","short_code":"SS"},{"en":"Spain","cn":"西班牙","code":"+34","short_code":"ES"},{"en":"Sri Lanka","cn":"斯里兰卡","code":"+94","short_code":"LK"},{"en":"Sudan","cn":"苏丹","code":"+249","short_code":"SD"},{"en":"Suriname","cn":"苏里南","code":"+597","short_code":"SR"},{"en":"Swaziland","cn":"斯威士兰","code":"+268","short_code":"SZ"},{"en":"Sweden","cn":"瑞典","code":"+46","short_code":"SE"},{"en":"Switzerland","cn":"瑞士","code":"+41","short_code":"CH"},{"en":"Syria","cn":"叙利亚","code":"+963","short_code":"SY"},{"en":"Taiwan","cn":"台湾省","code":"+886","short_code":"TW"},{"en":"Tajikstan","cn":"塔吉克斯坦","code":"+992","short_code":"TJ"},{"en":"Tanzania","cn":"坦桑尼亚","code":"+255","short_code":"TZ"},{"en":"Thailand","cn":"泰国","code":"+66","short_code":"TH"},{"en":"Timor-Leste","cn":"东帝汶","code":"+670","short_code":"TL"},{"en":"Togo","cn":"多哥","code":"+228","short_code":"TG"},{"en":"Tonga","cn":"汤加","code":"+676","short_code":"TO"},{"en":"Trinidad and Tobago","cn":"特立尼达和多巴哥","code":"+1868","short_code":"TT"},{"en":"Tunisia","cn":"突尼斯","code":"+216","short_code":"TN"},{"en":"Turkey","cn":"土耳其","code":"+90","short_code":"TR"},{"en":"Turkmenistan","cn":"土库曼斯坦","code":"+993","short_code":"TM"},{"en":"Uganda","cn":"乌干达","code":"+256","short_code":"UG"},{"en":"Ukraine","cn":"乌克兰","code":"+380","short_code":"UA"},{"en":"United Arab Emirates","cn":"阿拉伯联合酋长国","code":"+971","short_code":"AE"},{"en":"United Kingdom","cn":"英国","code":"+44","short_code":"GB"},{"en":"United States of America","cn":"美国","code":"+1","short_code":"US"},{"en":"Uruguay","cn":"乌拉圭","code":"+598","short_code":"UY"},{"en":"Uzbekistan","cn":"乌兹别克斯坦","code":"+998","short_code":"UZ"},{"en":"Vatican City","cn":"梵蒂冈","code":"+379","short_code":"VA"},{"en":"Venezuela","cn":"委内瑞拉","code":"+58","short_code":"VE"},{"en":"Vietnam","cn":"越南","code":"+84","short_code":"VN"},{"en":"Yemen","cn":"也门","code":"+967","short_code":"YE"},{"en":"Zambia","cn":"赞比亚","code":"+260","short_code":"ZM"},{"en":"Zimbabwe","cn":"津巴布韦","code":"+263","short_code":"ZW"}]')},"74d96":function(e,t,a){"use strict";a("6eed")},7703:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"trademark-case-form"},[t("div",{staticClass:"form-header"},[t("el-button-group",[t("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.handleCancel}},[e._v("取消")]),e.showSaveButton?t("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:e.handleSave}},[e._v("保存")]):e._e()],1)],1),t("el-form",{ref:"form",staticClass:"case-form",attrs:{model:e.form,rules:e.rules,"label-width":"120px",disabled:e.isReadOnly}},[t("el-row",[t("el-col",{attrs:{span:16}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-input",{attrs:{placeholder:"输入客户名称"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"业务人员",prop:"businessPerson"}},[t("SelectPerson",{attrs:{multiple:!1,disabled:e.isReadOnly,placeholder:"请选择业务人员"},on:{change:e.handleBusinessPersonChange},model:{value:e.form.businessPerson,callback:function(t){e.$set(e.form,"businessPerson",t)},expression:"form.businessPerson"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"乙方签约公司"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.companyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"立项编号"}},[t("el-input",{attrs:{placeholder:"输入立项编号"},model:{value:e.form.proposalNo,callback:function(t){e.$set(e.form,"proposalNo",t)},expression:"form.proposalNo"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"售前支持"}},[t("SelectPerson",{attrs:{multiple:!1,disabled:e.isReadOnly,placeholder:"请选择售前支持人员"},on:{change:e.handlePreSalesChange},model:{value:e.form.preSales,callback:function(t){e.$set(e.form,"preSales",t)},expression:"form.preSales"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"技术主导"}},[t("SelectPerson",{attrs:{multiple:!1,disabled:e.isReadOnly,placeholder:"请选择技术主导"},on:{change:e.handleTechLeaderChange},model:{value:e.form.technicalDirector,callback:function(t){e.$set(e.form,"technicalDirector",t)},expression:"form.technicalDirector"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"业务类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.businessType,callback:function(t){e.$set(e.form,"businessType",t)},expression:"form.businessType"}},e._l(e.businessTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.applyType,callback:function(t){e.$set(e.form,"applyType",t)},expression:"form.applyType"}},e._l(e.applyTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"预项名称",prop:"caseName"}},[t("el-input",{attrs:{placeholder:"输入预项名称"},model:{value:e.form.caseName,callback:function(t){e.$set(e.form,"caseName",t)},expression:"form.caseName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"商标类别"}},[t("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.form.trademarkCategory,callback:function(t){e.$set(e.form,"trademarkCategory",t)},expression:"form.trademarkCategory"}},e._l(e.trademarkCategoryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"注册号"}},[t("el-input",{attrs:{placeholder:"输入注册号"},model:{value:e.form.registrationNumber,callback:function(t){e.$set(e.form,"registrationNumber",t)},expression:"form.registrationNumber"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"公告日"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日"},model:{value:e.form.publicationDate,callback:function(t){e.$set(e.form,"publicationDate",t)},expression:"form.publicationDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"合同编号"}},[t("el-input",{attrs:{placeholder:"不可编辑",disabled:""},model:{value:e.form.contractNumber,callback:function(t){e.$set(e.form,"contractNumber",t)},expression:"form.contractNumber"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请国家(地区)"}},[t("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.form.applyCountry,callback:function(t){e.$set(e.form,"applyCountry",t)},expression:"form.applyCountry"}},e._l(e.countryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"项目流向"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.caseDirection,callback:function(t){e.$set(e.form,"caseDirection",t)},expression:"form.caseDirection"}},[t("el-option",{attrs:{label:"内-内",value:"内-内"}}),t("el-option",{attrs:{label:"内-外",value:"内-外"}}),t("el-option",{attrs:{label:"外-内",value:"外-内"}}),t("el-option",{attrs:{label:"外-外",value:"外-外"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"项目状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.projectStatus,callback:function(t){e.$set(e.form,"projectStatus",t)},expression:"form.projectStatus"}},e._l(e.projectStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请方式"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.applicationMethod,callback:function(t){e.$set(e.form,"applicationMethod",t)},expression:"form.applicationMethod"}},[t("el-option",{attrs:{label:"电子申请",value:"电子申请"}}),t("el-option",{attrs:{label:"纸质申请",value:"纸质申请"}}),t("el-option",{attrs:{label:"电子或纸件",value:"电子或纸件"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"声音商标"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.soundTrademark,callback:function(t){e.$set(e.form,"soundTrademark",t)},expression:"form.soundTrademark"}},[t("el-option",{attrs:{label:"是",value:"是"}}),t("el-option",{attrs:{label:"否",value:"否"}})],1)],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",[t("div",{staticClass:"trademark-container"},[t("div",{staticClass:"trademark-upload-section"},[t("el-upload",{staticClass:"trademark-upload",attrs:{action:"#","auto-upload":!1,"file-list":e.fileList,"list-type":"picture-card","on-change":e.handleFileChange,"show-file-list":!1,accept:"image/*"}},[e.trademarkImage?t("div",{staticClass:"trademark-image-preview"},[t("img",{attrs:{src:e.trademarkImage,alt:"商标图片"}})]):t("i",{staticClass:"el-icon-plus"})])],1),t("div",{staticClass:"trademark-info-section"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.triggerUpload}},[e._v("上传")]),t("el-button",{attrs:{size:"mini"},on:{click:e.deleteImage}},[e._v("删除")])],1)])])],1)],1),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"是否三维标志"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.is3DMark,callback:function(t){e.$set(e.form,"is3DMark",t)},expression:"form.is3DMark"}},[t("el-option",{attrs:{label:"是",value:"是"}}),t("el-option",{attrs:{label:"否",value:"否"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"颜色形式"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.colorFormat,callback:function(t){e.$set(e.form,"colorFormat",t)},expression:"form.colorFormat"}},[t("el-option",{attrs:{label:"黑白",value:"黑白"}}),t("el-option",{attrs:{label:"彩色",value:"彩色"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"指定颜色"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.specifiedColor,callback:function(t){e.$set(e.form,"specifiedColor",t)},expression:"form.specifiedColor"}},[t("el-option",{attrs:{label:"是",value:"是"}}),t("el-option",{attrs:{label:"否",value:"否"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"初审公告日"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日"},model:{value:e.form.preliminaryAnnouncementDate,callback:function(t){e.$set(e.form,"preliminaryAnnouncementDate",t)},expression:"form.preliminaryAnnouncementDate"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"初审公告期"}},[t("el-input",{attrs:{placeholder:"输入初审公告期"},model:{value:e.form.preliminaryAnnouncementPeriod,callback:function(t){e.$set(e.form,"preliminaryAnnouncementPeriod",t)},expression:"form.preliminaryAnnouncementPeriod"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"续展日"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日"},model:{value:e.form.renewalDate,callback:function(t){e.$set(e.form,"renewalDate",t)},expression:"form.renewalDate"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"终止日"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日"},model:{value:e.form.endDate,callback:function(t){e.$set(e.form,"endDate",t)},expression:"form.endDate"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户文号"}},[t("el-input",{attrs:{placeholder:"输入客户文号"},model:{value:e.form.customerFileNumber,callback:function(t){e.$set(e.form,"customerFileNumber",t)},expression:"form.customerFileNumber"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"商标说明"}},[t("el-input",{attrs:{type:"textarea",placeholder:"输入商标说明",rows:3},model:{value:e.form.trademarkDescription,callback:function(t){e.$set(e.form,"trademarkDescription",t)},expression:"form.trademarkDescription"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"项目备注"}},[t("el-input",{attrs:{type:"textarea",placeholder:"输入项目备注",rows:3},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),t("el-form-item",{attrs:{label:"申请人"}},[t("SelectApplicant",{attrs:{multiple:!0,disabled:e.isReadOnly,"customer-id":e.customerIdFromRoute},on:{change:e.handleApplicantChange},model:{value:e.selectedApplicants,callback:function(t){e.selectedApplicants=t},expression:"selectedApplicants"}})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.applicantList,border:""}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"申请人名称","min-width":"180"}}),t("el-table-column",{attrs:{prop:"creditCode",label:"信用代码"}}),t("el-table-column",{attrs:{prop:"province",label:"省","min-width":"100"}}),t("el-table-column",{attrs:{prop:"city",label:"市","min-width":"100"}}),e.isReadOnly?e._e():t("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.deleteApplicant(a.$index)}}},[e._v("删除")])]}}],null,!1,1947398252)})],1),t("el-form-item",{staticClass:"process-items",attrs:{label:"处理事项"}},[0!==e.processItems.length||e.isReadOnly?e._e():t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addProcessItem}},[e._v("新增处理事项")]),e.processItems.length>0&&!e.isReadOnly?t("span",{staticStyle:{color:"#909399","font-size":"12px"}},[e._v(" 立项阶段只能添加一个处理事项，可以编辑现有处理事项 ")]):e._e()],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processItems,border:""}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t("el-table-column",{attrs:{prop:"item",label:"处理事项"}}),t("el-table-column",{attrs:{prop:"department",label:"处理部门","min-width":"120"}}),t("el-table-column",{attrs:{prop:"handler",label:"事项处理人","min-width":"120"}}),t("el-table-column",{attrs:{prop:"isReject",label:"是否配案","min-width":"100"}}),e.isReadOnly?e._e():t("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.editProcessItem(a.$index)}}},[e._v("编辑")])]}}],null,!1,2317647656)})],1),t("ProcessItemDialog",{attrs:{"process-item-data":e.currentProcessItemData,"case-type":"商标","case-id":e.caseId,"contract-fee-data":e.contractFeeData,"contract-file-data":e.contractFileData},on:{save:e.handleProcessItemSave,delete:e.handleProcessItemDelete},model:{value:e.processItemDialogVisible,callback:function(t){e.processItemDialogVisible=t},expression:"processItemDialogVisible"}})],1),e.shouldShowWorkflowSection?t("div",{staticClass:"workflow-section"},[t("div",{staticClass:"section-title"},[t("h3",[e._v("审批流程")]),t("el-divider")],1),t("div",{staticClass:"workflow-container"},[t("WorkflowProgress",{ref:"workflowProgress",attrs:{"business-type":"case","business-id":e.caseId,"can-start":e.canStartWorkflow,"can-cancel":e.canCancelWorkflow,"created-by":e.form.createdBy},on:{"workflow-started":e.handleWorkflowStarted,"workflow-cancelled":e.handleWorkflowCancelled,"workflow-restarted":e.handleWorkflowRestarted,"task-processed":e.handleTaskProcessed}})],1)]):e._e()],1)},s=[],r=(a("d9e2"),a("e9f5"),a("910d"),a("7d54"),a("ab43"),a("582a")),n=a("512b"),c=a("21a4"),l=a("48d0"),i=a("f6b0"),d=a("d4f4"),u=a("89c4"),m=a("d3ff"),p=a("5f87"),h=a("a417"),f={name:"TrademarkCaseForm",components:{SelectApplicant:r["a"],SelectPerson:n["a"],ProcessItemDialog:c["a"],WorkflowProgress:l["a"]},props:{id:{type:[String,Number],default:""},type:{type:String,default:"draft"},customerId:{type:[String,Number],default:""},contractId:{type:[String,Number],default:""}},data(){return{loading:!1,isReadOnly:!1,isFromPending:!1,currentCaseStatus:null,form:{customerName:"",businessPerson:"",proposalNo:"",company:"",technicalDirector:"",preSales:"",applyType:"",businessType:"",trademarkCategory:"",caseName:"",registrationNumber:"",publicationDate:"",contractNumber:"",applyCountry:"",projectStatus:"",applicationMethod:"",caseDirection:"",soundTrademark:"",specifiedColor:"",is3DMark:"",colorFormat:"",preliminaryAnnouncementDate:"",preliminaryAnnouncementPeriod:"",renewalDate:"",endDate:"",customerFileNumber:"",trademarkDescription:"",remark:""},rules:{customerName:[{required:!0,message:"请输入客户名称",trigger:"blur"}],caseName:[{required:!0,message:"请输入预项名称",trigger:"blur"}],businessPerson:[{required:!0,message:"请选择业务人员",trigger:"change"}],proposalNo:[{required:!0,message:"请输入立项编号",trigger:"blur"}]},businessPersonOptions:[],companyOptions:[],businessTypeOptions:[],applyTypeOptions:[],countryOptions:[],projectStatusOptions:[],techLeaderOptions:[],preSalesOptions:[],trademarkCategoryOptions:[],applicantList:[],selectedApplicants:[],processItems:[],fileList:[],processItemDialogVisible:!1,currentProcessItemData:{},trademarkImage:"",trademarkImageUrl:"",pendingImageFile:null,customerInfo:null,contractInfo:null,caseId:"",customerIdFromRoute:"",contractIdFromRoute:""}},computed:{showSaveButton(){const e=this.$route.query.from||this.$route.params.from;return"draft"===e||"pending"===e||!e},canStartWorkflow(){const e="草稿"===this.form.caseStatus||"处理中"===this.form.caseStatus,t=Object(p["j"])(),a=t?t.id:null,o=this.form.createdBy===a||"草稿"===this.form.caseStatus&&!this.form.createdBy;return console.log("TrademarkCaseForm canStartWorkflow check:",{caseStatus:this.form.caseStatus,caseStatusType:typeof this.form.caseStatus,createdBy:this.form.createdBy,createdByType:typeof this.form.createdBy,currentUserId:a,userInfo:t,canStartByStatus:e,isCreator:o,finalResult:e&&o}),e&&o},canCancelWorkflow(){var e;return("立项中"===this.form.caseStatus||"待处理"===this.form.caseStatus)&&this.form.createdBy===(null===(e=this.$store.state.user)||void 0===e?void 0:e.id)},shouldShowWorkflowSection(){return this.caseId&&"new"!==this.caseId},showReturnButton(){const e=this.$route.query.from||this.$route.params.from;return"to-be-pending"===e}},watch:{selectedApplicants:{handler(e){this.handleApplicantChange(e)},deep:!0},customerIdFromRoute:{handler(e){console.log("TrademarkCaseForm: customerIdFromRoute变化:",e)},immediate:!0}},async created(){this.caseId=this.id||this.$route.query.id||this.$route.params.id,this.customerIdFromRoute=this.customerId||this.$route.query.customerId||this.$route.query.customer_id,this.contractIdFromRoute=this.contractId||this.$route.query.contractId||this.$route.query.contract_id,this.checkPageStatus(),console.log("初始化参数:",{caseId:this.caseId,customerIdFromRoute:this.customerIdFromRoute,contractIdFromRoute:this.contractIdFromRoute,isReadOnly:this.isReadOnly,isFromPending:this.isFromPending}),await this.initializeData(),this.caseId?await this.fetchCaseDetail():this.prefillDefaultData()},methods:{checkPageStatus(){const e=this.$route.query.from||this.$route.params.from;switch(console.log("TrademarkCaseForm: 检查页面状态, from:",e),e){case"draft":case"pending":this.isReadOnly=!1,this.isFromPending=!1;break;case"to-be-pending":this.isReadOnly=!0,this.isFromPending=!0;break;case"to-be-filed":case"filed":this.isReadOnly=!0,this.isFromPending=!1;break;default:this.isReadOnly=!1,this.isFromPending=!1}console.log("TrademarkCaseForm: 页面状态设置完成",{isReadOnly:this.isReadOnly,isFromPending:this.isFromPending})},adjustPageStatusByCase(e){3!==e.case_status&&"to-be-pending"!==e.case_status||(this.isReadOnly=!0,this.isFromPending=!0)},async initializeData(){this.loading=!0;try{await Promise.all([this.loadCountryOptions(),this.loadBusinessTypeOptions(),this.loadApplyTypeOptions(),this.loadCompanyOptions(),this.loadProjectStatusOptions(),this.loadTrademarkCategoryOptions()]),this.customerIdFromRoute?await this.loadCustomerInfo():console.warn("未提供客户ID，申请人功能可能无法正常工作"),this.contractIdFromRoute&&await this.loadContractInfo()}catch(e){console.error("初始化数据失败:",e),this.$message.error("初始化数据失败，请刷新页面重试")}finally{this.loading=!1}},async fetchCaseDetail(){if(this.caseId){this.loading=!0;try{const e=await d["a"].getCase(this.caseId);if(e.data&&e.data.success){const t=e.data.data;this.currentCaseStatus=t.case_status,this.populateFormData(t),this.adjustPageStatusByCase(t)}else this.$message.error("获取项目详情失败")}catch(e){console.error("获取项目详情失败:",e),this.$message.error("获取项目详情失败，请重试")}finally{this.loading=!1}}},prefillDefaultData(){var e;this.form.proposalNo=this.generateProposalNo(),this.form.applicationMethod="电子申请",this.form.caseDirection="内-内",this.form.applyCountry="中国",this.form.projectStatus="商标-草稿",this.form.soundTrademark="否",this.form.specifiedColor="否",this.form.is3DMark="否",this.form.colorFormat="黑白",this.form.caseStatus="草稿",this.form.createdBy=null===(e=this.$store.state.user)||void 0===e?void 0:e.id,this.customerInfo&&(this.form.customerName=this.customerInfo.name||this.customerInfo.customer_name||"",this.form.businessPerson=this.customerInfo.business_person_id||""),this.contractInfo&&(this.form.contractNumber=this.contractInfo.contract_no||this.contractInfo.contract_number||"")},populateFormData(e){var t,a,o;if(e.customer_id&&!this.customerIdFromRoute&&(this.customerIdFromRoute=e.customer_id,console.log("TrademarkCaseForm: 从项目详情更新customerIdFromRoute:",this.customerIdFromRoute)),console.log("TrademarkCaseForm: 填充表单数据",e),console.log("TrademarkCaseForm: 技术主导数据检查",{tech_leader:e.tech_leader,techLeader:e.techLeader,techLeaderType:typeof e.tech_leader,finalValue:e.tech_leader?String(e.tech_leader):e.techLeader?String(e.techLeader.id):""}),this.form={customerName:(null===(t=e.customer)||void 0===t?void 0:t.customer_name)||e.customerName||"",businessPerson:e.business_person_id||(e.businessPerson?e.businessPerson.id:"")||"",proposalNo:e.proposal_no||e.case_code||this.generateProposalNo(),company:e.company||this.getDefaultCompany(),technicalDirector:e.tech_leader?String(e.tech_leader):e.techLeader?String(e.techLeader.id):"",preSales:e.presale_support||"",applyType:e.application_type||"",businessType:e.case_subtype||e.business_type||"",trademarkCategory:e.trademark_category||"",caseName:e.case_name||"",registrationNumber:e.registration_no||"",publicationDate:e.publication_date||"",contractNumber:(null===(a=e.contract)||void 0===a?void 0:a.contract_code)||e.contract_number||(null===(o=this.contractInfo)||void 0===o?void 0:o.contract_no)||"",applyCountry:e.country_code||"中国",projectStatus:this.mapNumberToProjectStatus(e.case_status)||"商标-草稿",caseStatus:this.mapNumberToStatusText(e.case_status||1),createdBy:e.created_by||e.createdBy,applicationMethod:e.application_method||"电子申请",caseDirection:e.case_direction||"内-内",soundTrademark:e.sound_trademark||"否",specifiedColor:e.specified_color||"否",is3DMark:e.is_3d_mark||"否",colorFormat:e.color_format||"黑白",preliminaryAnnouncementDate:e.preliminary_announcement_date||"",preliminaryAnnouncementPeriod:e.preliminary_announcement_period||"",renewalDate:e.renewal_date||"",endDate:e.end_date||"",customerFileNumber:e.customer_file_number||"",trademarkDescription:e.trademark_description||"",remark:e.remarks||e.remark||""},console.log("TrademarkCaseForm: 填充后的表单数据",this.form),this.$nextTick(()=>{this.form.technicalDirector&&console.log("TrademarkCaseForm: 强制更新技术主导值",this.form.technicalDirector)}),e.applicant_info&&Array.isArray(e.applicant_info)&&(this.applicantList=e.applicant_info,this.selectedApplicants=[...e.applicant_info]),e.process_items&&Array.isArray(e.process_items)?this.processItems=e.process_items:this.caseId&&this.loadProcessItems(),e.files&&Array.isArray(e.files)&&(this.fileList=e.files),e.trademark_image){if(this.trademarkImageUrl=e.trademark_image,e.trademark_image.startsWith("http"))this.trademarkImage=e.trademark_image;else{const t=h["a"].host||"http://127.0.0.1:8017";this.trademarkImage=`${t}/storage/${e.trademark_image}`}console.log("TrademarkCaseForm: 商标图片回显",{original:e.trademark_image,apiHost:h["a"].host,display:this.trademarkImage})}},generateProposalNo(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),s=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return`TM${t}${a}${o}${s}`},getDefaultCompany(){return this.companyOptions.length>0?this.companyOptions[0].value:""},async handleSave(){const e=this.$route.query.from||this.$route.params.from;return"pending"===e?this.saveCase("draft"):this.saveCase()},async saveCase(e=null){try{const s=await this.$refs.form.validate();if(!s)return;this.loading=!0;const n=this.buildFormData();let c;if(null!==e&&(n.case_status=e),console.log("提交的表单数据:",n),c=this.caseId?await d["a"].updateCase(this.caseId,n):await d["a"].createCase(n),c.data&&c.data.success){const a="draft"===e?"保存":"提交";var t;if(this.$message.success(`项目${a}成功`),!this.caseId&&c.data.data&&c.data.data.id)this.caseId=c.data.data.id,this.form.createdBy=c.data.data.created_by||(null===(t=this.$store.state.user)||void 0===t?void 0:t.id),this.form.caseStatus=this.mapNumberToStatusText(c.data.data.case_status||1);if(this.pendingImageFile&&this.caseId)try{await this.uploadTrademarkImage(this.pendingImageFile),this.pendingImageFile=null}catch(r){console.error("上传图片失败:",r),this.$message.warning("项目保存成功，但图片上传失败，请重新上传")}return c}var a,o;throw console.error("API返回错误:",c.data),this.$message.error((null===(a=c.data)||void 0===a?void 0:a.message)||"保存失败"),new Error((null===(o=c.data)||void 0===o?void 0:o.message)||"保存失败")}catch(r){var s;if(console.error("保存项目失败:",r),r.response&&r.response.data)console.error("错误详情:",r.response.data),this.$message.error("保存失败: "+(r.response.data.message||(null===(s=r.response.data.errors)||void 0===s||null===(s=s.case_type)||void 0===s?void 0:s[0])||"未知错误"));else this.$message.error("保存失败，请重试");throw r}finally{this.loading=!1}},handleCancel(){this.$router.go(-1)},handleWorkflowStarted(){this.$message.success("审批流程已发起"),setTimeout(()=>{this.$refs.workflowProgress&&this.$refs.workflowProgress.refresh(),this.loadCaseData()},2e3)},handleWorkflowCancelled(){this.$message.success("审批流程已取消"),this.$refs.workflowProgress&&this.$refs.workflowProgress.refresh(),this.loadCaseData()},handleWorkflowRestarted(){this.$message.success("审批流程已重新发起"),this.$refs.workflowProgress&&this.$refs.workflowProgress.refresh(),this.loadCaseData()},handleTaskProcessed(){this.loadCaseData(),this.$refs.workflowProgress&&this.$refs.workflowProgress.refresh()},async loadCaseData(){await this.fetchCaseDetail()},mapNumberToStatusText(e){const t={1:"草稿",2:"待立项",3:"已立项",4:"处理中"};return t[e]||"未知状态"},async handleReturn(){this.$confirm("确定要退回该项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{this.loading=!0;const e=await d["a"].updateCase(this.caseId,{case_status:"draft"});e.data&&e.data.success?(this.$message.success("项目已退回至草稿状态"),this.$router.go(-1)):this.$message.error("退回失败")}catch(e){console.error("退回失败:",e),this.$message.error("退回失败，请重试")}finally{this.loading=!1}}).catch(()=>{})},loadCountryOptions(){this.countryOptions=m["a"].map(e=>({label:e.cn,value:e.cn,shortCode:e.short_code}))},async loadBusinessTypeOptions(){try{const e=await u["a"].businessService.getList({category:"商标",status:1,page:1,limit:999});e.data&&0===e.data.code&&(this.businessTypeOptions=e.data.data.list.map(e=>({label:e.name,value:e.name})))}catch(e){console.error("加载业务类型选项失败:",e),this.businessTypeOptions=[{label:"商标注册",value:"商标注册"},{label:"商标变更",value:"商标变更"},{label:"商标续展",value:"商标续展"},{label:"商标转让",value:"商标转让"},{label:"商标许可",value:"商标许可"}]}},async loadApplyTypeOptions(){try{const e=await u["a"].applyType.getList({case_type:"商标",status:1,page:1,limit:999});e.data&&0===e.data.code&&(this.applyTypeOptions=e.data.data.list.map(e=>({label:e.name,value:e.name})))}catch(e){console.error("加载申请类型选项失败:",e),this.applyTypeOptions=[{label:"国内申请",value:"国内申请"},{label:"国际申请",value:"国际申请"},{label:"马德里申请",value:"马德里申请"}]}},async loadCompanyOptions(){try{this.companyOptions=[{label:"北京知识产权代理有限公司",value:"北京知识产权代理有限公司"},{label:"上海专利事务所",value:"上海专利事务所"},{label:"深圳知识产权服务有限公司",value:"深圳知识产权服务有限公司"}]}catch(e){console.error("加载公司选项失败:",e)}},loadProjectStatusOptions(){this.projectStatusOptions=[{label:"商标-草稿",value:"商标-草稿"},{label:"商标-已递交",value:"商标-已递交"},{label:"商标-受理",value:"商标-受理"},{label:"商标-补正",value:"商标-补正"},{label:"商标-审查",value:"商标-审查"},{label:"商标-初审公告",value:"商标-初审公告"},{label:"商标-异议",value:"商标-异议"},{label:"商标-注册公告",value:"商标-注册公告"},{label:"商标-驳回",value:"商标-驳回"},{label:"商标-注册",value:"商标-注册"},{label:"商标-结案",value:"商标-结案"}]},loadTrademarkCategoryOptions(){this.trademarkCategoryOptions=[{label:"第1类-化学原料",value:"第1类"},{label:"第2类-颜料油漆",value:"第2类"},{label:"第3类-化妆品",value:"第3类"},{label:"第4类-燃料油脂",value:"第4类"},{label:"第5类-医药制品",value:"第5类"},{label:"第6类-金属制品",value:"第6类"},{label:"第7类-机械设备",value:"第7类"},{label:"第8类-工具器械",value:"第8类"},{label:"第9类-电子产品",value:"第9类"},{label:"第10类-医疗器械",value:"第10类"},{label:"第11类-灯具家电",value:"第11类"},{label:"第12类-运输工具",value:"第12类"},{label:"第13类-军火烟火",value:"第13类"},{label:"第14类-珠宝钟表",value:"第14类"},{label:"第15类-乐器",value:"第15类"},{label:"第16类-文具用品",value:"第16类"},{label:"第17类-橡胶制品",value:"第17类"},{label:"第18类-皮革皮具",value:"第18类"},{label:"第19类-建筑材料",value:"第19类"},{label:"第20类-家具",value:"第20类"},{label:"第21类-厨房洁具",value:"第21类"},{label:"第22类-绳网袋篷",value:"第22类"},{label:"第23类-纱线丝",value:"第23类"},{label:"第24类-布料床单",value:"第24类"},{label:"第25类-服装鞋帽",value:"第25类"},{label:"第26类-纽扣拉链",value:"第26类"},{label:"第27类-地毯席垫",value:"第27类"},{label:"第28类-健身器材",value:"第28类"},{label:"第29类-食品",value:"第29类"},{label:"第30类-方便食品",value:"第30类"},{label:"第31类-饲料种籽",value:"第31类"},{label:"第32类-啤酒饮料",value:"第32类"},{label:"第33类-酒",value:"第33类"},{label:"第34类-烟草烟具",value:"第34类"},{label:"第35类-广告销售",value:"第35类"},{label:"第36类-金融物管",value:"第36类"},{label:"第37类-建筑修理",value:"第37类"},{label:"第38类-通讯服务",value:"第38类"},{label:"第39类-运输贮藏",value:"第39类"},{label:"第40类-材料加工",value:"第40类"},{label:"第41类-教育娱乐",value:"第41类"},{label:"第42类-网站服务",value:"第42类"},{label:"第43类-餐饮住宿",value:"第43类"},{label:"第44类-医疗园艺",value:"第44类"},{label:"第45类-社会服务",value:"第45类"}]},async loadCustomerInfo(){if(this.customerIdFromRoute)try{const e=await i["a"].getCustomerDetail(this.customerIdFromRoute);e.data&&e.data.success&&(this.customerInfo=e.data.data,this.form.customerName=this.customerInfo.name||this.customerInfo.customer_name||"",this.form.businessPerson=this.customerInfo.business_person_id||"")}catch(e){console.error("加载客户信息失败:",e),this.$message.warning("加载客户信息失败，请检查客户ID是否正确")}},async loadContractInfo(){this.contractIdFromRoute},buildFormData(){const e={case_type:2,case_name:this.form.caseName,customer_id:this.customerIdFromRoute?parseInt(this.customerIdFromRoute):null,contract_id:this.contractIdFromRoute?parseInt(this.contractIdFromRoute):null,proposal_no:this.form.proposalNo,customer_name:this.form.customerName,business_person_id:this.form.businessPerson?parseInt(this.form.businessPerson):null,company:this.form.company,case_subtype:this.form.businessType,application_type:this.form.applyType,presale_support:this.form.preSales,tech_leader:this.form.technicalDirector?parseInt(this.form.technicalDirector):null,trademark_category:this.form.trademarkCategory,registration_no:this.form.registrationNumber,publication_date:this.form.publicationDate,contract_number:this.form.contractNumber,country_code:this.form.applyCountry,case_status:this.mapProjectStatusToNumber(this.form.projectStatus),application_method:this.form.applicationMethod,case_direction:this.form.caseDirection,sound_trademark:this.form.soundTrademark,specified_color:this.form.specifiedColor,is_3d_mark:this.form.is3DMark,color_format:this.form.colorFormat,preliminary_announcement_date:this.form.preliminaryAnnouncementDate,preliminary_announcement_period:this.form.preliminaryAnnouncementPeriod,renewal_date:this.form.renewalDate,end_date:this.form.endDate,customer_file_number:this.form.customerFileNumber,trademark_description:this.form.trademarkDescription,remarks:this.form.remark,applicant_info:this.applicantList,process_items:this.processItems,trademark_image:this.trademarkImageUrl};return console.log("TrademarkCaseForm: 构建的表单数据",e),console.log("TrademarkCaseForm: 数据类型检查",{customer_id:typeof e.customer_id,contract_id:typeof e.contract_id,business_person_id:typeof e.business_person_id,tech_leader:typeof e.tech_leader}),Object.keys(e).forEach(t=>{""!==e[t]&&null!==e[t]&&void 0!==e[t]||["case_type","case_name","customer_id"].includes(t)||delete e[t]}),e},mapProjectStatusToNumber(e){const t={"商标-草稿":1,"商标-已递交":2,"商标-受理":3,"商标-补正":4,"商标-审查":5,"商标-初审公告":6,"商标-异议":7,"商标-注册公告":8,"商标-驳回":9,"商标-注册":10,"商标-结案":11};return t[e]||1},mapNumberToProjectStatus(e){const t={1:"商标-草稿",2:"商标-已递交",3:"商标-受理",4:"商标-补正",5:"商标-审查",6:"商标-初审公告",7:"商标-异议",8:"商标-注册公告",9:"商标-驳回",10:"商标-注册",11:"商标-结案"};return t[e]||"商标-草稿"},handleBusinessPersonChange(e){console.log("业务人员变化:",e)},handleTechLeaderChange(e){console.log("技术主导变化:",e)},handlePreSalesChange(e){console.log("售前支持变化:",e)},handleApplicantChange(e){this.applicantList=e.map(e=>({id:e.id,name:e.name,creditCode:e.creditCode,province:e.province,city:e.city,address:e.address,type:e.type,country:e.country}))},deleteApplicant(e){const t=this.applicantList[e];this.applicantList.splice(e,1),this.selectedApplicants=this.selectedApplicants.filter(e=>e.id!==t.id)},addProcessItem(){this.currentProcessItemData={},this.processItemDialogVisible=!0},editProcessItem(e){this.currentProcessItemData={...this.processItems[e]},this.processItemDialogVisible=!0},async handleProcessItemSave(e){try{console.log("处理事项保存成功回调，数据:",e),await this.loadProcessItems(),console.log("处理事项列表已重新加载")}catch(t){console.error("重新加载处理事项列表失败:",t)}},async handleProcessItemDelete(){try{if(this.currentProcessItemData.id){const a=await this.$api.dataConfig.caseProcess.delete(this.currentProcessItemData.id);var e,t;if(console.log("删除处理事项响应:",a.data),a.data&&(a.data.success||0===a.data.code))await this.loadProcessItems(),this.$message.success("处理事项删除成功");else this.$message.error("删除失败："+((null===(e=a.data)||void 0===e?void 0:e.message)||(null===(t=a.data)||void 0===t?void 0:t.msg)||"未知错误"))}else{const e=this.currentProcessItemData.processItem||this.currentProcessItemData.process_name;this.processItems=this.processItems.filter(t=>t.item!==e&&t.process_name!==e),this.$message.success("处理事项删除成功")}}catch(o){var a;console.error("删除处理事项失败:",o),this.$message.error("删除失败："+((null===(a=o.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||o.message||"请重试"))}},async loadProcessItems(){if(this.caseId)try{console.log("开始加载处理事项，案件ID:",this.caseId);const e=await this.$api.dataConfig.caseProcess.getByCaseId(this.caseId);if(console.log("处理事项加载响应:",e.data),e.data&&(e.data.success||0===e.data.code)){const t=e.data.data||[];this.processItems=t.map(e=>({...e,item:e.process_name,department:this.getProcessDepartment(),handler:this.getProcessHandler(e),isReject:e.is_assign?"是":"否"})),console.log("处理事项加载成功，数量:",this.processItems.length)}else console.warn("处理事项加载失败:",e.data),this.processItems=[]}catch(e){console.error("加载处理事项失败:",e),this.processItems=[]}else console.log("没有案件ID，跳过加载处理事项")},getProcessDepartment(){return"业务部"},getProcessHandler(e){return e.is_assign&&e.assignee_user&&e.assignee_user.real_name?e.assignee_user.real_name:e.assigned_user&&e.assigned_user.real_name?e.assigned_user.real_name:e.assignee_user_name?e.assignee_user_name:e.assigned_user_name?e.assigned_user_name:"未指定"},async handleFileChange(e){try{const t=new FileReader;t.onload=e=>{this.trademarkImage=e.target.result},t.readAsDataURL(e.raw),this.caseId?await this.uploadTrademarkImage(e.raw):this.pendingImageFile=e.raw}catch(t){console.error("处理图片失败:",t),this.$message.error("处理图片失败")}},async uploadTrademarkImage(e){try{const a=new FormData;a.append("file",e),a.append("file_type","商标图片"),a.append("file_sub_type","商标图样"),a.append("file_desc","商标图片文件");const o=await i["a"].uploadCaseAttachment(this.caseId,a);var t;if(!o.data||!o.data.success)throw new Error((null===(t=o.data)||void 0===t?void 0:t.message)||"上传失败");{const e=o.data.data.file_path||o.data.data.url;if(this.trademarkImageUrl=e,e.startsWith("http"))this.trademarkImage=e;else{const t=h["a"].host||"http://127.0.0.1:8017";this.trademarkImage=`${t}/storage/${e}`}console.log("TrademarkCaseForm: 图片上传成功",{filePath:e,displayUrl:this.trademarkImage}),this.$message.success("图片上传成功")}}catch(o){var a;throw console.error("上传图片失败:",o),this.$message.error("上传图片失败: "+((null===(a=o.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||o.message)),o}},triggerUpload(){this.$el.querySelector('.trademark-upload input[type="file"]').click()},deleteImage(){this.trademarkImage="",this.trademarkImageUrl="",this.pendingImageFile=null,this.$message.success("图片删除成功")}}},b=f,_=(a("74d96"),a("2877")),g=Object(_["a"])(b,o,s,!1,null,null,null);t["default"]=g.exports},ab36:function(e,t,a){"use strict";var o=a("861d"),s=a("9112");e.exports=function(e,t){o(t)&&"cause"in t&&s(e,"cause",t.cause)}},aeb0:function(e,t,a){"use strict";var o=a("9bf2").f;e.exports=function(e,t,a){a in e||o(e,a,{configurable:!0,get:function(){return t[a]},set:function(e){t[a]=e}})}},b980:function(e,t,a){"use strict";var o=a("d039"),s=a("5c6c");e.exports=!o((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",s(1,7)),7!==e.stack)}))},d2bb:function(e,t,a){"use strict";var o=a("7282"),s=a("861d"),r=a("1d80"),n=a("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{e=o(Object.prototype,"__proto__","set"),e(a,[]),t=a instanceof Array}catch(c){}return function(a,o){return r(a),n(o),s(a)?(t?e(a,o):a.__proto__=o,a):a}}():void 0)},d3ff:function(e,t,a){"use strict";var o=a("7419");t["a"]=o},d9e2:function(e,t,a){"use strict";var o=a("23e7"),s=a("cfe9"),r=a("2ba4"),n=a("e5cb"),c="WebAssembly",l=s[c],i=7!==new Error("e",{cause:7}).cause,d=function(e,t){var a={};a[e]=n(e,t,i),o({global:!0,constructor:!0,arity:1,forced:i},a)},u=function(e,t){if(l&&l[e]){var a={};a[e]=n(c+"."+e,t,i),o({target:c,stat:!0,constructor:!0,arity:1,forced:i},a)}};d("Error",(function(e){return function(t){return r(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),d("URIError",(function(e){return function(t){return r(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},e153:function(e,t,a){},e391:function(e,t,a){"use strict";var o=a("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},e5cb:function(e,t,a){"use strict";var o=a("d066"),s=a("1a2d"),r=a("9112"),n=a("3a9b"),c=a("d2bb"),l=a("e893"),i=a("aeb0"),d=a("7156"),u=a("e391"),m=a("ab36"),p=a("6f19"),h=a("83ab"),f=a("c430");e.exports=function(e,t,a,b){var _="stackTraceLimit",g=b?2:1,y=e.split("."),v=y[y.length-1],k=o.apply(null,y);if(k){var I=k.prototype;if(!f&&s(I,"cause")&&delete I.cause,!a)return k;var C=o("Error"),S=t((function(e,t){var a=u(b?t:e,void 0),o=b?new k(e):new k;return void 0!==a&&r(o,"message",a),p(o,S,o.stack,2),this&&n(I,this)&&d(o,this,S),arguments.length>g&&m(o,arguments[g]),o}));if(S.prototype=I,"Error"!==v?c?c(S,C):l(S,C,{name:!0}):h&&_ in k&&(i(S,k,_),i(S,k,"prepareStackTrace")),l(S,k),!f)try{I.name!==v&&r(I,"name",v),I.constructor=S}catch(w){}return S}}}}]);