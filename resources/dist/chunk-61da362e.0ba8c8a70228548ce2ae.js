(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61da362e"],{"32bd":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{key:e.componentKey,staticClass:"contract-draft-container"},[t("div",{staticClass:"body-part-search"},[t("div",{staticClass:"filter-form"},[t("div",{staticClass:"default-filters"},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"客户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.customerName,callback:function(t){e.$set(e.queryParams,"customerName",t)},expression:"queryParams.customerName"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"合同编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.contractCode,callback:function(t){e.$set(e.queryParams,"contractCode",t)},expression:"queryParams.contractCode"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"对应商标名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.trademarkName,callback:function(t){e.$set(e.queryParams,"trademarkName",t)},expression:"queryParams.trademarkName"}})],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"合同服务类型",clearable:"",size:"small"},model:{value:e.queryParams.serviceType,callback:function(t){e.$set(e.queryParams,"serviceType",t)},expression:"queryParams.serviceType"}},e._l(e.serviceTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"总金额",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.totalAmount,callback:function(t){e.$set(e.queryParams,"totalAmount",t)},expression:"queryParams.totalAmount"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"甲方联系人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.partyAContact,callback:function(t){e.$set(e.queryParams,"partyAContact",t)},expression:"queryParams.partyAContact"}})],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"业务人员",clearable:"",size:"small"},model:{value:e.queryParams.businessPerson,callback:function(t){e.$set(e.queryParams,"businessPerson",t)},expression:"queryParams.businessPerson"}},e._l(e.businessPersonOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"乙方签约公司",clearable:"",size:"small"},model:{value:e.queryParams.partyBCompany,callback:function(t){e.$set(e.queryParams,"partyBCompany",t)},expression:"queryParams.partyBCompany"}},e._l(e.companyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"创建人",clearable:"",size:"small"},model:{value:e.queryParams.creator,callback:function(t){e.$set(e.queryParams,"creator",t)},expression:"queryParams.creator"}},e._l(e.creatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"技术主导",clearable:"",size:"small"},model:{value:e.queryParams.technicalLead,callback:function(t){e.$set(e.queryParams,"technicalLead",t)},expression:"queryParams.technicalLead"}},e._l(e.technicalLeadOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"对应商标号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.trademarkNo,callback:function(t){e.$set(e.queryParams,"trademarkNo",t)},expression:"queryParams.trademarkNo"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"合同摘要",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.contractSummary,callback:function(t){e.$set(e.queryParams,"contractSummary",t)},expression:"queryParams.contractSummary"}})],1),t("el-col",{attrs:{xs:24,sm:12,md:8,lg:12,xl:12}},[t("div",{staticClass:"date-range-container"},[t("span",{staticClass:"date-range-label"},[e._v("合同有效期：")]),t("el-date-picker",{staticClass:"date-range-picker",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:e.queryParams.validDateRange,callback:function(t){e.$set(e.queryParams,"validDateRange",t)},expression:"queryParams.validDateRange"}})],1)]),t("el-col",{attrs:{xs:24,sm:12,md:8,lg:12,xl:12}},[t("div",{staticClass:"date-range-container"},[t("span",{staticClass:"date-range-label"},[e._v("签约日期：")]),t("el-date-picker",{staticClass:"date-range-picker",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:e.queryParams.signDateRange,callback:function(t){e.$set(e.queryParams,"signDateRange",t)},expression:"queryParams.signDateRange"}})],1)]),t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"filter-item",attrs:{placeholder:"甲方签约地址",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.queryParams.partyAAddress,callback:function(t){e.$set(e.queryParams,"partyAAddress",t)},expression:"queryParams.partyAAddress"}})],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"业务服务类型",clearable:"",size:"small"},model:{value:e.queryParams.businessServiceType,callback:function(t){e.$set(e.queryParams,"businessServiceType",t)},expression:"queryParams.businessServiceType"}},e._l(e.businessServiceTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"合同状态",clearable:"",size:"small"},model:{value:e.queryParams.contractStatus,callback:function(t){e.$set(e.queryParams,"contractStatus",t)},expression:"queryParams.contractStatus"}},e._l(e.contractStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{xs:24,sm:12,md:8,lg:12,xl:12}},[t("div",{staticClass:"date-range-container"},[t("span",{staticClass:"date-range-label"},[e._v("最晚处理时间：")]),t("el-date-picker",{staticClass:"date-picker",attrs:{type:"datetime",placeholder:"选择日期时间",size:"small"},model:{value:e.queryParams.lastProcessTime,callback:function(t){e.$set(e.queryParams,"lastProcessTime",t)},expression:"queryParams.lastProcessTime"}})],1)])],1)],1),t("div",{staticClass:"part-search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetQuery}},[e._v("重置")])],1)])]),t("div",{staticClass:"body-part-content"},[t("div",{staticClass:"part-table-header"},[e._m(0),t("div",{staticClass:"part-table-operations"},[t("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-refresh"},on:{click:e.refreshList}},[e._v("刷新")]),t("column-filter",{attrs:{"storage-key":"contractDraft",columns:e.availableColumns,"default-selected":e.defaultSelectedColumns},on:{"update:visible-columns":e.updateVisibleColumns}})],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.draftList,border:"",size:"small",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),t("el-table-column",{attrs:{label:"序号",type:"index",width:"80",align:"center"}}),e._l(e.visibleColumns,(function(a){return t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,width:a.width,"min-width":a.minWidth,align:a.align||"center","show-overflow-tooltip":a.showOverflowTooltip},scopedSlots:e._u([{key:"default",fn:function(l){return["contractName"===a.prop?[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(l.row)}}},[e._v(e._s(l.row.contractName))])]:"status"===a.prop?[t("el-tag",{attrs:{type:"info"}},[e._v("待处理")])]:"totalAmount"===a.prop?[e._v(" "+e._s(l.row.totalAmount?"¥"+l.row.totalAmount:"-")+" ")]:[e._v(" "+e._s(l.row[a.prop])+" ")]]}}],null,!0)})})),t("el-table-column",{attrs:{label:"操作",width:"200",align:"center",fixed:"right","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看")])]}}])})],2),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,"current-page":e.pageNum,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"70%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"合同名称",prop:"contractName"}},[t("el-input",{attrs:{placeholder:"请输入合同名称"},model:{value:e.form.contractName,callback:function(t){e.$set(e.form,"contractName",t)},expression:"form.contractName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择客户"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}},e._l(e.customerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"合同编号",prop:"contractCode"}},[t("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.form.contractCode,callback:function(t){e.$set(e.form,"contractCode",t)},expression:"form.contractCode"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"服务类型",prop:"serviceType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务类型"},model:{value:e.form.serviceType,callback:function(t){e.$set(e.form,"serviceType",t)},expression:"form.serviceType"}},e._l(e.serviceTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"合同官费",prop:"officialFee"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,step:100},model:{value:e.form.officialFee,callback:function(t){e.$set(e.form,"officialFee",t)},expression:"form.officialFee"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"合同服务费",prop:"serviceFee"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,step:100},model:{value:e.form.serviceFee,callback:function(t){e.$set(e.form,"serviceFee",t)},expression:"form.serviceFee"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"甲方联系人",prop:"partyAContact"}},[t("el-input",{attrs:{placeholder:"请输入甲方联系人"},model:{value:e.form.partyAContact,callback:function(t){e.$set(e.form,"partyAContact",t)},expression:"form.partyAContact"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"甲方联系电话",prop:"partyAPhone"}},[t("el-input",{attrs:{placeholder:"请输入甲方联系电话"},model:{value:e.form.partyAPhone,callback:function(t){e.$set(e.form,"partyAPhone",t)},expression:"form.partyAPhone"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"甲方联系邮箱",prop:"partyAEmail"}},[t("el-input",{attrs:{placeholder:"请输入甲方联系邮箱"},model:{value:e.form.partyAEmail,callback:function(t){e.$set(e.form,"partyAEmail",t)},expression:"form.partyAEmail"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"乙方签约公司",prop:"partyBCompany"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择乙方签约公司"},model:{value:e.form.partyBCompany,callback:function(t){e.$set(e.form,"partyBCompany",t)},expression:"form.partyBCompany"}},e._l(e.companyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"合同摘要",prop:"contractSummary"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入合同摘要"},model:{value:e.form.contractSummary,callback:function(t){e.$set(e.form,"contractSummary",t)},expression:"form.contractSummary"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"300px"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[t("div",{staticClass:"delete-dialog-body"},[t("p",[e._v("确定要删除该合同草稿吗？")])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.confirmDelete}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"提示",visible:e.submitDialogVisible,width:"300px"},on:{"update:visible":function(t){e.submitDialogVisible=t}}},[t("div",{staticClass:"submit-dialog-body"},[t("p",[e._v("确定要提交该合同草稿进行审核吗？")])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.submitDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmSubmit}},[e._v("确 定")])],1)])],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"part-table-title"},[t("span",[e._v("合同待处理")])])}],r=(a("14d9"),a("e9f5"),a("910d"),a("ab43"),a("c4b3")),o={name:"ContractDraft",components:{ColumnFilter:r["a"]},data(){return{componentKey:0,loading:!1,pageNum:1,pageSize:10,total:0,queryParams:{customerName:"",contractCode:"",trademarkName:"",serviceType:"",totalAmount:"",partyAContact:"",businessPerson:"",partyBCompany:"",creator:"",technicalLead:"",trademarkNo:"",contractSummary:"",validDateRange:[],signDateRange:[],partyAAddress:"",businessServiceType:"",contractStatus:"",lastProcessTime:""},visibleColumns:[],availableColumns:[{prop:"customerName",label:"客户名称",minWidth:"150",showOverflowTooltip:!0},{prop:"contractName",label:"合同名称",minWidth:"150",showOverflowTooltip:!0},{prop:"trademarkName",label:"对应商标名称",minWidth:"150",showOverflowTooltip:!0},{prop:"serviceType",label:"合同服务类型",width:"120"},{prop:"totalAmount",label:"总金额",width:"100"},{prop:"status",label:"合同状态",width:"100"},{prop:"partyAContact",label:"甲方联系人",width:"110"},{prop:"businessPerson",label:"业务人员",width:"100"},{prop:"partyBCompany",label:"乙方签约公司",minWidth:"150",showOverflowTooltip:!0},{prop:"createBy",label:"创建人",width:"100"},{prop:"technicalLead",label:"技术主导",width:"100"},{prop:"trademarkNo",label:"对应商标号",width:"120"},{prop:"contractCode",label:"合同编号",width:"120"},{prop:"lastProcessTime",label:"最后处理时间",width:"160"},{prop:"serialNumber",label:"合同流水号",width:"120"},{prop:"businessServiceType",label:"业务服务类型",width:"120"},{prop:"contractSummary",label:"合同摘要",minWidth:"180",showOverflowTooltip:!0},{prop:"contractFee",label:"合同客费",width:"100"},{prop:"validPeriod",label:"合同有效期",width:"160"},{prop:"caseCount",label:"项目数量",width:"100"},{prop:"partyAPhone",label:"甲方联系电话",width:"120"},{prop:"partyAEmail",label:"甲方联系人邮箱",width:"150",showOverflowTooltip:!0},{prop:"partyBSigner",label:"乙方签约人",width:"110"},{prop:"signDate",label:"签约日期",width:"120"},{prop:"contractCopy",label:"合同副本",width:"100"},{prop:"modifier",label:"修改人",width:"100"},{prop:"partyAAddress",label:"甲方签约地址",minWidth:"150",showOverflowTooltip:!0},{prop:"partyBAddress",label:"乙方签约地址",minWidth:"150",showOverflowTooltip:!0},{prop:"partyBPhone",label:"乙方签约人手机",width:"120"},{prop:"createTime",label:"创建时间",width:"160"}],defaultSelectedColumns:["customerName","contractName","trademarkName","serviceType","totalAmount","status","partyAContact","businessPerson","partyBCompany","createBy","technicalLead","trademarkNo","contractCode","lastProcessTime"],draftList:[],selectedRows:[],dialogTitle:"新增合同草稿",dialogVisible:!1,deleteDialogVisible:!1,submitDialogVisible:!1,deleteId:null,submitId:null,form:{id:null,contractName:"",customerName:"",contractCode:"",serviceType:"",officialFee:0,serviceFee:0,partyAContact:"",partyAPhone:"",partyAEmail:"",partyBCompany:"",contractSummary:""},rules:{contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],customerName:[{required:!0,message:"请选择客户",trigger:"change"}],contractCode:[{required:!0,message:"请输入合同编号",trigger:"blur"}],serviceType:[{required:!0,message:"请选择服务类型",trigger:"change"}]},customerOptions:[{value:"客户1",label:"客户1"},{value:"客户2",label:"客户2"},{value:"客户3",label:"客户3"}],serviceTypeOptions:[{value:"专利服务",label:"专利服务"},{value:"商标服务",label:"商标服务"},{value:"版权服务",label:"版权服务"},{value:"法律服务",label:"法律服务"},{value:"代理服务",label:"代理服务"}],businessServiceTypeOptions:[{value:"普通商标注册",label:"普通商标注册"},{value:"商标代理",label:"商标代理"},{value:"专利申请",label:"专利申请"},{value:"专利维权",label:"专利维权"}],businessPersonOptions:[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}],creatorOptions:[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}],technicalLeadOptions:[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}],contractStatusOptions:[{value:"draft",label:"草稿"},{value:"submitted",label:"已提交"},{value:"processing",label:"处理中"},{value:"completed",label:"已完成"}],companyOptions:[{value:"睿道知识产权代理有限公司",label:"睿道知识产权代理有限公司"},{value:"北京睿道科技有限公司",label:"北京睿道科技有限公司"}]}},computed:{totalAmount(){return parseFloat((this.form.officialFee||0)+(this.form.serviceFee||0)).toFixed(2)}},watch:{"form.officialFee":{handler(){this.form.totalAmount=this.totalAmount}},"form.serviceFee":{handler(){this.form.totalAmount=this.totalAmount}}},created(){this.updateVisibleColumns(this.defaultSelectedColumns),this.getList()},methods:{updateVisibleColumns(e){const t=Array.isArray(e)?e:e&&"object"===typeof e?Object.keys(e).filter(t=>e[t]):[];this.visibleColumns=this.availableColumns.filter(e=>t.includes(e.prop)).map(e=>({...e}))},getList(){this.loading=!0,setTimeout(()=>{const e=Array(20).fill().map((e,t)=>{const a=Math.floor(5e3*Math.random())+1e3,l=Math.floor(1e4*Math.random())+2e3,s=Math.floor(3e3*Math.random())+500,r=a+l+s,o=["专利服务","商标服务","版权服务","法律服务"],i=Math.floor(Math.random()*o.length),n=["普通商标注册","商标代理","专利申请","专利维权"],c=Math.floor(Math.random()*n.length),u=["华为技术有限公司","腾讯科技(深圳)有限公司","阿里巴巴集团","小米科技有限责任公司","百度在线网络技术(北京)有限公司"],m=Math.floor(Math.random()*u.length),p=["华为","腾讯","阿里","小米","百度","京东","网易"],d=Math.floor(Math.random()*p.length),h=["张三","李四","王五"],f=Math.floor(Math.random()*h.length),y=`2023-${("0"+(Math.floor(12*Math.random())+1)).slice(-2)}-${("0"+(Math.floor(28*Math.random())+1)).slice(-2)}`,b=`2024-${("0"+(Math.floor(12*Math.random())+1)).slice(-2)}-${("0"+(Math.floor(28*Math.random())+1)).slice(-2)}`,v=`2023-${("0"+(Math.floor(12*Math.random())+1)).slice(-2)}-${("0"+(Math.floor(28*Math.random())+1)).slice(-2)}`,g=`2023-${("0"+(Math.floor(12*Math.random())+1)).slice(-2)}-${("0"+(Math.floor(28*Math.random())+1)).slice(-2)} ${("0"+Math.floor(24*Math.random())).slice(-2)}:${("0"+Math.floor(60*Math.random())).slice(-2)}:${("0"+Math.floor(60*Math.random())).slice(-2)}`,C=`2023-${("0"+(Math.floor(12*Math.random())+1)).slice(-2)}-${("0"+(Math.floor(28*Math.random())+1)).slice(-2)} ${("0"+Math.floor(24*Math.random())).slice(-2)}:${("0"+Math.floor(60*Math.random())).slice(-2)}:${("0"+Math.floor(60*Math.random())).slice(-2)}`;return{id:"draft-"+(t+1),index:t+1,contractCode:"HT-"+(2023e3+t),serialNumber:"LS"+(1e4+t),contractName:`${o[i]}合同${t+1}`,customerName:u[m],serviceType:o[i],businessServiceType:n[c],officialFee:a,serviceFee:l,contractFee:s,totalAmount:r,status:"draft",partyAContact:"联系人"+(t+1),partyAPhone:"1380013"+("000"+t).slice(-4),partyAEmail:`contact${t+1}@example.com`,partyAAddress:`北京市海淀区${t+1}号`,partyBCompany:t%2===0?"睿道知识产权代理有限公司":"北京睿道科技有限公司",partyBSigner:"签约人"+(t+1),partyBPhone:"1390013"+("000"+t).slice(-4),partyBAddress:`北京市朝阳区${t+1}号`,contractSummary:`这是一份关于${o[i]}的合同草稿，客户为${u[m]}，包含相关的合同内容和条款。`,createBy:h[Math.floor(3*Math.random())],modifier:h[Math.floor(3*Math.random())],businessPerson:h[f],technicalLead:h[Math.floor(3*Math.random())],trademarkName:p[d],trademarkNo:"TM"+(1e5+Math.floor(9e5*Math.random())),validPeriod:`${y} 至 ${b}`,validDateRange:[y,b],signDate:v,contractCopy:Math.floor(3*Math.random())+1,caseCount:Math.floor(5*Math.random())+1,lastProcessTime:C,createTime:g}}),t=(this.pageNum-1)*this.pageSize,a=t+this.pageSize;this.draftList=e.slice(t,a),this.total=e.length,this.loading=!1},600)},handleSearch(){this.pageNum=1,this.getList()},resetQuery(){this.queryParams={customerName:"",contractCode:"",trademarkName:"",serviceType:"",totalAmount:"",partyAContact:"",businessPerson:"",partyBCompany:"",creator:"",technicalLead:"",trademarkNo:"",contractSummary:"",validDateRange:[],signDateRange:[],partyAAddress:"",businessServiceType:"",contractStatus:"",lastProcessTime:""},this.handleSearch()},refreshList(){this.getList()},handleSelectionChange(e){this.selectedRows=e},handleSizeChange(e){this.pageSize=e,this.getList()},handleCurrentChange(e){this.pageNum=e,this.getList()},handleAdd(){this.dialogTitle="新增合同草稿",this.dialogVisible=!0,this.form={id:null,contractName:"",customerName:"",contractCode:"",serviceType:"",officialFee:0,serviceFee:0,partyAContact:"",partyAPhone:"",partyAEmail:"",partyBCompany:"",contractSummary:""},this.$refs.form&&this.$refs.form.resetFields()},handleEdit(e){this.dialogTitle="编辑合同草稿",this.dialogVisible=!0,this.form=JSON.parse(JSON.stringify(e)),this.$nextTick(()=>{this.$refs.form&&this.$refs.form.clearValidate()})},submitForm(){this.$refs.form.validate(e=>{if(e){const e=null!==this.form.id;this.form.totalAmount=this.totalAmount,setTimeout(()=>{if(e){const e=this.draftList.findIndex(e=>e.id===this.form.id);-1!==e&&this.draftList.splice(e,1,{...this.form}),this.$message.success("合同草稿更新成功")}else{const e="draft-"+Date.now(),t={...this.form,id:e,status:"draft",createBy:"当前用户",createTime:this.getCurrentTime()};this.draftList.unshift(t),this.total+=1,this.$message.success("合同草稿创建成功")}this.dialogVisible=!1},600)}})},handleDelete(e){this.deleteId=e.id,this.deleteDialogVisible=!0},confirmDelete(){this.deleteId&&setTimeout(()=>{const e=this.draftList.findIndex(e=>e.id===this.deleteId);-1!==e&&(this.draftList.splice(e,1),this.total-=1),this.$message.success("合同草稿删除成功"),this.deleteDialogVisible=!1,this.deleteId=null},600)},handleSubmit(e){this.submitId=e.id,this.submitDialogVisible=!0},confirmSubmit(){this.submitId&&setTimeout(()=>{const e=this.draftList.findIndex(e=>e.id===this.submitId);-1!==e&&(this.draftList.splice(e,1),this.total-=1),this.$message.success("合同草稿已提交审核"),this.submitDialogVisible=!1,this.submitId=null},600)},getCurrentTime(){const e=new Date,t=e.getFullYear(),a=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2),s=("0"+e.getHours()).slice(-2),r=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return`${t}-${a}-${l} ${s}:${r}:${o}`},handleView(e){this.$router.push({path:"/contract/view",query:{id:e.id||"0",contractNo:e.contractNo||e.serialNumber,type:"待确认"}})}}},i=o,n=(a("a2c4"),a("2877")),c=Object(n["a"])(i,l,s,!1,null,null,null);t["default"]=c.exports},3741:function(e,t,a){},8350:function(e,t,a){},a2c4:function(e,t,a){"use strict";a("8350")},c4b3:function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"column-filter"},[t("el-button",{attrs:{type:e.buttonType,size:e.buttonSize,icon:e.buttonIcon},on:{click:e.showDialog}},[e._v(" "+e._s(e.buttonText)+" ")]),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"column-filter-container"},[t("el-checkbox",{on:{change:e.handleSelectAllChange},model:{value:e.selectAllColumns,callback:function(t){e.selectAllColumns=t},expression:"selectAllColumns"}},[e._v("全选")]),t("el-divider"),t("el-checkbox-group",{on:{change:e.handleColumnChange},model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}},[t("el-row",{attrs:{gutter:10}},e._l(e.availableColumns,(function(a){return t("el-col",{key:a.prop,attrs:{span:8}},[t("el-checkbox",{attrs:{label:a.prop}},[e._v(e._s(a.label))])],1)})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.resetColumns}},[e._v("重置")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveColumnSettings}},[e._v("确 定")])],1)])],1)},s=[],r=(a("e9f5"),a("7d54"),a("ab43"),{name:"ColumnFilter",props:{storageKey:{type:String,required:!0},columns:{type:Array,required:!0},defaultSelected:{type:Array,required:!0},buttonType:{type:String,default:"primary"},buttonSize:{type:String,default:"small"},buttonIcon:{type:String,default:"el-icon-s-operation"},buttonText:{type:String,default:"列筛选"},dialogTitle:{type:String,default:"列筛选设置"}},data(){return{dialogVisible:!1,selectedColumns:[...this.defaultSelected],selectAllColumns:!1,visibleColumns:{}}},computed:{availableColumns(){return this.columns}},created(){this.loadColumnSettings()},methods:{showDialog(){this.dialogVisible=!0},handleSelectAllChange(e){this.selectedColumns=e?this.availableColumns.map(e=>e.prop):[],this.updateVisibleColumns()},handleColumnChange(){this.selectAllColumns=this.selectedColumns.length===this.availableColumns.length,this.updateVisibleColumns()},updateVisibleColumns(){const e={};this.availableColumns.forEach(t=>{e[t.prop]=!1}),this.selectedColumns.forEach(t=>{e[t]=!0}),this.visibleColumns=e,this.$emit("update:visible-columns",{...e})},saveColumnSettings(){try{localStorage.setItem(this.storageKey+"Columns",JSON.stringify(this.selectedColumns)),localStorage.setItem(this.storageKey+"VisibleColumns",JSON.stringify(this.visibleColumns)),this.dialogVisible=!1,this.$message.success("列设置已保存"),this.$emit("update:visible-columns",{...this.visibleColumns})}catch(e){console.error("保存列设置失败",e),this.$message.error("保存列设置失败")}},loadColumnSettings(){try{const e=localStorage.getItem(this.storageKey+"Columns"),t=localStorage.getItem(this.storageKey+"VisibleColumns");e?(this.selectedColumns=JSON.parse(e),this.selectAllColumns=this.selectedColumns.length===this.availableColumns.length):(this.selectedColumns=[...this.defaultSelected],this.selectAllColumns=this.selectedColumns.length===this.availableColumns.length),t?this.visibleColumns=JSON.parse(t):this.updateVisibleColumns(),this.$emit("update:visible-columns",{...this.visibleColumns})}catch(e){console.error("加载列设置失败",e),this.resetColumns()}},resetColumns(){this.selectedColumns=[...this.defaultSelected],this.selectAllColumns=this.selectedColumns.length===this.availableColumns.length,this.updateVisibleColumns()}}}),o=r,i=(a("ec91"),a("2877")),n=Object(i["a"])(o,l,s,!1,null,null,null);t["a"]=n.exports},ec91:function(e,t,a){"use strict";a("3741")}}]);