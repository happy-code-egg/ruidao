(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-364af88e"],{"2e31":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"body-part-search"},[a("el-form",{attrs:{model:e.searchForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"流程名称"}},[a("el-input",{attrs:{size:"small",placeholder:"流程名称",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.flowName,callback:function(a){e.$set(e.searchForm,"flowName",a)},expression:"searchForm.flowName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{size:"small",placeholder:"项目名称",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.caseName,callback:function(a){e.$set(e.searchForm,"caseName",a)},expression:"searchForm.caseName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目类型"}},[a("el-select",{attrs:{size:"small",placeholder:"项目类型",clearable:""},model:{value:e.searchForm.caseType,callback:function(a){e.$set(e.searchForm,"caseType",a)},expression:"searchForm.caseType"}},[a("el-option",{attrs:{label:"专利",value:"专利"}}),a("el-option",{attrs:{label:"商标",value:"商标"}}),a("el-option",{attrs:{label:"版权",value:"版权"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{size:"small",placeholder:"客户名称",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.customerName,callback:function(a){e.$set(e.searchForm,"customerName",a)},expression:"searchForm.customerName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"流程状态"}},[a("el-select",{attrs:{size:"small",placeholder:"流程状态",clearable:""},model:{value:e.searchForm.flowStatus,callback:function(a){e.$set(e.searchForm,"flowStatus",a)},expression:"searchForm.flowStatus"}},[a("el-option",{attrs:{label:"待处理",value:"待处理"}}),a("el-option",{attrs:{label:"处理中",value:"处理中"}}),a("el-option",{attrs:{label:"已完成",value:"已完成"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"办理人员"}},[a("el-input",{attrs:{size:"small",placeholder:"办理人员",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.handler,callback:function(a){e.$set(e.searchForm,"handler",a)},expression:"searchForm.handler"}})],1)],1)],1),a("div",{staticClass:"part-search-buttons"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"body-part-content"},[e._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"flowName",label:"流程名称",align:"center","min-width":"120"}}),a("el-table-column",{attrs:{prop:"caseName",label:"项目名称",align:"center"}}),a("el-table-column",{attrs:{prop:"caseType",label:"项目类型",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),a("el-table-column",{attrs:{prop:"createdBy",label:"创建人",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"流程状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getFlowStatusType(t.row.flowStatus),size:"mini"}},[e._v(" "+e._s(t.row.flowStatus)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"handler",label:"办理人员",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"lastUpdateTime",label:"最后办理时间",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"停滞天数",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.getStopDaysClass(t.row.stopCount)},[e._v(" "+e._s(t.row.stopCount)+"天 ")])]}}])}),a("el-table-column",{attrs:{label:"依赖状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getDependencyStatusType(t.row),size:"mini"}},[e._v(" "+e._s(e.getDependencyStatusText(t.row))+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total>0,expression:"pagination.total > 0"}],attrs:{total:e.pagination.total,"current-page":e.pagination.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},n=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-header"},[a("div",{staticClass:"part-table-title"},[e._v(" 配案流程 ")])])}],s={name:"AssignFlow",data(){return{loading:!1,searchForm:{flowName:"",caseName:"",caseType:"",customerName:"",flowStatus:"",handler:""},tableData:[],pagination:{currentPage:1,pageSize:20,total:0},selectedRows:[]}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const e={page:this.pagination.currentPage,page_size:this.pagination.pageSize,...this.searchForm},a=await this.$api.reviewProgress.getAssignFlows(e);if(a.data.success){const e=a.data.data;this.tableData=e.data||[],this.pagination.total=e.total||0}else this.$message.error(a.data.message||"获取数据失败"),this.tableData=[],this.pagination.total=0}catch(e){console.error("获取配案流程数据失败:",e),this.$message.error("获取数据失败"),this.tableData=[],this.pagination.total=0}finally{this.loading=!1}},handleSearch(){this.pagination.currentPage=1,this.fetchData()},resetSearch(){this.searchForm={flowName:"",caseName:"",caseType:"",customerName:"",flowStatus:"",handler:""},this.handleSearch()},handleSizeChange(e){this.pagination.pageSize=e,this.fetchData()},handleCurrentChange(e){this.pagination.currentPage=e,this.fetchData()},handleSelectionChange(e){this.selectedRows=e},handleView(e){console.log("查看详情",e)},getFlowStatusType(e){const a={"未发起":"info","进行中":"warning","已完成":"success","已驳回":"danger","已取消":"info"};return a[e]||"info"},getStopDaysClass(e){return e<=1?"stop-days-normal":e<=3?"stop-days-warning":"stop-days-danger"},getDependencyStatusType(e){const a=this.getDependencyStatusText(e),t={"依赖满足":"success","等待合同":"warning","等待立项":"warning","依赖缺失":"danger"};return t[a]||"info"},getDependencyStatusText(e){const a=["依赖满足","等待合同","等待立项","依赖缺失"];return a[Math.floor(Math.random()*a.length)]}}},r=s,o=(t("ea6f"),t("2877")),i=Object(o["a"])(r,l,n,!1,null,"a78a85ce",null);a["default"]=i.exports},"3dea":function(e,a,t){},ea6f:function(e,a,t){"use strict";t("3dea")}}]);