(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29bdae79"],{"02af":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"follow-up-container"},[t("div",{staticClass:"filter-container"},[t("div",{staticClass:"filter-form"},[t("div",{staticClass:"default-filters"},[t("el-form",{attrs:{model:e.queryParams,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-input",{attrs:{placeholder:"客户名称",clearable:""},model:{value:e.queryParams.customerName,callback:function(t){e.$set(e.queryParams,"customerName",t)},expression:"queryParams.customerName"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进方式",prop:"followUpMethod"}},[t("el-select",{attrs:{placeholder:"跟进方式",clearable:""},model:{value:e.queryParams.followUpMethod,callback:function(t){e.$set(e.queryParams,"followUpMethod",t)},expression:"queryParams.followUpMethod"}},[t("el-option",{attrs:{label:"请选择跟进方式",value:""}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进类型",prop:"followUpType"}},[t("el-select",{attrs:{placeholder:"跟进类型",clearable:""},model:{value:e.queryParams.followUpType,callback:function(t){e.$set(e.queryParams,"followUpType",t)},expression:"queryParams.followUpType"}},[t("el-option",{attrs:{label:"请选择跟进类型",value:""}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进进度",prop:"followUpProgress"}},[t("el-select",{attrs:{placeholder:"跟进进度",clearable:""},model:{value:e.queryParams.followUpProgress,callback:function(t){e.$set(e.queryParams,"followUpProgress",t)},expression:"queryParams.followUpProgress"}},[t("el-option",{attrs:{label:"请选择跟进进度",value:""}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进提交人",prop:"followUpSubmitter"}},[t("el-select",{attrs:{placeholder:"跟进提交人",clearable:""},model:{value:e.queryParams.followUpSubmitter,callback:function(t){e.$set(e.queryParams,"followUpSubmitter",t)},expression:"queryParams.followUpSubmitter"}},[t("el-option",{attrs:{label:"请选择跟进提交人",value:""}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进修改人",prop:"followUpEditor"}},[t("el-select",{attrs:{placeholder:"跟进修改人",clearable:""},model:{value:e.queryParams.followUpEditor,callback:function(t){e.$set(e.queryParams,"followUpEditor",t)},expression:"queryParams.followUpEditor"}},[t("el-option",{attrs:{label:"请选择跟进修改人",value:""}})],1)],1)],1),t("el-col",{attrs:{xs:24,sm:12,md:12,lg:10,xl:8}},[t("el-form-item",{attrs:{label:"修改时间",prop:"editStartDate"}},[t("div",{staticClass:"date-range-container"},[t("el-date-picker",{staticClass:"date-input",attrs:{type:"date",placeholder:"修改开始时间",clearable:""},model:{value:e.queryParams.editStartDate,callback:function(t){e.$set(e.queryParams,"editStartDate",t)},expression:"queryParams.editStartDate"}}),t("span",{staticClass:"date-separator"},[e._v("到")]),t("el-date-picker",{staticClass:"date-input",attrs:{type:"date",placeholder:"修改结束时间",clearable:""},model:{value:e.queryParams.editEndDate,callback:function(t){e.$set(e.queryParams,"editEndDate",t)},expression:"queryParams.editEndDate"}})],1)])],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"业务员",prop:"salesman"}},[t("el-select",{attrs:{placeholder:"业务员",clearable:""},model:{value:e.queryParams.salesman,callback:function(t){e.$set(e.queryParams,"salesman",t)},expression:"queryParams.salesman"}},[t("el-option",{attrs:{label:"请选择业务员",value:""}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"跟进联系人",prop:"followUpContact"}},[t("el-input",{attrs:{placeholder:"跟进联系人",clearable:""},model:{value:e.queryParams.followUpContact,callback:function(t){e.$set(e.queryParams,"followUpContact",t)},expression:"queryParams.followUpContact"}})],1)],1),t("el-col",{attrs:{xs:24,sm:12,md:12,lg:10,xl:8}},[t("el-form-item",{attrs:{label:"二次跟进开始时间",prop:"secondFollowUpStartDate"}},[t("div",{staticClass:"date-range-container"},[t("el-date-picker",{staticClass:"date-input",attrs:{type:"date",placeholder:"二次跟进开始时间",clearable:""},model:{value:e.queryParams.secondFollowUpStartDate,callback:function(t){e.$set(e.queryParams,"secondFollowUpStartDate",t)},expression:"queryParams.secondFollowUpStartDate"}}),t("span",{staticClass:"date-separator"},[e._v("到")]),t("el-date-picker",{staticClass:"date-input",attrs:{type:"date",placeholder:"二次跟进结束时间",clearable:""},model:{value:e.queryParams.secondFollowUpEndDate,callback:function(t){e.$set(e.queryParams,"secondFollowUpEndDate",t)},expression:"queryParams.secondFollowUpEndDate"}})],1)])],1)],1)],1)],1),t("div",{staticClass:"search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleQuery}},[e._v("查询")]),t("el-button",{on:{click:e.resetQuery}},[e._v("重置")])],1)])]),t("div",{staticClass:"table-container"},[t("div",{staticClass:"table-header"},[e._m(0),t("div",{staticClass:"table-operations"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddFollow}},[e._v("新增跟进")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportData}},[e._v("导出")]),t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"}},[e._v("批量删除")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.followUpList,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),t("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t("el-table-column",{attrs:{label:"客户名称",prop:"customerName",align:"left","min-width":"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"跟进方式",prop:"followUpMethod",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"跟进类型",prop:"followUpType",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"跟进进度",prop:"followUpProgress",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"跟进联系人",prop:"followUpContact",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"联系人电话",prop:"contactPhone",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"二次跟进方式",prop:"secondaryFollowUpMethod",align:"center",width:"130"}}),t("el-table-column",{attrs:{label:"跟进内容",prop:"followUpContent",align:"center","min-width":"160","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"下次跟进时间",prop:"nextFollowUpTime",align:"center",width:"130"}}),t("el-table-column",{attrs:{label:"下次跟进内容",prop:"nextFollowUpContent",align:"center","min-width":"160","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"预计代理额",prop:"estimatedAgencyAmount",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"预计签约时间",prop:"estimatedSigningTime",align:"center",width:"130"}}),t("el-table-column",{attrs:{label:"跟进进展",prop:"followUpProgress",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-view"},on:{click:function(t){return e.handleView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(o.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50]},on:{"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",disabled:e.isView}},[t("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[t("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),t("el-form-item",{attrs:{label:"跟进方式",prop:"followUpMethod"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跟进方式"},model:{value:e.form.followUpMethod,callback:function(t){e.$set(e.form,"followUpMethod",t)},expression:"form.followUpMethod"}},[t("el-option",{attrs:{label:"电话",value:"电话"}}),t("el-option",{attrs:{label:"邮件",value:"邮件"}}),t("el-option",{attrs:{label:"面访",value:"面访"}}),t("el-option",{attrs:{label:"视频会议",value:"视频会议"}}),t("el-option",{attrs:{label:"微信",value:"微信"}})],1)],1),t("el-form-item",{attrs:{label:"跟进类型",prop:"followUpType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跟进类型"},model:{value:e.form.followUpType,callback:function(t){e.$set(e.form,"followUpType",t)},expression:"form.followUpType"}},[t("el-option",{attrs:{label:"初访",value:"初访"}}),t("el-option",{attrs:{label:"重访",value:"重访"}}),t("el-option",{attrs:{label:"例行跟进",value:"例行跟进"}}),t("el-option",{attrs:{label:"问题解决",value:"问题解决"}}),t("el-option",{attrs:{label:"项目沟通",value:"项目沟通"}})],1)],1),t("el-form-item",{attrs:{label:"跟进进度",prop:"followUpProgress"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跟进进度"},model:{value:e.form.followUpProgress,callback:function(t){e.$set(e.form,"followUpProgress",t)},expression:"form.followUpProgress"}},[t("el-option",{attrs:{label:"正常进行",value:"正常进行"}}),t("el-option",{attrs:{label:"顺利",value:"顺利"}}),t("el-option",{attrs:{label:"需进一步沟通",value:"需进一步沟通"}}),t("el-option",{attrs:{label:"已解决",value:"已解决"}})],1)],1),t("el-form-item",{attrs:{label:"跟进联系人",prop:"followUpContact"}},[t("el-input",{attrs:{placeholder:"请输入跟进联系人"},model:{value:e.form.followUpContact,callback:function(t){e.$set(e.form,"followUpContact",t)},expression:"form.followUpContact"}})],1),t("el-form-item",{attrs:{label:"联系人电话",prop:"contactPhone"}},[t("el-input",{attrs:{placeholder:"请输入联系人电话"},model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1),t("el-form-item",{attrs:{label:"二次跟进方式",prop:"secondaryFollowUpMethod"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择二次跟进方式"},model:{value:e.form.secondaryFollowUpMethod,callback:function(t){e.$set(e.form,"secondaryFollowUpMethod",t)},expression:"form.secondaryFollowUpMethod"}},[t("el-option",{attrs:{label:"电话",value:"电话"}}),t("el-option",{attrs:{label:"邮件",value:"邮件"}}),t("el-option",{attrs:{label:"面访",value:"面访"}}),t("el-option",{attrs:{label:"视频会议",value:"视频会议"}}),t("el-option",{attrs:{label:"微信",value:"微信"}}),t("el-option",{attrs:{label:"线下会议",value:"线下会议"}})],1)],1),t("el-form-item",{attrs:{label:"跟进内容",prop:"followUpContent"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入跟进内容",rows:3},model:{value:e.form.followUpContent,callback:function(t){e.$set(e.form,"followUpContent",t)},expression:"form.followUpContent"}})],1),t("el-form-item",{attrs:{label:"下次跟进时间",prop:"nextFollowUpTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择下次跟进时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.nextFollowUpTime,callback:function(t){e.$set(e.form,"nextFollowUpTime",t)},expression:"form.nextFollowUpTime"}})],1),t("el-form-item",{attrs:{label:"下次跟进内容",prop:"nextFollowUpContent"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入下次跟进内容",rows:3},model:{value:e.form.nextFollowUpContent,callback:function(t){e.$set(e.form,"nextFollowUpContent",t)},expression:"form.nextFollowUpContent"}})],1),t("el-form-item",{attrs:{label:"预计代理额",prop:"estimatedAgencyAmount"}},[t("el-input",{attrs:{placeholder:"请输入预计代理额"},model:{value:e.form.estimatedAgencyAmount,callback:function(t){e.$set(e.form,"estimatedAgencyAmount",t)},expression:"form.estimatedAgencyAmount"}})],1),t("el-form-item",{attrs:{label:"预计签约时间",prop:"estimatedSigningTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择预计签约时间","value-format":"yyyy-MM-dd"},model:{value:e.form.estimatedSigningTime,callback:function(t){e.$set(e.form,"estimatedSigningTime",t)},expression:"form.estimatedSigningTime"}})],1),t("el-form-item",{attrs:{label:"业务员",prop:"salesman"}},[t("el-input",{attrs:{placeholder:"请输入业务员"},model:{value:e.form.salesman,callback:function(t){e.$set(e.form,"salesman",t)},expression:"form.salesman"}})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"创建人",prop:"createUser"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.createUser,callback:function(t){e.$set(e.form,"createUser",t)},expression:"form.createUser"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"修改人",prop:"updateUser"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.updateUser,callback:function(t){e.$set(e.form,"updateUser",t)},expression:"form.updateUser"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"修改时间",prop:"updateTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.updateTime,callback:function(t){e.$set(e.form,"updateTime",t)},expression:"form.updateTime"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e.isView?e._e():t("el-button",{on:{click:e.cancel}},[e._v("放 弃")]),e.isView?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:e.followDialogTitle,visible:e.followDialogVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.followDialogVisible=t}}},[t("el-form",{ref:"followupFormRef",attrs:{model:e.followForm,rules:e.followFormRules,"label-width":"100px",disabled:"view"===e.followDialogStatus}},[t("el-form-item",{attrs:{label:"跟进方式",prop:"followType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跟进方式"},model:{value:e.followForm.followType,callback:function(t){e.$set(e.followForm,"followType",t)},expression:"followForm.followType"}},[t("el-option",{attrs:{label:"电话",value:"电话"}}),t("el-option",{attrs:{label:"邮件",value:"邮件"}}),t("el-option",{attrs:{label:"微信",value:"微信"}}),t("el-option",{attrs:{label:"面谈",value:"面谈"}}),t("el-option",{attrs:{label:"视频会议",value:"视频会议"}})],1)],1),t("el-form-item",{attrs:{label:"跟进时间",prop:"followTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择跟进时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.followForm.followTime,callback:function(t){e.$set(e.followForm,"followTime",t)},expression:"followForm.followTime"}})],1),e.followForm.customerId?e._e():t("el-form-item",{attrs:{label:"客户",prop:"customerName"}},[t("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.followForm.customerName,callback:function(t){e.$set(e.followForm,"customerName",t)},expression:"followForm.customerName"}})],1),t("el-form-item",{attrs:{label:"商机",prop:"opportunityId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择商机",clearable:""},model:{value:e.followForm.opportunityId,callback:function(t){e.$set(e.followForm,"opportunityId",t)},expression:"followForm.opportunityId"}},e._l(e.opportunityOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("div",{staticClass:"form-tip"},[e._v("不选择商机将直接跟进客户")])],1),t("el-form-item",{attrs:{label:"跟进内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入跟进内容",rows:4},model:{value:e.followForm.content,callback:function(t){e.$set(e.followForm,"content",t)},expression:"followForm.content"}})],1),t("el-form-item",{attrs:{label:"下次跟进",prop:"nextFollowTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择下次跟进时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.followForm.nextFollowTime,callback:function(t){e.$set(e.followForm,"nextFollowTime",t)},expression:"followForm.nextFollowTime"}})],1),t("el-form-item",{attrs:{label:"下次内容",prop:"nextContent"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入下次跟进内容",rows:2},model:{value:e.followForm.nextContent,callback:function(t){e.$set(e.followForm,"nextContent",t)},expression:"followForm.nextContent"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息",rows:2},model:{value:e.followForm.remark,callback:function(t){e.$set(e.followForm,"remark",t)},expression:"followForm.remark"}})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"创建人",prop:"createUser"}},[t("el-input",{attrs:{disabled:""},model:{value:e.followForm.createUser,callback:function(t){e.$set(e.followForm,"createUser",t)},expression:"followForm.createUser"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.followForm.createTime,callback:function(t){e.$set(e.followForm,"createTime",t)},expression:"followForm.createTime"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"修改人",prop:"updateUser"}},[t("el-input",{attrs:{disabled:""},model:{value:e.followForm.updateUser,callback:function(t){e.$set(e.followForm,"updateUser",t)},expression:"followForm.updateUser"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"修改时间",prop:"updateTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.followForm.updateTime,callback:function(t){e.$set(e.followForm,"updateTime",t)},expression:"followForm.updateTime"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.followDialogVisible=!1}}},[e._v("取 消")]),"view"!==e.followDialogStatus?t("el-button",{attrs:{type:"primary"},on:{click:e.submitFollowForm}},[e._v("确 定")]):e._e()],1)],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-title"},[t("span",[e._v("跟进记录列表")])])}],r=(o("e9f5"),o("d866"),o("910d"),o("f665"),o("ab43"),{name:"FollowUpList",components:{},data(){return{loading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,followUpList:[{id:1,customerName:"四川大学",followUpMethod:"电话",followUpType:"初访",followUpProgress:"正常进行",followUpContact:"张教授",contactPhone:"13866667777",secondaryFollowUpMethod:"邮件",followUpContent:"讨论了专利申请的相关细节，客户对我们的服务表示满意",nextFollowUpTime:"2024-06-10",nextFollowUpContent:"准备专利申请初稿，跟进客户对初稿的意见",estimatedAgencyAmount:"25000",estimatedSigningTime:"2024-07-01",submitTime:"2024-05-15",submitter:"李明",editor:"李明",editTime:"2024-05-15",salesman:"李明"},{id:2,customerName:"成都某某科技有限公司",followUpMethod:"面访",followUpType:"重访",followUpProgress:"顺利",followUpContact:"李总",contactPhone:"13988889999",secondaryFollowUpMethod:"微信",followUpContent:"与客户进行了深入沟通，确认了商标注册的需求和细节",nextFollowUpTime:"2024-06-05",nextFollowUpContent:"提供商标注册方案和价格",estimatedAgencyAmount:"8000",estimatedSigningTime:"2024-06-20",submitTime:"2024-05-20",submitter:"张华",editor:"张华",editTime:"2024-05-20",salesman:"张华"},{id:3,customerName:"中科院成都分院",followUpMethod:"视频会议",followUpType:"例行跟进",followUpProgress:"需进一步沟通",followUpContact:"王研究员",contactPhone:"13777778888",secondaryFollowUpMethod:"电话",followUpContent:"讨论了软件著作权登记的流程和所需材料",nextFollowUpTime:"2024-06-01",nextFollowUpContent:"确认客户是否已准备好所需材料",estimatedAgencyAmount:"5000",estimatedSigningTime:"2024-06-15",submitTime:"2024-05-25",submitter:"王敏",editor:"王敏",editTime:"2024-05-25",salesman:"王敏"},{id:4,customerName:"成都理工大学",followUpMethod:"邮件",followUpType:"问题解决",followUpProgress:"已解决",followUpContact:"刘教授",contactPhone:"13666665555",secondaryFollowUpMethod:"线下会议",followUpContent:"解答了客户关于知识产权保护的问题",nextFollowUpTime:"2024-06-15",nextFollowUpContent:"提供进一步的知识产权保护方案",estimatedAgencyAmount:"15000",estimatedSigningTime:"2024-07-15",submitTime:"2024-05-22",submitter:"李明",editor:"李明",editTime:"2024-05-22",salesman:"李明"},{id:5,customerName:"电子科技大学",followUpMethod:"面访",followUpType:"项目沟通",followUpProgress:"正常进行",followUpContact:"张教授",contactPhone:"13899998888",secondaryFollowUpMethod:"邮件",followUpContent:"与客户讨论了专利申请策略，提供了初步建议",nextFollowUpTime:"2024-06-08",nextFollowUpContent:"根据讨论结果提供详细的专利布局方案",estimatedAgencyAmount:"30000",estimatedSigningTime:"2024-06-30",submitTime:"2024-05-28",submitter:"张华",editor:"张华",editTime:"2024-05-28",salesman:"张华"}],queryParams:{pageNum:1,pageSize:10,customerName:"",followUpMethod:"",followUpType:"",followUpProgress:"",followUpSubmitter:"",followUpEditor:"",editStartDate:"",editEndDate:"",salesman:"",followUpContact:"",secondFollowUpStartDate:"",secondFollowUpEndDate:""},form:{id:void 0,customerName:"",followUpMethod:"",followUpType:"",followUpProgress:"",followUpContact:"",contactPhone:"",secondaryFollowUpMethod:"",followUpContent:"",nextFollowUpTime:"",nextFollowUpContent:"",estimatedAgencyAmount:"",estimatedSigningTime:"",salesman:"",submitter:"",submitTime:"",editor:"",editTime:"",createUser:"",createTime:"",updateUser:"",updateTime:""},rules:{customerName:[{required:!0,message:"客户名称不能为空",trigger:"blur"}],followUpMethod:[{required:!0,message:"跟进方式不能为空",trigger:"change"}],followUpContent:[{required:!0,message:"跟进内容不能为空",trigger:"blur"}],followUpContact:[{required:!0,message:"跟进联系人不能为空",trigger:"blur"}]},title:"",open:!1,isView:!1,followDialogVisible:!1,followDialogStatus:"",followDialogTitle:"",followForm:{id:void 0,followType:"",followTime:"",customerId:void 0,customerName:"",opportunityId:void 0,opportunityName:"",content:"",nextFollowTime:"",nextContent:"",remark:"",createUser:"",createTime:"",updateUser:"",updateTime:""},followFormRules:{followType:[{required:!0,message:"请选择跟进方式",trigger:"change"}],followTime:[{required:!0,message:"请选择跟进时间",trigger:"change"}],content:[{required:!0,message:"请输入跟进内容",trigger:"blur"}]},opportunityOptions:[{id:1,name:"专利申请服务"},{id:2,name:"商标注册服务"},{id:3,name:"软件著作权登记"}]}},created(){this.getList()},methods:{getList(){this.loading=!0,setTimeout(()=>{const e=this.followUpList.filter(e=>!(this.queryParams.customerName&&!e.customerName.includes(this.queryParams.customerName))&&((!this.queryParams.followUpMethod||e.followUpMethod===this.queryParams.followUpMethod)&&((!this.queryParams.followUpType||e.followUpType===this.queryParams.followUpType)&&((!this.queryParams.followUpProgress||e.followUpProgress===this.queryParams.followUpProgress)&&((!this.queryParams.followUpSubmitter||e.submitter===this.queryParams.followUpSubmitter)&&((!this.queryParams.followUpEditor||e.editor===this.queryParams.followUpEditor)&&(!(this.queryParams.editStartDate&&new Date(e.editTime)<new Date(this.queryParams.editStartDate))&&(!(this.queryParams.editEndDate&&new Date(e.editTime)>new Date(this.queryParams.editEndDate))&&((!this.queryParams.salesman||e.salesman===this.queryParams.salesman)&&(!this.queryParams.followUpContact||e.followUpContact===this.queryParams.followUpContact))))))))));this.total=e.length;const t=(this.queryParams.pageNum-1)*this.queryParams.pageSize,o=t+this.queryParams.pageSize;if(this.loading=!1,Object.values(this.queryParams).every(e=>!e||"string"===typeof e&&!e.trim()||"number"===typeof e&&0===e)){const e=[...this.followUpList];this.followUpList=e.slice(t,o)}else this.followUpList=e.slice(t,o)},500)},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.queryParams={pageNum:1,pageSize:10,customerName:"",followUpMethod:"",followUpType:"",followUpProgress:"",followUpSubmitter:"",followUpEditor:"",editStartDate:"",editEndDate:"",salesman:"",followUpContact:"",secondFollowUpStartDate:"",secondFollowUpEndDate:""},this.handleQuery()},exportData(){this.$message({message:"导出跟进记录功能待实现",type:"info"})},handleEdit(e){this.reset(),this.form=JSON.parse(JSON.stringify(e)),this.title="编辑跟进记录",this.isView=!1,this.open=!0,this.$nextTick(()=>{this.$refs.form.clearValidate()})},handleView(e){this.reset(),this.form=JSON.parse(JSON.stringify(e)),this.title="查看跟进记录",this.isView=!0,this.open=!0},handleDelete(e){this.$confirm('是否确认删除跟进记录编号为"'+e.id+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.followUpList.findIndex(t=>t.id===e.id);-1!==t&&this.followUpList.splice(t,1),this.$message({type:"success",message:"删除成功!"}),this.getList()}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},reset(){this.form={id:void 0,customerName:"",followUpMethod:"",followUpType:"",followUpProgress:"",followUpContact:"",contactPhone:"",secondaryFollowUpMethod:"",followUpContent:"",nextFollowUpTime:"",nextFollowUpContent:"",estimatedAgencyAmount:"",estimatedSigningTime:"",salesman:"",submitter:"",submitTime:"",editor:"",editTime:"",createUser:"",createTime:"",updateUser:"",updateTime:""},this.resetForm("form")},resetForm(e){this.$refs[e]&&this.$refs[e].resetFields()},cancel(){this.open=!1,this.reset()},submitForm(){this.$refs.form.validate(e=>{if(e){const e=(new Date).toLocaleString(),t="当前用户";if(void 0!==this.form.id){const o=this.followUpList.findIndex(e=>e.id===this.form.id);-1!==o&&(this.form.editTime=(new Date).toISOString().slice(0,10),this.form.editor="当前用户",this.form.updateUser=t,this.form.updateTime=e,this.followUpList[o]={...this.followUpList[o],...this.form}),this.$message.success("修改成功")}else{const o=Math.max(...this.followUpList.map(e=>e.id))+1;this.form.id=o,this.form.submitTime=(new Date).toISOString().slice(0,10),this.form.submitter="当前用户",this.form.editTime=(new Date).toISOString().slice(0,10),this.form.editor="当前用户",this.form.createUser=t,this.form.createTime=e,this.form.updateUser=t,this.form.updateTime=e,this.followUpList.unshift(this.form),this.$message.success("新增成功")}this.open=!1,this.getList()}})},handleSelectionChange(e){this.ids=e.map(e=>e.id),this.single=1!==e.length,this.multiple=!e.length},handleSizeChange(e){this.queryParams.pageSize=e,this.getList()},handleCurrentChange(e){this.queryParams.pageNum=e,this.getList()},handleAddFollow(){let e,t;this.selectedCustomer&&(e=this.selectedCustomer.id,t=this.selectedCustomer.customerName),this.followForm={id:void 0,followType:"",followTime:this.formatDate(new Date),customerId:e,customerName:t,opportunityId:void 0,opportunityName:"",content:"",nextFollowTime:"",nextContent:"",remark:"",createUser:"",createTime:"",updateUser:"",updateTime:""},this.followDialogStatus="add",this.followDialogTitle="新增跟进",this.followDialogVisible=!0,this.$nextTick(()=>{this.$refs.followupFormRef&&this.$refs.followupFormRef.clearValidate()})},handleViewFollow(e){this.followForm=JSON.parse(JSON.stringify(e)),this.followDialogStatus="view",this.followDialogTitle="查看跟进",this.followDialogVisible=!0},handleEditFollow(e){this.followForm=JSON.parse(JSON.stringify(e)),this.followDialogStatus="edit",this.followDialogTitle="编辑跟进",this.followDialogVisible=!0,this.$nextTick(()=>{this.$refs.followupFormRef&&this.$refs.followupFormRef.clearValidate()})},submitFollowForm(){this.$refs.followupFormRef.validate(e=>{if(e){const e=(new Date).toLocaleString(),t="当前用户";if(this.followForm.opportunityId){const e=this.opportunityOptions.find(e=>e.id===this.followForm.opportunityId);e&&(this.followForm.opportunityName=e.name)}else this.followForm.opportunityName="";if("add"===this.followDialogStatus){const o=Math.max(...this.followUpList.map(e=>e.id))+1;this.followForm.id=o,this.followForm.submitter="当前用户",this.followForm.submitTime=this.formatDate(new Date),this.followForm.editor="当前用户",this.followForm.editTime=this.formatDate(new Date),this.followForm.createUser=t,this.followForm.createTime=e,this.followForm.updateUser=t,this.followForm.updateTime=e;const l={id:o,customerName:this.followForm.customerName,followUpMethod:this.followForm.followType,followUpType:"客户跟进",followUpProgress:"正常进行",followUpContact:this.form.followUpContact||"",contactPhone:this.form.contactPhone||"",secondaryFollowUpMethod:"",followUpContent:this.followForm.content,nextFollowUpTime:this.followForm.nextFollowTime,nextFollowUpContent:this.followForm.nextContent,estimatedAgencyAmount:"",estimatedSigningTime:"",submitTime:this.followForm.submitTime,submitter:this.followForm.submitter,editor:this.followForm.editor,editTime:this.followForm.editTime,salesman:"当前用户",createUser:this.followForm.createUser,createTime:this.followForm.createTime,updateUser:this.followForm.updateUser,updateTime:this.followForm.updateTime};this.followUpList.unshift(l),this.total=this.followUpList.length,this.$message.success("添加成功")}else if("edit"===this.followDialogStatus){const o=this.followUpList.findIndex(e=>e.id===this.followForm.id);-1!==o&&(this.followForm.editor="当前用户",this.followForm.editTime=this.formatDate(new Date),this.followForm.updateUser=t,this.followForm.updateTime=e,this.followUpList[o].followUpMethod=this.followForm.followType,this.followUpList[o].followUpContent=this.followForm.content,this.followUpList[o].nextFollowUpTime=this.followForm.nextFollowTime,this.followUpList[o].nextFollowUpContent=this.followForm.nextContent,this.followUpList[o].editor=this.followForm.editor,this.followUpList[o].editTime=this.followForm.editTime,this.followUpList[o].updateUser=this.followForm.updateUser,this.followUpList[o].updateTime=this.followForm.updateTime),this.$message.success("修改成功")}this.followDialogVisible=!1,this.getList()}})},formatDate(e){const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return`${t}-${o}-${l} ${a}:${r}:${s}`}}}),s=r,i=(o("45df"),o("2877")),n=Object(i["a"])(s,l,a,!1,null,null,null);t["default"]=n.exports},"45df":function(e,t,o){"use strict";o("4c8c")},"4c8c":function(e,t,o){}}]);