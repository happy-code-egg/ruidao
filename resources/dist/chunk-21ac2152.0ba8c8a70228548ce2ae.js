(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21ac2152"],{b7a7:function(e,t,a){"use strict";a("cc7d")},bb2f:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"payment-received-draft-container"},[t("div",{staticClass:"body-part-search"},[t("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"到款单号",prop:"paymentNo"}},[t("el-input",{attrs:{placeholder:"到款单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.paymentNo,callback:function(t){e.$set(e.searchForm,"paymentNo",t)},expression:"searchForm.paymentNo"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"银行账户",prop:"bankAccount"}},[t("el-select",{attrs:{placeholder:"选择银行账户",clearable:"",size:"small"},model:{value:e.searchForm.bankAccount,callback:function(t){e.$set(e.searchForm,"bankAccount",t)},expression:"searchForm.bankAccount"}},[t("el-option",{attrs:{label:"工商银行 ****1234",value:"icbc_1234"}}),t("el-option",{attrs:{label:"建设银行 ****5678",value:"ccb_5678"}}),t("el-option",{attrs:{label:"招商银行 ****9012",value:"cmb_9012"}})],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"付款方",prop:"payer"}},[t("el-input",{attrs:{placeholder:"付款方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchForm.payer,callback:function(t){e.$set(e.searchForm,"payer",t)},expression:"searchForm.payer"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"到账时间",prop:"receivedTimeRange"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.searchForm.receivedTimeRange,callback:function(t){e.$set(e.searchForm,"receivedTimeRange",t)},expression:"searchForm.receivedTimeRange"}})],1)],1)],1)],1),t("div",{staticClass:"part-search-buttons"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("重置")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("新增到款")])],1)],1),t("div",{staticClass:"body-part-content"},[t("div",{staticClass:"part-table-header"},[t("div",{staticClass:"part-table-title"},[e._v("到款草稿")]),t("div",{staticClass:"part-table-operations"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("模板下载")]),t("el-button",{attrs:{size:"small",type:"success",disabled:0===e.selectedRows.length},on:{click:e.handleBatchSubmit}},[e._v("批量提交")]),t("el-button",{attrs:{size:"small",type:"danger",disabled:0===e.selectedRows.length},on:{click:e.handleBatchDelete}},[e._v("批量删除")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"80"}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"paymentNo",label:"到款单号",width:"140","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"amount",label:"到款金额",width:"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"amount-text"},[e._v("¥"+e._s(a.row.amount))])]}}])}),t("el-table-column",{attrs:{prop:"currency",label:"币种",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"payer",label:"付款方",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"receivedTime",label:"到账时间",width:"150"}}),t("el-table-column",{attrs:{prop:"bankAccount",label:"收款账户",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"paymentMethod",label:"付款方式",width:"100"}}),t("el-table-column",{attrs:{prop:"transactionRef",label:"交易流水号",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"creator",label:"录入人",width:"100"}}),t("el-table-column",{attrs:{prop:"createTime",label:"录入时间",width:"150"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleSubmit(a.row)}}},[e._v("提交")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"到款金额",prop:"amount"}},[t("el-input",{attrs:{placeholder:"请输入到款金额"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[t("template",{slot:"prepend"},[e._v("¥")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"币种",prop:"currency"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择币种"},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}},[t("el-option",{attrs:{label:"人民币(CNY)",value:"CNY"}}),t("el-option",{attrs:{label:"美元(USD)",value:"USD"}}),t("el-option",{attrs:{label:"欧元(EUR)",value:"EUR"}}),t("el-option",{attrs:{label:"日元(JPY)",value:"JPY"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"付款方",prop:"payer"}},[t("el-input",{attrs:{placeholder:"请输入付款方名称"},model:{value:e.form.payer,callback:function(t){e.$set(e.form,"payer",t)},expression:"form.payer"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"付款方账户",prop:"payerAccount"}},[t("el-input",{attrs:{placeholder:"请输入付款方账户"},model:{value:e.form.payerAccount,callback:function(t){e.$set(e.form,"payerAccount",t)},expression:"form.payerAccount"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"到账时间",prop:"receivedTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择到账时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.receivedTime,callback:function(t){e.$set(e.form,"receivedTime",t)},expression:"form.receivedTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"收款账户",prop:"bankAccount"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择收款账户"},model:{value:e.form.bankAccount,callback:function(t){e.$set(e.form,"bankAccount",t)},expression:"form.bankAccount"}},[t("el-option",{attrs:{label:"工商银行账户 ****1234",value:"icbc_1234"}}),t("el-option",{attrs:{label:"建设银行账户 ****5678",value:"ccb_5678"}}),t("el-option",{attrs:{label:"招商银行账户 ****9012",value:"cmb_9012"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"付款方式",prop:"paymentMethod"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择付款方式"},model:{value:e.form.paymentMethod,callback:function(t){e.$set(e.form,"paymentMethod",t)},expression:"form.paymentMethod"}},[t("el-option",{attrs:{label:"银行转账",value:"bank_transfer"}}),t("el-option",{attrs:{label:"电汇",value:"wire_transfer"}}),t("el-option",{attrs:{label:"支票",value:"check"}}),t("el-option",{attrs:{label:"现金",value:"cash"}}),t("el-option",{attrs:{label:"其他",value:"other"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"交易流水号",prop:"transactionRef"}},[t("el-input",{attrs:{placeholder:"请输入交易流水号"},model:{value:e.form.transactionRef,callback:function(t){e.$set(e.form,"transactionRef",t)},expression:"form.transactionRef"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},["CNY"!==e.form.currency?t("el-form-item",{attrs:{label:"汇率",prop:"exchangeRate"}},[t("el-input",{attrs:{placeholder:"请输入汇率（相对人民币）"},model:{value:e.form.exchangeRate,callback:function(t){e.$set(e.form,"exchangeRate",t)},expression:"form.exchangeRate"}},[t("template",{slot:"append"},[e._v("CNY")])],2)],1):e._e()],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入备注信息"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSave}},[e._v("保存")]),t("el-button",{attrs:{type:"success",loading:e.submitting},on:{click:e.handleSaveAndSubmit}},[e._v("保存并提交")])],1)],1),t("el-dialog",{attrs:{title:"到款详情",visible:e.viewDialogVisible,width:"700px"},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[t("el-descriptions",{attrs:{column:2,border:""}},[t("el-descriptions-item",{attrs:{label:"到款单号"}},[e._v(e._s(e.viewData.paymentNo))]),t("el-descriptions-item",{attrs:{label:"到款金额"}},[t("span",{staticClass:"amount-highlight"},[e._v("¥"+e._s(e.viewData.amount))])]),t("el-descriptions-item",{attrs:{label:"币种"}},[e._v(e._s(e.viewData.currency))]),t("el-descriptions-item",{attrs:{label:"汇率"}},[e._v(e._s(e.viewData.exchangeRate||"1.0"))]),t("el-descriptions-item",{attrs:{label:"付款方"}},[e._v(e._s(e.viewData.payer))]),t("el-descriptions-item",{attrs:{label:"付款方账户"}},[e._v(e._s(e.viewData.payerAccount))]),t("el-descriptions-item",{attrs:{label:"到账时间"}},[e._v(e._s(e.viewData.receivedTime))]),t("el-descriptions-item",{attrs:{label:"收款账户"}},[e._v(e._s(e.viewData.bankAccount))]),t("el-descriptions-item",{attrs:{label:"付款方式"}},[e._v(e._s(e.viewData.paymentMethod))]),t("el-descriptions-item",{attrs:{label:"交易流水号"}},[e._v(e._s(e.viewData.transactionRef))]),t("el-descriptions-item",{attrs:{label:"录入人"}},[e._v(e._s(e.viewData.creator))]),t("el-descriptions-item",{attrs:{label:"录入时间"}},[e._v(e._s(e.viewData.createTime))]),t("el-descriptions-item",{attrs:{label:"备注",span:2}},[e._v(e._s(e.viewData.remark||"无"))])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.viewDialogVisible=!1}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleEditFromView}},[e._v("编辑")])],1)],1)],1)},r=[],i=(a("e9f5"),a("ab43"),{name:"PaymentReceivedDraft",data(){return{loading:!1,submitting:!1,searchForm:{paymentNo:"",bankAccount:"",payer:"",receivedTimeRange:[]},tableData:[],selectedRows:[],currentPage:1,pageSize:10,total:0,dialogVisible:!1,dialogMode:"add",dialogTitle:"新增到款",form:{amount:"",currency:"CNY",payer:"",payerAccount:"",receivedTime:"",bankAccount:"",paymentMethod:"",transactionRef:"",exchangeRate:"",remark:""},formRules:{amount:[{required:!0,message:"请输入到款金额",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"请输入正确的金额格式",trigger:"blur"}],currency:[{required:!0,message:"请选择币种",trigger:"change"}],payer:[{required:!0,message:"请输入付款方",trigger:"blur"}],receivedTime:[{required:!0,message:"请选择到账时间",trigger:"change"}],bankAccount:[{required:!0,message:"请选择收款账户",trigger:"change"}],paymentMethod:[{required:!0,message:"请选择付款方式",trigger:"change"}]},currentEditRow:null,viewDialogVisible:!1,viewData:{}}},created(){this.getList()},watch:{"form.currency"(e){"CNY"===e&&(this.form.exchangeRate="")}},methods:{getList(){this.loading=!0,setTimeout(()=>{this.tableData=Array.from({length:12}).map((e,t)=>({id:t+1,paymentNo:"DK"+String(Date.now()+t).slice(-8),amount:(5e3+5e4*Math.random()).toFixed(2),currency:["CNY","USD","EUR"][Math.floor(3*Math.random())],payer:"付款公司"+(t+1),payerAccount:"****"+String(1e4*Math.random()).slice(-4),receivedTime:new Date(Date.now()-7*Math.random()*24*60*60*1e3).toLocaleString(),bankAccount:["工商银行 ****1234","建设银行 ****5678","招商银行 ****9012"][Math.floor(3*Math.random())],paymentMethod:["银行转账","电汇","支票"][Math.floor(3*Math.random())],transactionRef:"TXN"+String(Date.now()+t).slice(-12),exchangeRate:Math.random()>.7?(6+2*Math.random()).toFixed(4):"",creator:"财务员"+(t+1),createTime:new Date(Date.now()-3*Math.random()*24*60*60*1e3).toLocaleString(),remark:t%3===0?"到款备注信息"+(t+1):""})),this.total=this.tableData.length,this.loading=!1},500)},handleSearch(){this.currentPage=1,this.getList()},handleReset(){this.searchForm={paymentNo:"",bankAccount:"",payer:"",receivedTimeRange:[]},this.getList()},handleSelectionChange(e){this.selectedRows=e},handleSizeChange(e){this.pageSize=e,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()},handleAdd(){this.dialogMode="add",this.dialogTitle="新增到款",this.form={amount:"",currency:"CNY",payer:"",payerAccount:"",receivedTime:"",bankAccount:"",paymentMethod:"",transactionRef:"",exchangeRate:"",remark:""},this.currentEditRow=null,this.dialogVisible=!0},handleView(e){this.viewData={...e},this.viewDialogVisible=!0},handleEdit(e){this.dialogMode="edit",this.dialogTitle="编辑到款",this.form={amount:e.amount,currency:e.currency,payer:e.payer,payerAccount:e.payerAccount,receivedTime:e.receivedTime,bankAccount:e.bankAccount,paymentMethod:e.paymentMethod,transactionRef:e.transactionRef,exchangeRate:e.exchangeRate,remark:e.remark},this.currentEditRow=e,this.dialogVisible=!0},handleEditFromView(){this.viewDialogVisible=!1,this.handleEdit(this.viewData)},handleSave(){this.$refs.formRef.validate(e=>{e&&(this.submitting=!0,setTimeout(()=>{this.$message.success("保存成功"),this.dialogVisible=!1,this.submitting=!1,this.getList()},1e3))})},handleSaveAndSubmit(){this.$refs.formRef.validate(e=>{e&&(this.submitting=!0,setTimeout(()=>{this.$message.success("保存并提交成功"),this.dialogVisible=!1,this.submitting=!1,this.getList()},1e3))})},handleSubmit(e){this.$confirm("确认提交到款单吗？提交后将进入待认领状态。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,setTimeout(()=>{this.$message.success("提交成功"),this.loading=!1,this.getList()},1e3)})},handleDelete(e){this.$confirm(`确认删除到款单 "${e.paymentNo}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,setTimeout(()=>{this.$message.success("删除成功"),this.loading=!1,this.getList()},1e3)})},handleBatchSubmit(){this.$confirm(`确认批量提交选中的 ${this.selectedRows.length} 条到款单吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,setTimeout(()=>{this.$message.success("批量提交成功"),this.loading=!1,this.getList()},1e3)})},handleBatchDelete(){this.$confirm(`确认批量删除选中的 ${this.selectedRows.length} 条到款单吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,setTimeout(()=>{this.$message.success("批量删除成功"),this.loading=!1,this.getList()},1e3)})}}}),o=i,s=(a("b7a7"),a("2877")),n=Object(s["a"])(o,l,r,!1,null,"5ff9c99b",null);t["default"]=n.exports},cc7d:function(e,t,a){}}]);