(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6060ff83"],{"0d26":function(e,t,s){"use strict";var o=s("e330"),a=Error,r=o("".replace),l=function(e){return String(new a(e).stack)}("zxcasd"),c=/\n\s*at [^:]*:[^\n]*/,i=c.test(l);e.exports=function(e,t){if(i&&"string"==typeof e&&!a.prepareStackTrace)while(t--)e=r(e,c,"");return e}},1787:function(e,t,s){"use strict";var o=s("861d");e.exports=function(e){return o(e)||null===e}},"1ed0":function(e,t,s){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process-matter-selector"},[t("el-input",{staticStyle:{cursor:"pointer"},attrs:{value:e.displayValue,placeholder:e.placeholder,readonly:""},on:{click:function(t){e.showDialog=!0}}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.showDialog=!0}},slot:"append"})],1),t("el-dialog",{staticClass:"process-matter-selector-dialog",attrs:{title:"选择处理事项",visible:e.showDialog,width:"80%",modal:!1,"z-index":"9999","close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("div",{staticClass:"filter-section"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"处理事项类型"}},[t("el-checkbox-group",{model:{value:e.filterForm.processTypes,callback:function(t){e.$set(e.filterForm,"processTypes",t)},expression:"filterForm.processTypes"}},e._l(e.processTypeOptions,(function(s){return t("el-checkbox",{key:s.value,attrs:{label:s.value}},[e._v(" "+e._s(s.label)+" ")])})),1)],1),t("el-form-item",[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入处理事项名称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1)],1),t("div",{staticClass:"matter-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"matterTable",attrs:{data:e.filteredMatterList,border:"",size:"small","max-height":"400"},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[e.multiple?t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}):t("el-table-column",{attrs:{width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-radio",{attrs:{value:e.selectedSingle,label:s.row.id},on:{change:function(t){return e.handleSingleSelect(s.row)}}},[e._v(" ")])]}}])}),t("el-table-column",{attrs:{prop:"process_name",label:"处理事项名称"}}),t("el-table-column",{attrs:{prop:"process_type",label:"处理事项类型",align:"center"}}),t("el-table-column",{attrs:{prop:"case_type",label:"项目类型",align:"center"}}),t("el-table-column",{attrs:{prop:"business_type",label:"业务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(Array.isArray(t.row.business_type)?t.row.business_type.join(", "):t.row.business_type)+" ")]}}])})],1),e.loading||0!==e.filteredMatterList.length?e._e():t("div",{staticClass:"empty-state"},[t("el-empty",{attrs:{description:"暂无处理事项数据","image-size":80}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1)])],1)},a=[],r=(s("e9f5"),s("910d"),s("f665"),s("7d54"),s("ab43"),{name:"ProcessMatterSelector",props:{value:{type:[String,Array],default:()=>[]},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择处理事项"},caseType:{type:String,default:""},applicationType:{type:[String,Array],default:()=>[]}},data(){return{showDialog:!1,loading:!1,matterList:[],filteredMatterList:[],selectedItems:[],selectedSingle:null,processTypeOptions:[],filterForm:{processTypes:[],keyword:""}}},computed:{displayValue(){return this.multiple?Array.isArray(this.value)&&this.value.length>0?`已选择 ${this.value.length} 项`:"":this.value||""}},watch:{showDialog(e){e&&(this.loadProcessTypeOptions(),this.loadMatterList(),this.initSelectedItems())},"filterForm.processTypes":{handler(){this.showDialog&&this.handleFilter()},deep:!0},"filterForm.keyword":{handler(){this.showDialog&&this.handleFilter()}}},methods:{async loadProcessTypeOptions(){try{const e=await this.$api.dataConfig.processType.getOptions();0===e.data.code&&(this.processTypeOptions=e.data.data.map(e=>({value:e.name,label:e.name})),this.processTypeOptions.length>0&&0===this.filterForm.processTypes.length&&(this.filterForm.processTypes=[]))}catch(e){console.error("加载处理事项类型失败:",e)}},async loadMatterList(){this.loading=!0;try{const e={is_valid:1};this.caseType&&(e.case_type=this.caseType),this.applicationType&&this.applicationType.length>0&&(e.application_type=Array.isArray(this.applicationType)?this.applicationType:[this.applicationType]),this.filterForm.processTypes.length>0&&(e.process_types=this.filterForm.processTypes),this.filterForm.keyword&&(e.keyword=this.filterForm.keyword);const t=await this.$api.dataConfig.processInformation.getFilteredOptions(e);0===t.data.code?(this.matterList=t.data.data||[],this.filteredMatterList=[...this.matterList],this.initSelectedItems()):this.$message.error(t.data.msg||"获取处理事项列表失败")}catch(e){console.error("获取处理事项列表失败:",e),this.$message.error("获取处理事项列表失败")}finally{this.loading=!1}},handleFilter(){this.loadMatterList()},initSelectedItems(){if(this.multiple){const e=Array.isArray(this.value)?this.value:[];this.selectedItems=this.filteredMatterList.filter(t=>e.includes(t.process_name)),this.$nextTick(()=>{this.$refs.matterTable&&(this.$refs.matterTable.clearSelection(),this.selectedItems.forEach(e=>{this.$refs.matterTable.toggleRowSelection(e,!0)}))})}else{const e=this.filteredMatterList.find(e=>e.process_name===this.value);this.selectedSingle=e?e.id:null}},handleSelectionChange(e){this.selectedItems=e},handleRowClick(e){this.multiple||(this.selectedSingle=e.id)},handleSingleSelect(e){this.selectedSingle=e.id},handleConfirm(){if(this.multiple){const e=this.selectedItems.map(e=>e.process_name);this.$emit("input",e),this.$emit("change",e,this.selectedItems)}else{const e=this.filteredMatterList.find(e=>e.id===this.selectedSingle),t=e?e.process_name:"";this.$emit("input",t),this.$emit("change",t,e)}this.showDialog=!1},handleCancel(){this.showDialog=!1,this.initSelectedItems()}}}),l=r,c=(s("23d7"),s("2877")),i=Object(c["a"])(l,o,a,!1,null,"944244a6",null);t["a"]=i.exports},"23d7":function(e,t,s){"use strict";s("4583")},"2ba4":function(e,t,s){"use strict";var o=s("40d5"),a=Function.prototype,r=a.apply,l=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?l.bind(r):function(){return l.apply(r,arguments)})},"3bbe":function(e,t,s){"use strict";var o=s("1787"),a=String,r=TypeError;e.exports=function(e){if(o(e))return e;throw new r("Can't set "+a(e)+" as a prototype")}},4583:function(e,t,s){},"6f19":function(e,t,s){"use strict";var o=s("9112"),a=s("0d26"),r=s("b980"),l=Error.captureStackTrace;e.exports=function(e,t,s,c){r&&(l?l(e,t):o(e,"stack",a(s,c)))}},7156:function(e,t,s){"use strict";var o=s("1626"),a=s("861d"),r=s("d2bb");e.exports=function(e,t,s){var l,c;return r&&o(l=t.constructor)&&l!==s&&a(c=l.prototype)&&c!==s.prototype&&r(e,c),e}},7282:function(e,t,s){"use strict";var o=s("e330"),a=s("59ed");e.exports=function(e,t,s){try{return o(a(Object.getOwnPropertyDescriptor(e,t)[s]))}catch(r){}}},7419:function(e){e.exports=JSON.parse('[{"en":"Afghanistan","cn":"阿富汗","code":"+93","short_code":"AF"},{"en":"Alaska(U.S.A)","cn":"阿拉斯加","code":"+1907","short_code":"US"},{"en":"Albania","cn":"阿尔巴尼亚","code":"+355","short_code":"AL"},{"en":"Algeria","cn":"阿尔及利亚","code":"+213","short_code":"DZ"},{"en":"American Samoa","cn":"美属萨摩亚","code":"+684","short_code":"AS"},{"en":"Andorra","cn":"安道尔共和国","code":"+376","short_code":"AD"},{"en":"Angola","cn":"安哥拉","code":"+244","short_code":"AO"},{"en":"Anguilla","cn":"安圭拉岛","code":"+1254","short_code":"AI"},{"en":"Antigua and Barbuda","cn":"安提瓜和巴布达","code":"+1268","short_code":"AG"},{"en":"Argentina","cn":"阿根廷","code":"+54","short_code":"AR"},{"en":"Armenia","cn":"亚美尼亚","code":"+374","short_code":"AM"},{"en":"Aruba","cn":"阿鲁巴岛","code":"+297","short_code":"AW"},{"en":"Ascension","cn":"阿森松","code":"+247","short_code":"AC"},{"en":"Australia","cn":"澳大利亚","code":"+61","short_code":"AU"},{"en":"Austria","cn":"奥地利","code":"+43","short_code":"AT"},{"en":"Azerbaijan","cn":"阿塞拜疆","code":"+994","short_code":"AZ"},{"en":"Bahamas","cn":"巴哈马","code":"+1242","short_code":"BS"},{"en":"Bahrain","cn":"巴林","code":"+973","short_code":"BH"},{"en":"Bangladesh","cn":"孟加拉国","code":"+880","short_code":"BD"},{"en":"Barbados","cn":"巴巴多斯","code":"+1246","short_code":"BB"},{"en":"Belarus","cn":"白俄罗斯","code":"+375","short_code":"BY"},{"en":"Belgium","cn":"比利时","code":"+32","short_code":"BE"},{"en":"Belize","cn":"伯利兹","code":"+501","short_code":"BZ"},{"en":"Benin","cn":"贝宁","code":"+229","short_code":"BJ"},{"en":"Bermuda Is","cn":"百慕大群岛","code":"+1441","short_code":"BM"},{"en":"Bhutan","cn":"不丹","code":"+975","short_code":"BT"},{"en":"Bolivia","cn":"玻利维亚","code":"+591","short_code":"BO"},{"en":"Bosnia And Herzegovina","cn":"波斯尼亚和黑塞哥维那","code":"+387","short_code":"BA"},{"en":"Botswana","cn":"博茨瓦纳","code":"+267","short_code":"BW"},{"en":"Brazil","cn":"巴西","code":"+55","short_code":"BR"},{"en":"Brunei","cn":"文莱","code":"+673","short_code":"BN"},{"en":"Bulgaria","cn":"保加利亚","code":"+359","short_code":"BG"},{"en":"Burkina Faso","cn":"布基纳法索","code":"+226","short_code":"BF"},{"en":"Burma","cn":"缅甸","code":"+95","short_code":"MM"},{"en":"Burundi","cn":"布隆迪","code":"+257","short_code":"BI"},{"en":"Cambodia","cn":"柬埔寨","code":"+855","short_code":"KH"},{"en":"Cameroon","cn":"喀麦隆","code":"+237","short_code":"CM"},{"en":"Canada","cn":"加拿大","code":"+1","short_code":"CA"},{"en":"Cape Verde","cn":"佛得角","code":"+238","short_code":"CV"},{"en":"Cayman Is","cn":"开曼群岛","code":"+1345","short_code":"KY"},{"en":"Central African Republic","cn":"中非共和国","code":"+236","short_code":"CF"},{"en":"Chad","cn":"乍得","code":"+235","short_code":"TD"},{"en":"Chile","cn":"智利","code":"+56","short_code":"CL"},{"en":"China","cn":"中国","code":"+86","short_code":"CN"},{"en":"Colombia","cn":"哥伦比亚","code":"+57","short_code":"CO"},{"en":"Congo","cn":"刚果","code":"+242","short_code":"CG"},{"en":"Cook Is","cn":"库克群岛","code":"+682","short_code":"CK"},{"en":"Costa Rica","cn":"哥斯达黎加","code":"+506","short_code":"CR"},{"en":"Cuba","cn":"古巴","code":"+53","short_code":"CU"},{"en":"Cyprus","cn":"塞浦路斯","code":"+357","short_code":"CY"},{"en":"Czech Republic","cn":"捷克","code":"+420","short_code":"CZ"},{"en":"Denmark","cn":"丹麦","code":"+45","short_code":"DK"},{"en":"Djibouti","cn":"吉布提","code":"+253","short_code":"DJ"},{"en":"Dominica Rep","cn":"多米尼加共和国","code":"+1809","short_code":"DO"},{"en":"DR Congo","cn":"民主刚果","code":"+243","short_code":"CD"},{"en":"Ecuador","cn":"厄瓜多尔","code":"+593","short_code":"EC"},{"en":"Egypt","cn":"埃及","code":"+20","short_code":"EG"},{"en":"El Salvador","cn":"萨尔瓦多","code":"+503","short_code":"SV"},{"en":"Estonia","cn":"爱沙尼亚","code":"+372","short_code":"EE"},{"en":"Ethiopia","cn":"埃塞俄比亚","code":"+251","short_code":"ET"},{"en":"Falkland Islands","cn":"福克兰群岛","code":"+500","short_code":"FK"},{"en":"Fiji","cn":"斐济","code":"+679","short_code":"FJ"},{"en":"Finland","cn":"芬兰","code":"+358","short_code":"FI"},{"en":"France","cn":"法国","code":"+33","short_code":"FR"},{"en":"French Guiana","cn":"法属圭亚那","code":"+594","short_code":"GF"},{"en":"French Polynesia","cn":"法属玻利尼西亚","code":"+689","short_code":"PF"},{"en":"Gabon","cn":"加蓬","code":"+241","short_code":"GA"},{"en":"Gambia","cn":"冈比亚","code":"+220","short_code":"GM"},{"en":"Georgia","cn":"格鲁吉亚","code":"+995","short_code":"GE"},{"en":"Germany","cn":"德国","code":"+49","short_code":"DE"},{"en":"Ghana","cn":"加纳","code":"+233","short_code":"GH"},{"en":"Gibraltar","cn":"直布罗陀","code":"+350","short_code":"GI"},{"en":"Greece","cn":"希腊","code":"+30","short_code":"GR"},{"en":"Grenada","cn":"格林纳达","code":"+1473","short_code":"GD"},{"en":"Guam","cn":"关岛","code":"+1671","short_code":"GU"},{"en":"Guatemala","cn":"危地马拉","code":"+502","short_code":"GT"},{"en":"Guinea","cn":"几内亚","code":"+224","short_code":"GN"},{"en":"Guyana","cn":"圭亚那","code":"+592","short_code":"GY"},{"en":"Haiti","cn":"海地","code":"+509","short_code":"HT"},{"en":"Honduras","cn":"洪都拉斯","code":"+504","short_code":"HN"},{"en":"Hongkong","cn":"香港","code":"+852","short_code":"HK"},{"en":"Hungary","cn":"匈牙利","code":"+36","short_code":"HU"},{"en":"Iceland","cn":"冰岛","code":"+354","short_code":"IS"},{"en":"India","cn":"印度","code":"+91","short_code":"IN"},{"en":"Indonesia","cn":"印度尼西亚","code":"+62","short_code":"ID"},{"en":"Iran","cn":"伊朗","code":"+98","short_code":"IR"},{"en":"Iraq","cn":"伊拉克","code":"+964","short_code":"IQ"},{"en":"Ireland","cn":"爱尔兰","code":"+353","short_code":"IE"},{"en":"Israel","cn":"以色列","code":"+972","short_code":"IL"},{"en":"Italy","cn":"意大利","code":"+39","short_code":"IT"},{"en":"Ivory Coast","cn":"科特迪瓦","code":"+225","short_code":"CI"},{"en":"Jamaica","cn":"牙买加","code":"+1876","short_code":"JM"},{"en":"Japan","cn":"日本","code":"+81","short_code":"JP"},{"en":"Jordan","cn":"约旦","code":"+962","short_code":"JO"},{"en":"Kazakhstan","cn":"哈萨克斯坦","code":"+7","short_code":"KZ"},{"en":"Kenya","cn":"肯尼亚","code":"+254","short_code":"KE"},{"en":"Korea","cn":"韩国","code":"+82","short_code":"KR"},{"en":"Kosovo","cn":"科索沃","code":"+383","short_code":"XK"},{"en":"Kuwait","cn":"科威特","code":"+965","short_code":"KW"},{"en":"Kyrgyzstan","cn":"吉尔吉斯坦","code":"+996","short_code":"KG"},{"en":"Laos","cn":"老挝","code":"+856","short_code":"LA"},{"en":"Latvia","cn":"拉脱维亚","code":"+371","short_code":"LV"},{"en":"Lebanon","cn":"黎巴嫩","code":"+961","short_code":"LB"},{"en":"Lesotho","cn":"莱索托","code":"+266","short_code":"LS"},{"en":"Liberia","cn":"利比里亚","code":"+231","short_code":"LR"},{"en":"Libya","cn":"利比亚","code":"+218","short_code":"LY"},{"en":"Liechtenstein","cn":"列支敦士登","code":"+423","short_code":"LI"},{"en":"Lithuania","cn":"立陶宛","code":"+370","short_code":"LT"},{"en":"Luxembourg","cn":"卢森堡","code":"+352","short_code":"LU"},{"en":"Macao","cn":"澳门","code":"+853","short_code":"MO"},{"en":"Madagascar","cn":"马达加斯加","code":"+261","short_code":"MG"},{"en":"Malawi","cn":"马拉维","code":"+265","short_code":"MW"},{"en":"Malaysia","cn":"马来西亚","code":"+60","short_code":"MY"},{"en":"Maldives","cn":"马尔代夫","code":"+960","short_code":"MV"},{"en":"Mali","cn":"马里","code":"+223","short_code":"ML"},{"en":"Malta","cn":"马耳他","code":"+356","short_code":"MT"},{"en":"Mariana Is","cn":"马里亚那群岛","code":"+1670","short_code":"MP"},{"en":"Martinique","cn":"马提尼克","code":"+596","short_code":"MQ"},{"en":"Mauritius","cn":"毛里求斯","code":"+230","short_code":"MU"},{"en":"Mexico","cn":"墨西哥","code":"+52","short_code":"MX"},{"en":"Moldova","cn":"摩尔多瓦","code":"+373","short_code":"MD"},{"en":"Monaco","cn":"摩纳哥","code":"+377","short_code":"MC"},{"en":"Mongolia","cn":"蒙古","code":"+976","short_code":"MN"},{"en":"Montenegro","cn":"黑山","code":"+382","short_code":"ME"},{"en":"Montserrat Is","cn":"蒙特塞拉特岛","code":"+1664","short_code":"MS"},{"en":"Morocco","cn":"摩洛哥","code":"+212","short_code":"MA"},{"en":"Mozambique","cn":"莫桑比克","code":"+258","short_code":"MZ"},{"en":"Namibia","cn":"纳米比亚","code":"+264","short_code":"NA"},{"en":"Nauru","cn":"瑙鲁","code":"+674","short_code":"NR"},{"en":"Nepal","cn":"尼泊尔","code":"+977","short_code":"NP"},{"en":"Netherlands","cn":"荷兰","code":"+31","short_code":"NL"},{"en":"Netherlands Antilles","cn":"荷属安的列斯","code":"+599","short_code":"AN"},{"en":"New Zealand","cn":"新西兰","code":"+64","short_code":"NZ"},{"en":"Nicaragua","cn":"尼加拉瓜","code":"+505","short_code":"NI"},{"en":"Niger","cn":"尼日尔","code":"+227","short_code":"NE"},{"en":"Nigeria","cn":"尼日利亚","code":"+234","short_code":"NG"},{"en":"North Korea","cn":"朝鲜","code":"+850","short_code":"KP"},{"en":"North Macedonia","cn":"北马其顿","code":"+389","short_code":"MK"},{"en":"Norway","cn":"挪威","code":"+47","short_code":"NO"},{"en":"Oman","cn":"阿曼","code":"+968","short_code":"OM"},{"en":"Pakistan","cn":"巴基斯坦","code":"+92","short_code":"PK"},{"en":"Palestine","cn":"巴勒斯坦","code":"+970","short_code":"PS"},{"en":"Panama","cn":"巴拿马","code":"+507","short_code":"PA"},{"en":"Papua New Guinea","cn":"巴布亚新几内亚","code":"+675","short_code":"PG"},{"en":"Paraguay","cn":"巴拉圭","code":"+595","short_code":"PY"},{"en":"Peru","cn":"秘鲁","code":"+51","short_code":"PE"},{"en":"Philippines","cn":"菲律宾","code":"+63","short_code":"PH"},{"en":"Poland","cn":"波兰","code":"+48","short_code":"PL"},{"en":"Portugal","cn":"葡萄牙","code":"+351","short_code":"PT"},{"en":"Puerto Rico","cn":"波多黎各","code":"+1787","short_code":"PR"},{"en":"Qatar","cn":"卡塔尔","code":"+974","short_code":"QA"},{"en":"Republic of Croatia","cn":"克罗地亚共和国","code":"+385","short_code":"HR"},{"en":"Reunion","cn":"留尼旺","code":"+262","short_code":"RE"},{"en":"Romania","cn":"罗马尼亚","code":"+40","short_code":"RO"},{"en":"Russia","cn":"俄罗斯","code":"+7","short_code":"RU"},{"en":"Saint Lucia","cn":"圣卢西亚","code":"+1758","short_code":"LC"},{"en":"Saint Vincent","cn":"圣文森特","code":"+1784","short_code":"VC"},{"en":"Samoa","cn":"萨摩亚","code":"+685","short_code":"WS"},{"en":"San Marino","cn":"圣马力诺","code":"+378","short_code":"SM"},{"en":"Sao Tome and Principe","cn":"圣多美和普林西比","code":"+239","short_code":"ST"},{"en":"Saudi Arabia","cn":"沙特阿拉伯","code":"+966","short_code":"SA"},{"en":"Senegal","cn":"塞内加尔","code":"+221","short_code":"SN"},{"en":"Seychelles","cn":"塞舌尔","code":"+248","short_code":"SC"},{"en":"Sierra Leone","cn":"塞拉利昂","code":"+232","short_code":"SL"},{"en":"Singapore","cn":"新加坡","code":"+65","short_code":"SG"},{"en":"Slovakia","cn":"斯洛伐克","code":"+421","short_code":"SK"},{"en":"Slovenia","cn":"斯洛文尼亚","code":"+386","short_code":"SI"},{"en":"Solomon Is","cn":"所罗门群岛","code":"+677","short_code":"SB"},{"en":"Somali","cn":"索马里","code":"+252","short_code":"SO"},{"en":"South Africa","cn":"南非","code":"+27","short_code":"ZA"},{"en":"South Sudan","cn":"南苏丹","code":"+211","short_code":"SS"},{"en":"Spain","cn":"西班牙","code":"+34","short_code":"ES"},{"en":"Sri Lanka","cn":"斯里兰卡","code":"+94","short_code":"LK"},{"en":"Sudan","cn":"苏丹","code":"+249","short_code":"SD"},{"en":"Suriname","cn":"苏里南","code":"+597","short_code":"SR"},{"en":"Swaziland","cn":"斯威士兰","code":"+268","short_code":"SZ"},{"en":"Sweden","cn":"瑞典","code":"+46","short_code":"SE"},{"en":"Switzerland","cn":"瑞士","code":"+41","short_code":"CH"},{"en":"Syria","cn":"叙利亚","code":"+963","short_code":"SY"},{"en":"Taiwan","cn":"台湾省","code":"+886","short_code":"TW"},{"en":"Tajikstan","cn":"塔吉克斯坦","code":"+992","short_code":"TJ"},{"en":"Tanzania","cn":"坦桑尼亚","code":"+255","short_code":"TZ"},{"en":"Thailand","cn":"泰国","code":"+66","short_code":"TH"},{"en":"Timor-Leste","cn":"东帝汶","code":"+670","short_code":"TL"},{"en":"Togo","cn":"多哥","code":"+228","short_code":"TG"},{"en":"Tonga","cn":"汤加","code":"+676","short_code":"TO"},{"en":"Trinidad and Tobago","cn":"特立尼达和多巴哥","code":"+1868","short_code":"TT"},{"en":"Tunisia","cn":"突尼斯","code":"+216","short_code":"TN"},{"en":"Turkey","cn":"土耳其","code":"+90","short_code":"TR"},{"en":"Turkmenistan","cn":"土库曼斯坦","code":"+993","short_code":"TM"},{"en":"Uganda","cn":"乌干达","code":"+256","short_code":"UG"},{"en":"Ukraine","cn":"乌克兰","code":"+380","short_code":"UA"},{"en":"United Arab Emirates","cn":"阿拉伯联合酋长国","code":"+971","short_code":"AE"},{"en":"United Kingdom","cn":"英国","code":"+44","short_code":"GB"},{"en":"United States of America","cn":"美国","code":"+1","short_code":"US"},{"en":"Uruguay","cn":"乌拉圭","code":"+598","short_code":"UY"},{"en":"Uzbekistan","cn":"乌兹别克斯坦","code":"+998","short_code":"UZ"},{"en":"Vatican City","cn":"梵蒂冈","code":"+379","short_code":"VA"},{"en":"Venezuela","cn":"委内瑞拉","code":"+58","short_code":"VE"},{"en":"Vietnam","cn":"越南","code":"+84","short_code":"VN"},{"en":"Yemen","cn":"也门","code":"+967","short_code":"YE"},{"en":"Zambia","cn":"赞比亚","code":"+260","short_code":"ZM"},{"en":"Zimbabwe","cn":"津巴布韦","code":"+263","short_code":"ZW"}]')},ab36:function(e,t,s){"use strict";var o=s("861d"),a=s("9112");e.exports=function(e,t){o(t)&&"cause"in t&&a(e,"cause",t.cause)}},ad48:function(e,t,s){},aeb0:function(e,t,s){"use strict";var o=s("9bf2").f;e.exports=function(e,t,s){s in e||o(e,s,{configurable:!0,get:function(){return t[s]},set:function(e){t[s]=e}})}},b980:function(e,t,s){"use strict";var o=s("d039"),a=s("5c6c");e.exports=!o((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},d2bb:function(e,t,s){"use strict";var o=s("7282"),a=s("861d"),r=s("1d80"),l=s("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{e=o(Object.prototype,"__proto__","set"),e(s,[]),t=s instanceof Array}catch(c){}return function(s,o){return r(s),l(o),a(s)?(t?e(s,o):s.__proto__=o,s):s}}():void 0)},d3ff:function(e,t,s){"use strict";var o=s("7419");t["a"]=o},d9e2:function(e,t,s){"use strict";var o=s("23e7"),a=s("cfe9"),r=s("2ba4"),l=s("e5cb"),c="WebAssembly",i=a[c],n=7!==new Error("e",{cause:7}).cause,d=function(e,t){var s={};s[e]=l(e,t,n),o({global:!0,constructor:!0,arity:1,forced:n},s)},p=function(e,t){if(i&&i[e]){var s={};s[e]=l(c+"."+e,t,n),o({target:c,stat:!0,constructor:!0,arity:1,forced:n},s)}};d("Error",(function(e){return function(t){return r(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),d("URIError",(function(e){return function(t){return r(e,this,arguments)}})),p("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),p("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),p("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},df3b:function(e,t,s){"use strict";s("ad48")},e391:function(e,t,s){"use strict";var o=s("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},e5cb:function(e,t,s){"use strict";var o=s("d066"),a=s("1a2d"),r=s("9112"),l=s("3a9b"),c=s("d2bb"),i=s("e893"),n=s("aeb0"),d=s("7156"),p=s("e391"),u=s("ab36"),m=s("6f19"),h=s("83ab"),f=s("c430");e.exports=function(e,t,s,y){var b="stackTraceLimit",_=y?2:1,g=e.split("."),v=g[g.length-1],F=o.apply(null,g);if(F){var P=F.prototype;if(!f&&a(P,"cause")&&delete P.cause,!s)return F;var D=o("Error"),T=t((function(e,t){var s=p(y?t:e,void 0),o=y?new F(e):new F;return void 0!==s&&r(o,"message",s),m(o,T,o.stack,2),this&&l(P,this)&&d(o,this,T),arguments.length>_&&u(o,arguments[_]),o}));if(T.prototype=P,"Error"!==v?c?c(T,D):i(T,D,{name:!0}):h&&b in F&&(n(T,F,b),n(T,F,"prepareStackTrace")),i(T,F),!f)try{P.name!==v&&r(P,"name",v),P.constructor=T}catch(S){}return T}}},fb88:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process-rule-container"},[t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"left-tree"},[t("div",{staticClass:"search-area"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索",clearable:""},on:{input:e.handleSearch,clear:e.handleSearch},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),t("el-tree",{staticClass:"tree-menu",attrs:{data:e.filteredTreeData,props:e.treeProps,"default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:s,data:o}){return[t("span",{staticClass:"tree-node"},[t("i",{class:o.icon||"el-icon-document"}),t("span",[e._v(e._s(s.label))])])]}}])})],1),t("div",{staticClass:"right-content"},[t("div",{staticClass:"overview-area"},[t("el-table",{staticClass:"overview-table",staticStyle:{width:"100%"},attrs:{data:e.overviewData,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sequence",label:"序号"}}),t("el-table-column",{attrs:{align:"center",prop:"processItem",label:"处理事项"}}),t("el-table-column",{attrs:{align:"center",prop:"caseType",label:"项目类型"}}),t("el-table-column",{attrs:{align:"center",prop:"businessType",label:"业务类型"}}),t("el-table-column",{attrs:{align:"center",prop:"applicationType",label:"申请类型"}}),t("el-table-column",{attrs:{align:"center",prop:"country",label:"国家（地区）"}}),t("el-table-column",{attrs:{align:"center",prop:"processItemType",label:"处理事项类型"}})],1)],1),t("div",{staticClass:"action-buttons"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAddRuleDialog}},[e._v("添加规则")])],1),t("div",{staticClass:"rule-management"},[t("el-table",{staticClass:"rule-table",staticStyle:{width:"100%"},attrs:{data:e.ruleData,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sequence",label:"序号",width:"80"}}),t("el-table-column",{attrs:{align:"center",prop:"processItem",label:"处理事项",width:"150"}}),t("el-table-column",{attrs:{align:"center",prop:"country",label:"国家（地区）",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"applicationType",label:"申请类型",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"generateOrComplete",label:"生成或完成",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleName",label:"规则名称",width:"200"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleType",label:"规则类型",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"ruleDescription",label:"规则描述"}}),t("el-table-column",{attrs:{align:"center",prop:"isEffective",label:"是否有效",width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tag",{attrs:{type:s.row.isEffective?"success":"danger"}},[e._v(" "+e._s(s.row.isEffective?"有效":"无效")+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"updater",label:"更新人",width:"120"}}),t("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新时间",width:"160"}}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openViewRuleDialog(s.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openEditRuleDialog(s.row)}}},[e._v("编辑")])]}}])})],1)],1)])]),t("el-dialog",{attrs:{visible:e.dialogVisible.addProcess,title:"新增处理事项",width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"addProcess",t)},close:e.resetAddProcessForm}},[t("div",{staticClass:"dialog-header-buttons"},[t("el-button",{on:{click:function(t){e.dialogVisible.addProcess=!1}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAddProcessForm}},[e._v("保存")])],1),t("el-form",{ref:"addProcessFormRef",attrs:{model:e.addProcessForm,rules:e.addProcessRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.addProcessForm.ruleName,callback:function(t){e.$set(e.addProcessForm,"ruleName",t)},expression:"addProcessForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.addProcessForm.ruleDescription,callback:function(t){e.$set(e.addProcessForm,"ruleDescription",t)},expression:"addProcessForm.ruleDescription"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.addProcessForm.ruleType,callback:function(t){e.$set(e.addProcessForm,"ruleType",t)},expression:"addProcessForm.ruleType"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请类型",prop:"applicationType"}},[t("el-input",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.addProcessForm.applicationType,callback:function(t){e.$set(e.addProcessForm,"applicationType",t)},expression:"addProcessForm.applicationType"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"生成或完成",prop:"generateOrComplete"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.addProcessForm.generateOrComplete,callback:function(t){e.$set(e.addProcessForm,"generateOrComplete",t)},expression:"addProcessForm.generateOrComplete"}},[t("el-option",{attrs:{label:"生成",value:"generate"}}),t("el-option",{attrs:{label:"完成",value:"complete"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国家（地区）",prop:"country"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.addProcessForm.country,callback:function(t){e.$set(e.addProcessForm,"country",t)},expression:"addProcessForm.country"}},[t("el-option",{attrs:{label:"中国",value:"CN"}}),t("el-option",{attrs:{label:"美国",value:"US"}}),t("el-option",{attrs:{label:"日本",value:"JP"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理事项",prop:"processItem"}},[t("ProcessMatterSelector",{attrs:{multiple:!1,placeholder:"请选择处理事项"},on:{change:e.handleProcessItemChange},model:{value:e.addProcessForm.processItem,callback:function(t){e.$set(e.addProcessForm,"processItem",t)},expression:"addProcessForm.processItem"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理状态",prop:"processStatus"}},[t("el-select",{attrs:{placeholder:"请选择处理状态",loading:e.processStatusLoading},model:{value:e.addProcessForm.processStatus,callback:function(t){e.$set(e.addProcessForm,"processStatus",t)},expression:"addProcessForm.processStatus"}},e._l(e.processStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"是或否二选一"},model:{value:e.addProcessForm.isEffective,callback:function(t){e.$set(e.addProcessForm,"isEffective",t)},expression:"addProcessForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理人",prop:"processor"}},[t("el-select",{attrs:{placeholder:"请选择处理人"},model:{value:e.addProcessForm.processor,callback:function(t){e.$set(e.addProcessForm,"processor",t)},expression:"addProcessForm.processor"}},[t("el-option",{attrs:{label:"固定人员",value:"fixed"}}),t("el-option",{attrs:{label:"案件处理人",value:"auto"}}),t("el-option",{attrs:{label:"案件业务员",value:"manual"}})],1)],1)],1),t("el-col",{attrs:{span:8}},["fixed"===e.addProcessForm.processor?t("el-form-item",{attrs:{label:"固定人员",prop:"fixedPersonnel"}},[t("el-select",{attrs:{placeholder:"请选择固定人员",loading:e.usersLoading},model:{value:e.addProcessForm.fixedPersonnel,callback:function(t){e.$set(e.addProcessForm,"fixedPersonnel",t)},expression:"addProcessForm.fixedPersonnel"}},e._l(e.userOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否配案",prop:"isAssignCase"}},[t("el-select",{attrs:{placeholder:"是或否二选一"},model:{value:e.addProcessForm.isAssignCase,callback:function(t){e.$set(e.addProcessForm,"isAssignCase",t)},expression:"addProcessForm.isAssignCase"}},[t("el-option",{attrs:{label:"是",value:"yes"}}),t("el-option",{attrs:{label:"否",value:"no"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"internalBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.addProcessForm.internalBaseDate,callback:function(t){e.$set(e.addProcessForm,"internalBaseDate",t)},expression:"addProcessForm.internalBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"internalMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.internalMonths,callback:function(t){e.$set(e.addProcessForm,"internalMonths",t)},expression:"addProcessForm.internalMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"internalDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.internalDays,callback:function(t){e.$set(e.addProcessForm,"internalDays",t)},expression:"addProcessForm.internalDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.addProcessForm.customerBaseDate,callback:function(t){e.$set(e.addProcessForm,"customerBaseDate",t)},expression:"addProcessForm.customerBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.customerMonths,callback:function(t){e.$set(e.addProcessForm,"customerMonths",t)},expression:"addProcessForm.customerMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.customerDays,callback:function(t){e.$set(e.addProcessForm,"customerDays",t)},expression:"addProcessForm.customerDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.addProcessForm.officialBaseDate,callback:function(t){e.$set(e.addProcessForm,"officialBaseDate",t)},expression:"addProcessForm.officialBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.officialMonths,callback:function(t){e.$set(e.addProcessForm,"officialMonths",t)},expression:"addProcessForm.officialMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.officialDays,callback:function(t){e.$set(e.addProcessForm,"officialDays",t)},expression:"addProcessForm.officialDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"完成日期"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"completeDateBase"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.addProcessForm.completeDateBase,callback:function(t){e.$set(e.addProcessForm,"completeDateBase",t)},expression:"addProcessForm.completeDateBase"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"completeDateMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.completeDateMonths,callback:function(t){e.$set(e.addProcessForm,"completeDateMonths",t)},expression:"addProcessForm.completeDateMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"completeDateDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addProcessForm.completeDateDays,callback:function(t){e.$set(e.addProcessForm,"completeDateDays",t)},expression:"addProcessForm.completeDateDays"}})],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.updateProcess,title:"更新处理事项",width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"updateProcess",t)},close:e.resetUpdateProcessForm}},[t("div",{staticClass:"dialog-header-buttons"},[t("el-button",{on:{click:function(t){e.dialogVisible.updateProcess=!1}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitUpdateProcessForm}},[e._v("保存")])],1),t("el-form",{ref:"updateProcessFormRef",attrs:{model:e.updateProcessForm,rules:e.updateProcessRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateProcessForm.ruleName,callback:function(t){e.$set(e.updateProcessForm,"ruleName",t)},expression:"updateProcessForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateProcessForm.ruleDescription,callback:function(t){e.$set(e.updateProcessForm,"ruleDescription",t)},expression:"updateProcessForm.ruleDescription"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateProcessForm.ruleType,callback:function(t){e.$set(e.updateProcessForm,"ruleType",t)},expression:"updateProcessForm.ruleType"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请类型",prop:"applicationType"}},[t("el-input",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateProcessForm.applicationType,callback:function(t){e.$set(e.updateProcessForm,"applicationType",t)},expression:"updateProcessForm.applicationType"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"生成或完成",prop:"generateOrComplete"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateProcessForm.generateOrComplete,callback:function(t){e.$set(e.updateProcessForm,"generateOrComplete",t)},expression:"updateProcessForm.generateOrComplete"}},[t("el-option",{attrs:{label:"生成",value:"generate"}}),t("el-option",{attrs:{label:"完成",value:"complete"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国家（地区）",prop:"country"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateProcessForm.country,callback:function(t){e.$set(e.updateProcessForm,"country",t)},expression:"updateProcessForm.country"}},[t("el-option",{attrs:{label:"中国",value:"CN"}}),t("el-option",{attrs:{label:"美国",value:"US"}}),t("el-option",{attrs:{label:"日本",value:"JP"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理事项",prop:"processItem"}},[t("ProcessMatterSelector",{attrs:{multiple:!1,placeholder:"请选择处理事项"},on:{change:e.handleUpdateProcessItemChange},model:{value:e.updateProcessForm.processItem,callback:function(t){e.$set(e.updateProcessForm,"processItem",t)},expression:"updateProcessForm.processItem"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"处理状态",prop:"processStatus"}},[t("el-select",{attrs:{placeholder:"请选择处理状态",loading:e.processStatusLoading},model:{value:e.updateProcessForm.processStatus,callback:function(t){e.$set(e.updateProcessForm,"processStatus",t)},expression:"updateProcessForm.processStatus"}},e._l(e.processStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"是或否二选一"},model:{value:e.updateProcessForm.isEffective,callback:function(t){e.$set(e.updateProcessForm,"isEffective",t)},expression:"updateProcessForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"内部期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"internalBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.updateProcessForm.internalBaseDate,callback:function(t){e.$set(e.updateProcessForm,"internalBaseDate",t)},expression:"updateProcessForm.internalBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"internalMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.internalMonths,callback:function(t){e.$set(e.updateProcessForm,"internalMonths",t)},expression:"updateProcessForm.internalMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"internalDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.internalDays,callback:function(t){e.$set(e.updateProcessForm,"internalDays",t)},expression:"updateProcessForm.internalDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"客户期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"customerBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.updateProcessForm.customerBaseDate,callback:function(t){e.$set(e.updateProcessForm,"customerBaseDate",t)},expression:"updateProcessForm.customerBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"customerMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.customerMonths,callback:function(t){e.$set(e.updateProcessForm,"customerMonths",t)},expression:"updateProcessForm.customerMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"customerDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.customerDays,callback:function(t){e.$set(e.updateProcessForm,"customerDays",t)},expression:"updateProcessForm.customerDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"官方期限"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"officialBaseDate"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.updateProcessForm.officialBaseDate,callback:function(t){e.$set(e.updateProcessForm,"officialBaseDate",t)},expression:"updateProcessForm.officialBaseDate"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"officialMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.officialMonths,callback:function(t){e.$set(e.updateProcessForm,"officialMonths",t)},expression:"updateProcessForm.officialMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"officialDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.officialDays,callback:function(t){e.$set(e.updateProcessForm,"officialDays",t)},expression:"updateProcessForm.officialDays"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:1}},[t("el-form-item",{attrs:{label:"完成日期"}})],1),t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{label:"基准日期",prop:"completeDateBase"}},[t("el-select",{attrs:{placeholder:"请选择基准日期"},model:{value:e.updateProcessForm.completeDateBase,callback:function(t){e.$set(e.updateProcessForm,"completeDateBase",t)},expression:"updateProcessForm.completeDateBase"}},[t("el-option",{attrs:{label:"发文日",value:"issue_date"}}),t("el-option",{attrs:{label:"收文日",value:"receive_date"}}),t("el-option",{attrs:{label:"优先权日",value:"priority_date"}}),t("el-option",{attrs:{label:"当前日期",value:"current_date"}})],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"月",prop:"completeDateMonths"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.completeDateMonths,callback:function(t){e.$set(e.updateProcessForm,"completeDateMonths",t)},expression:"updateProcessForm.completeDateMonths"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"日",prop:"completeDateDays"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.updateProcessForm.completeDateDays,callback:function(t){e.$set(e.updateProcessForm,"completeDateDays",t)},expression:"updateProcessForm.completeDateDays"}})],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.updateStatus,title:"更新项目状态",width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"updateStatus",t)},close:e.resetUpdateStatusForm}},[t("div",{staticClass:"dialog-header-buttons"},[t("el-button",{on:{click:function(t){e.dialogVisible.updateStatus=!1}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitUpdateStatusForm}},[e._v("保存")])],1),t("el-form",{ref:"updateStatusFormRef",attrs:{model:e.updateStatusForm,rules:e.updateStatusRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateStatusForm.ruleName,callback:function(t){e.$set(e.updateStatusForm,"ruleName",t)},expression:"updateStatusForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateStatusForm.ruleDescription,callback:function(t){e.$set(e.updateStatusForm,"ruleDescription",t)},expression:"updateStatusForm.ruleDescription"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-input",{attrs:{placeholder:"单行输入文本",disabled:""},model:{value:e.updateStatusForm.ruleType,callback:function(t){e.$set(e.updateStatusForm,"ruleType",t)},expression:"updateStatusForm.ruleType"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请类型",prop:"applicationType"}},[t("el-input",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateStatusForm.applicationType,callback:function(t){e.$set(e.updateStatusForm,"applicationType",t)},expression:"updateStatusForm.applicationType"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"生成或完成",prop:"generateOrComplete"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateStatusForm.generateOrComplete,callback:function(t){e.$set(e.updateStatusForm,"generateOrComplete",t)},expression:"updateStatusForm.generateOrComplete"}},[t("el-option",{attrs:{label:"生成",value:"generate"}}),t("el-option",{attrs:{label:"完成",value:"complete"}})],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"国家（地区）",prop:"country"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.updateStatusForm.country,callback:function(t){e.$set(e.updateStatusForm,"country",t)},expression:"updateStatusForm.country"}},[t("el-option",{attrs:{label:"中国",value:"CN"}}),t("el-option",{attrs:{label:"美国",value:"US"}}),t("el-option",{attrs:{label:"日本",value:"JP"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"项目状态",prop:"caseStatus"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateStatusForm.caseStatus,callback:function(t){e.$set(e.updateStatusForm,"caseStatus",t)},expression:"updateStatusForm.caseStatus"}},[t("el-option",{attrs:{label:"待处理",value:"pending"}}),t("el-option",{attrs:{label:"处理中",value:"processing"}}),t("el-option",{attrs:{label:"已完成",value:"completed"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"是否有效",prop:"isEffective"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateStatusForm.isEffective,callback:function(t){e.$set(e.updateStatusForm,"isEffective",t)},expression:"updateStatusForm.isEffective"}},[t("el-option",{attrs:{label:"是",value:1}}),t("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible.addRule,title:"增加规则",width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"addRule",t)},close:e.resetAddRuleForm}},[t("div",{staticClass:"dialog-header-buttons"},[t("el-button",{on:{click:function(t){e.dialogVisible.addRule=!1}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAddRuleForm}},[e._v("保存")])],1),t("el-form",{ref:"addRuleFormRef",attrs:{model:e.addRuleForm,rules:e.addRuleRules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.ruleName,callback:function(t){e.$set(e.addRuleForm,"ruleName",t)},expression:"addRuleForm.ruleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDescription"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.ruleDescription,callback:function(t){e.$set(e.addRuleForm,"ruleDescription",t)},expression:"addRuleForm.ruleDescription"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addRuleForm.ruleType,callback:function(t){e.$set(e.addRuleForm,"ruleType",t)},expression:"addRuleForm.ruleType"}},[t("el-option",{attrs:{label:"新增处理事项",value:"add_process"}}),t("el-option",{attrs:{label:"更新处理事项",value:"update_process"}}),t("el-option",{attrs:{label:"更新项目状态",value:"update_status"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"国家（地区）",prop:"country"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addRuleForm.country,callback:function(t){e.$set(e.addRuleForm,"country",t)},expression:"addRuleForm.country"}},e._l(e.countryOptions,(function(e){return t("el-option",{key:e.cn,attrs:{label:e.cn,value:e.cn}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"申请类型",prop:"applicationType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addRuleForm.applicationType,callback:function(t){e.$set(e.addRuleForm,"applicationType",t)},expression:"addRuleForm.applicationType"}},[t("el-option",{attrs:{label:"专利申请",value:"patent"}}),t("el-option",{attrs:{label:"商标申请",value:"trademark"}}),t("el-option",{attrs:{label:"版权申请",value:"copyright"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"生成或完成",prop:"generateOrComplete"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addRuleForm.generateOrComplete,callback:function(t){e.$set(e.addRuleForm,"generateOrComplete",t)},expression:"addRuleForm.generateOrComplete"}},[t("el-option",{attrs:{label:"生成",value:"generate"}}),t("el-option",{attrs:{label:"完成",value:"complete"}})],1)],1)],1)],1)],1)],1)],1)},a=[],r=(s("d9e2"),s("14d9"),s("e9f5"),s("ab43"),s("1ed0")),l=s("d3ff"),c={name:"ProcessRule",components:{ProcessMatterSelector:r["a"]},data(){return{searchText:"",isViewMode:!1,dialogVisible:{addProcess:!1,updateProcess:!1,updateStatus:!1,addRule:!1},countryOptions:l["a"],treeData:[],treeProps:{children:"children",label:"label"},overviewData:[],ruleData:[],selectedProcessItem:null,currentEditRule:null,processStatusOptions:[],processStatusLoading:!1,userOptions:[],usersLoading:!1,addProcessForm:{ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",processItem:"",processItemId:null,processItemName:"",processStatus:"",isEffective:"",processor:"",fixedPersonnel:"",isAssignCase:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""},updateProcessForm:{ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",processItem:"",processItemId:null,processItemName:"",processStatus:"",isEffective:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""},updateStatusForm:{ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",caseStatus:"",isEffective:""},addRuleForm:{ruleName:"",ruleDescription:"",ruleType:"",country:"",applicationType:"",generateOrComplete:""},addProcessRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请输入规则类型",trigger:"blur"}]},updateProcessRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请输入规则类型",trigger:"blur"}]},updateStatusRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请输入规则类型",trigger:"blur"}]},addRuleRules:{ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"}],ruleDescription:[{required:!0,message:"请输入规则描述",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}],country:[{required:!0,message:"请选择国家（地区）",trigger:"change"}],applicationType:[{required:!0,message:"请选择申请类型",trigger:"change"}],generateOrComplete:[{required:!0,message:"请选择生成或完成",trigger:"change"}]}}},computed:{filteredTreeData(){return this.searchText?this.filterTree(this.treeData,this.searchText):this.treeData}},async mounted(){await this.initData()},methods:{filterTree(e,t){const s=[];for(const o of e)if(this.nodeMatches(o,t))s.push({...o});else if(o.children&&o.children.length>0){const e=this.filterTree(o.children,t);e.length>0&&s.push({...o,children:e})}return s},nodeMatches(e,t){const s=t.toLowerCase();return e.label.toLowerCase().includes(s)},async initData(){try{await Promise.all([this.fetchRuleData(),this.fetchProcessItemTree(),this.fetchRuleTypes(),this.fetchCaseTypes(),this.fetchBusinessTypes(),this.fetchApplicationTypes(),this.fetchCountries(),this.fetchProcessItemTypes(),this.fetchProcessStatuses(),this.fetchUsers()])}catch(e){console.error("初始化数据失败:",e),this.initMockData()}},async fetchRuleData(){try{const e=await this.$api.processRule.getList({page:1,limit:100});if(0!==e.data.code)throw new Error(e.data.msg||"获取规则数据失败");this.ruleData=e.data.data.map((e,t)=>{var s;return{id:e.id,sequence:e.sequence||t+1,processItem:e.processItem||e.name||"处理事项",country:e.country||"全球",applicationType:e.applicationType||e.application_type||"通用",generateOrComplete:e.generateOrComplete||e.generate_or_complete||"生成",ruleName:e.ruleName||e.name,ruleType:e.ruleType||e.rule_type,ruleDescription:e.ruleDescription||e.description,isEffective:void 0!==e.isEffective?e.isEffective:1===e.status,updater:e.updater||(null===(s=e.creator)||void 0===s?void 0:s.real_name)||"系统",updateTime:e.updateTime||e.updated_at}})}catch(e){console.error("获取规则数据失败:",e),this.initMockRuleData()}},async fetchProcessItemTree(){try{const e=await this.$api.processRule.getProcessItemTree();if(0!==e.data.code)throw new Error(e.data.msg||"获取处理事项树失败");this.treeData=e.data.data}catch(e){console.error("获取处理事项树失败:",e),this.initMockTreeData()}},async fetchRuleTypes(){try{const e=await this.$api.processRule.getRuleTypes();0===e.data.code&&(this.ruleTypes=e.data.data)}catch(e){console.error("获取规则类型失败:",e)}},async fetchCaseTypes(){try{const e=await this.$api.processRule.getCaseTypes();0===e.data.code&&(this.caseTypes=e.data.data)}catch(e){console.error("获取项目类型失败:",e)}},async fetchBusinessTypes(){try{const e=await this.$api.processRule.getBusinessTypes();0===e.data.code&&(this.businessTypes=e.data.data)}catch(e){console.error("获取业务类型失败:",e)}},async fetchApplicationTypes(){try{const e=await this.$api.processRule.getApplicationTypes();0===e.data.code&&(this.applicationTypes=e.data.data)}catch(e){console.error("获取申请类型失败:",e)}},async fetchCountries(){try{const e=await this.$api.processRule.getCountries();0===e.data.code&&(this.countries=e.data.data)}catch(e){console.error("获取国家地区失败:",e)}},async fetchProcessItemTypes(){try{const e=await this.$api.processRule.getProcessItemTypes();0===e.data.code&&(this.processItemTypes=e.data.data)}catch(e){console.error("获取处理事项类型失败:",e)}},async fetchProcessStatuses(e=null){try{this.processStatusLoading=!0;const t={};e&&(t.process_item_id=e);const s=await this.$api.processRule.getProcessStatuses(t);0===s.data.code&&(this.processStatusOptions=s.data.data)}catch(t){console.error("获取处理事项状态失败:",t)}finally{this.processStatusLoading=!1}},async fetchUsers(){try{this.usersLoading=!0;const e=await this.$api.processRule.getUsers();0===e.data.code&&(this.userOptions=e.data.data)}catch(e){console.error("获取用户列表失败:",e)}finally{this.usersLoading=!1}},initMockData(){this.initMockRuleData(),this.initMockTreeData()},initMockRuleData(){this.overviewData=[{sequence:1,processItem:"新申请",caseType:"专利",businessType:"申请",applicationType:"发明专利",country:"中国",processItemType:"申请审查"}],this.ruleData=[{sequence:1,processItem:"申请审查",country:"中国",applicationType:"专利申请",generateOrComplete:"生成",ruleName:"专利申请审查规则",ruleType:"新增处理事项",ruleDescription:"专利申请审查相关规则",isEffective:!0,updater:"张三",updateTime:"2024-01-15 10:30:00"},{sequence:2,processItem:"文档处理",country:"美国",applicationType:"商标申请",generateOrComplete:"完成",ruleName:"商标文档处理规则",ruleType:"更新处理事项",ruleDescription:"商标文档处理相关规则",isEffective:!0,updater:"李四",updateTime:"2024-01-14 16:45:00"},{sequence:3,processItem:"状态变更",country:"日本",applicationType:"版权申请",generateOrComplete:"生成",ruleName:"版权状态变更规则",ruleType:"更新项目状态",ruleDescription:"版权项目状态变更规则",isEffective:!1,updater:"王五",updateTime:"2024-01-13 09:20:00"}]},handleSearch(){console.log("Search:",this.searchText)},handleNodeClick(e){console.log("Node clicked:",e),"process_item"===e.type?(this.selectedProcessItem=e,this.loadProcessItemDetail(e),this.loadProcessRules(e)):(this.selectedProcessItem=null,this.overviewData=[],this.ruleData=[])},openAddRuleDialog(){this.selectedProcessItem?(this.addRuleForm.country=this.selectedProcessItem.parent_country,this.addRuleForm.applicationType="专利申请",this.dialogVisible.addRule=!0):this.$message.warning("请先选择一个处理事项")},async openViewRuleDialog(e){console.log("View rule:",e),this.currentEditRule={id:e.id,originalData:e};try{const t=await this.$api.processRule.getDetail(e.id);if(0===t.data.code){const s=t.data.data;console.log("获取到的规则详情（查看模式）:",s),"新增处理事项"===e.ruleType?(this.fillAddProcessFormWithRuleData(s),this.isViewMode=!0,this.dialogVisible.addProcess=!0):"更新处理事项"===e.ruleType?(this.fillUpdateProcessFormWithRuleData(s),this.isViewMode=!0,this.dialogVisible.updateProcess=!0):"更新项目状态"===e.ruleType&&(this.fillUpdateStatusFormWithRuleData(s),this.isViewMode=!0,this.dialogVisible.updateStatus=!0)}else this.$message.error("获取规则详情失败: "+(t.data.msg||"未知错误"))}catch(s){var t;console.error("获取规则详情失败:",s),this.$message.error("获取规则详情失败: "+((null===(t=s.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||s.message))}},async openEditRuleDialog(e){console.log("Edit rule:",e),console.log("Rule ID:",e.id),this.currentEditRule={id:e.id,originalData:e};try{const t=await this.$api.processRule.getDetail(e.id);if(0===t.data.code){const s=t.data.data;console.log("获取到的规则详情:",s),"新增处理事项"===e.ruleType?(this.fillAddProcessFormWithRuleData(s),this.isViewMode=!1,this.dialogVisible.addProcess=!0):"更新处理事项"===e.ruleType?(this.fillUpdateProcessFormWithRuleData(s),this.isViewMode=!1,this.dialogVisible.updateProcess=!0):"更新项目状态"===e.ruleType&&(this.fillUpdateStatusFormWithRuleData(s),this.isViewMode=!1,this.dialogVisible.updateStatus=!0)}else this.$message.error("获取规则详情失败: "+(t.data.msg||"未知错误"))}catch(s){var t;console.error("获取规则详情失败:",s),this.$message.error("获取规则详情失败: "+((null===(t=s.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||s.message))}},fillAddProcessFormWithRuleData(e){var t,s,o,a,r,l,c,i,n;const d=e.conditions||{},p=e.actions||{};this.addProcessForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:e.rule_type||e.ruleType,applicationType:d.application_type||"",generateOrComplete:d.generate_or_complete||"",country:d.country||"",processItem:d.process_item||"",processStatus:d.process_status||"",isEffective:1===e.is_effective?1:0,processor:p.processor||"",fixedPersonnel:p.fixed_personnel||"",isAssignCase:p.is_assign_case||"",internalPeriod:"",internalBaseDate:(null===(t=p.internal_deadline)||void 0===t?void 0:t.base_date)||"",internalMonths:(null===(s=p.internal_deadline)||void 0===s?void 0:s.months)||"",internalDays:(null===(o=p.internal_deadline)||void 0===o?void 0:o.days)||"",customerPeriod:"",customerBaseDate:(null===(a=p.customer_deadline)||void 0===a?void 0:a.base_date)||"",customerMonths:(null===(r=p.customer_deadline)||void 0===r?void 0:r.months)||"",customerDays:(null===(l=p.customer_deadline)||void 0===l?void 0:l.days)||"",officialPeriod:"",officialBaseDate:(null===(c=p.official_deadline)||void 0===c?void 0:c.base_date)||"",officialMonths:(null===(i=p.official_deadline)||void 0===i?void 0:i.months)||"",officialDays:(null===(n=p.official_deadline)||void 0===n?void 0:n.days)||"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""}},fillUpdateProcessFormWithRuleData(e){var t,s,o,a,r,l,c,i,n;const d=e.conditions||{},p=e.actions||{};this.updateProcessForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:e.rule_type||e.ruleType,applicationType:d.application_type||"",generateOrComplete:d.generate_or_complete||"",country:d.country||"",processItem:d.process_item||"",processStatus:d.process_status||"",isEffective:1===e.is_effective?1:0,internalPeriod:"",internalBaseDate:(null===(t=p.internal_deadline)||void 0===t?void 0:t.base_date)||"",internalMonths:(null===(s=p.internal_deadline)||void 0===s?void 0:s.months)||"",internalDays:(null===(o=p.internal_deadline)||void 0===o?void 0:o.days)||"",customerPeriod:"",customerBaseDate:(null===(a=p.customer_deadline)||void 0===a?void 0:a.base_date)||"",customerMonths:(null===(r=p.customer_deadline)||void 0===r?void 0:r.months)||"",customerDays:(null===(l=p.customer_deadline)||void 0===l?void 0:l.days)||"",officialPeriod:"",officialBaseDate:(null===(c=p.official_deadline)||void 0===c?void 0:c.base_date)||"",officialMonths:(null===(i=p.official_deadline)||void 0===i?void 0:i.months)||"",officialDays:(null===(n=p.official_deadline)||void 0===n?void 0:n.days)||"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""}},fillUpdateStatusFormWithRuleData(e){const t=e.conditions||{},s=e.actions||{};this.updateStatusForm={ruleName:e.name||e.ruleName,ruleDescription:e.description||e.ruleDescription,ruleType:e.rule_type||e.ruleType,applicationType:t.application_type||"",generateOrComplete:t.generate_or_complete||"",country:t.country||"",caseStatus:s.update_status||"",isEffective:1===e.is_effective?1:0}},editMode(){console.log("Edit mode activated"),this.$message.info("编辑模式已激活")},handleProcessItemChange(e,t){console.log("处理事项选择变化:",e,t),t&&t.id?(this.fetchProcessStatuses(t.id),this.addProcessForm.processItemId=t.id,this.addProcessForm.processItemName=e):(this.processStatusOptions=[],this.addProcessForm.processStatus="",this.addProcessForm.processItemId=null,this.addProcessForm.processItemName="")},handleUpdateProcessItemChange(e,t){console.log("更新处理事项选择变化:",e,t),t&&t.id?(this.fetchProcessStatuses(t.id),this.updateProcessForm.processItemId=t.id,this.updateProcessForm.processItemName=e):(this.processStatusOptions=[],this.updateProcessForm.processStatus="",this.updateProcessForm.processItemId=null,this.updateProcessForm.processItemName="")},resetAddProcessForm(){this.$refs.addProcessFormRef&&this.$refs.addProcessFormRef.resetFields(),this.currentEditRule=null,this.addProcessForm={ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",processItem:"",processItemId:null,processItemName:"",processStatus:"",isEffective:"",processor:"",fixedPersonnel:"",isAssignCase:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""}},resetUpdateProcessForm(){this.$refs.updateProcessFormRef&&this.$refs.updateProcessFormRef.resetFields(),this.currentEditRule=null,this.updateProcessForm={ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",processItem:"",processStatus:"",isEffective:"",internalPeriod:"",internalBaseDate:"",internalMonths:"",internalDays:"",customerPeriod:"",customerBaseDate:"",customerMonths:"",customerDays:"",officialPeriod:"",officialBaseDate:"",officialMonths:"",officialDays:"",completeDate:"",completeDateBase:"",completeDateMonths:"",completeDateDays:""}},resetUpdateStatusForm(){this.$refs.updateStatusFormRef&&this.$refs.updateStatusFormRef.resetFields(),this.currentEditRule=null,this.updateStatusForm={ruleName:"",ruleDescription:"",ruleType:"",applicationType:"",generateOrComplete:"",country:"",caseStatus:"",isEffective:""}},resetAddRuleForm(){this.$refs.addRuleFormRef&&this.$refs.addRuleFormRef.resetFields(),this.addRuleForm={ruleName:"",ruleDescription:"",ruleType:"",country:"",applicationType:"",generateOrComplete:""}},async submitAddProcessForm(){this.$refs.addProcessFormRef.validate(async e=>{if(e)try{const e={name:this.addProcessForm.ruleName,description:this.addProcessForm.ruleDescription,rule_type:this.addProcessForm.ruleType,conditions:{application_type:this.addProcessForm.applicationType,generate_or_complete:this.addProcessForm.generateOrComplete,country:this.addProcessForm.country,process_item:this.addProcessForm.processItem,process_status:this.addProcessForm.processStatus},actions:{processor:this.addProcessForm.processor,fixed_personnel:this.addProcessForm.fixedPersonnel,is_assign_case:this.addProcessForm.isAssignCase,internal_deadline:{base_date:this.addProcessForm.internalBaseDate,months:this.addProcessForm.internalMonths,days:this.addProcessForm.internalDays},customer_deadline:{base_date:this.addProcessForm.customerBaseDate,months:this.addProcessForm.customerMonths,days:this.addProcessForm.customerDays},official_deadline:{base_date:this.addProcessForm.officialBaseDate,months:this.addProcessForm.officialMonths,days:this.addProcessForm.officialDays}},priority:1,is_effective:1===this.addProcessForm.isEffective?1:0,status:1};let t;if(this.currentEditRule&&this.currentEditRule.id?(console.log("正在更新新增处理事项规则ID:",this.currentEditRule.id,"数据:",e),t=await this.$api.processRule.update(this.currentEditRule.id,e)):(console.log("正在创建新增处理事项规则，数据:",e),t=await this.$api.processRule.create(e)),0===t.data.code){const e=this.currentEditRule&&this.currentEditRule.id?"更新":"创建";this.$message.success(e+"新增处理事项规则保存成功"),this.dialogVisible.addProcess=!1,this.selectedProcessItem&&this.loadProcessRules(this.selectedProcessItem)}else this.$message.error(t.data.msg||"保存失败")}catch(s){var t;console.error("保存新增处理事项规则失败:",s),this.$message.error("保存失败: "+((null===(t=s.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||s.message))}})},async submitUpdateProcessForm(){this.$refs.updateProcessFormRef.validate(async e=>{if(e)try{const e={name:this.updateProcessForm.ruleName,description:this.updateProcessForm.ruleDescription,rule_type:this.updateProcessForm.ruleType,application_type:this.updateProcessForm.applicationType,generate_or_complete:this.updateProcessForm.generateOrComplete,country:this.updateProcessForm.country,processor:this.updateProcessForm.processor,fixed_personnel:this.updateProcessForm.fixedPersonnel,conditions:{application_type:this.updateProcessForm.applicationType,generate_or_complete:this.updateProcessForm.generateOrComplete,country:this.updateProcessForm.country,process_item:this.updateProcessForm.processItem,process_status:this.updateProcessForm.processStatus},actions:{processor:this.updateProcessForm.processor,fixed_personnel:this.updateProcessForm.fixedPersonnel,internal_deadline:{base_date:this.updateProcessForm.internalBaseDate,months:this.updateProcessForm.internalMonths,days:this.updateProcessForm.internalDays},customer_deadline:{base_date:this.updateProcessForm.customerBaseDate,months:this.updateProcessForm.customerMonths,days:this.updateProcessForm.customerDays},official_deadline:{base_date:this.updateProcessForm.officialBaseDate,months:this.updateProcessForm.officialMonths,days:this.updateProcessForm.officialDays}},is_effective:1===this.updateProcessForm.isEffective?1:0,status:1};if(console.log("当前编辑规则:",this.currentEditRule),!this.currentEditRule||!this.currentEditRule.id)return void this.$message.error("无法获取规则ID，请重新选择要编辑的规则");const t=this.currentEditRule.id;console.log("更新规则ID:",t),console.log("更新数据:",e);const s=await this.$api.processRule.update(t,e);console.log("更新响应:",s),0===s.data.code?(this.$message.success("更新处理事项规则保存成功"),this.dialogVisible.updateProcess=!1,this.selectedProcessItem&&this.loadProcessRules(this.selectedProcessItem)):this.$message.error(s.data.msg||"保存失败")}catch(s){var t;console.error("保存更新处理事项规则失败:",s),this.$message.error("保存失败: "+((null===(t=s.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||s.message))}})},async submitUpdateStatusForm(){this.$refs.updateStatusFormRef.validate(async e=>{if(e)try{const e={name:this.updateStatusForm.ruleName,description:this.updateStatusForm.ruleDescription,rule_type:this.updateStatusForm.ruleType,application_type:this.updateStatusForm.applicationType,generate_or_complete:this.updateStatusForm.generateOrComplete,country:this.updateStatusForm.country,conditions:{country:this.updateStatusForm.country,case_status:this.updateStatusForm.caseStatus,application_type:this.updateStatusForm.applicationType,generate_or_complete:this.updateStatusForm.generateOrComplete},actions:{update_status:this.updateStatusForm.caseStatus},is_effective:1===this.updateStatusForm.isEffective?1:0,status:1};if(console.log("当前编辑规则:",this.currentEditRule),!this.currentEditRule||!this.currentEditRule.id)return void this.$message.error("无法获取规则ID，请重新选择要编辑的规则");const t=this.currentEditRule.id;console.log("更新状态规则ID:",t),console.log("更新状态数据:",e);const s=await this.$api.processRule.update(t,e);console.log("更新状态响应:",s),0===s.data.code?(this.$message.success("项目状态规则保存成功"),this.dialogVisible.updateStatus=!1,this.selectedProcessItem&&this.loadProcessRules(this.selectedProcessItem)):this.$message.error(s.data.msg||"保存失败")}catch(s){var t;console.error("保存项目状态规则失败:",s),this.$message.error("保存失败: "+((null===(t=s.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg)||s.message))}})},async submitAddRuleForm(){this.$refs.addRuleFormRef.validate(async e=>{if(e)try{const e={name:this.addRuleForm.ruleName,description:this.addRuleForm.ruleDescription,rule_type:this.addRuleForm.ruleType,case_type:this.selectedProcessItem?this.selectedProcessItem.parent_case_type:"",country:this.addRuleForm.country,application_type:this.addRuleForm.applicationType,generate_or_complete:this.addRuleForm.generateOrComplete,process_item_id:this.selectedProcessItem?this.selectedProcessItem.process_item_id:null,conditions:{country:this.addRuleForm.country,application_type:this.addRuleForm.applicationType,generate_or_complete:this.addRuleForm.generateOrComplete},actions:{},priority:1,status:1,is_effective:!0,sort_order:1},t=await this.$api.processRule.create(e);0===t.data.code?(this.$message.success("规则添加成功"),this.dialogVisible.addRule=!1,this.resetAddRuleForm(),this.selectedProcessItem&&this.loadProcessRules(this.selectedProcessItem)):this.$message.error(t.data.msg||"保存失败")}catch(t){console.error("保存规则失败:",t),this.$message.error("保存失败")}})},getRuleTypeLabel(e){const t={add_process:"新增处理事项",update_process:"更新处理事项",update_status:"更新项目状态"};return t[e]||e},getRuleCountryLabel(e){const t={CN:"中国",US:"美国",JP:"日本"};return t[e]||e},getRuleApplicationTypeLabel(e){const t={patent:"专利申请",trademark:"商标申请",copyright:"版权申请"};return t[e]||e},async loadProcessItemDetail(e){try{const t=await this.$api.processRule.getProcessItemDetail(e.process_item_id);t.data&&0===t.data.code?this.overviewData=[t.data.data]:this.overviewData=[{sequence:1,processItem:e.label,caseType:e.parent_case_type,businessType:"申请",applicationType:"通用",country:e.parent_country,processItemType:"内部处理"}]}catch(t){console.error("获取处理事项详情失败:",t),this.overviewData=[{sequence:1,processItem:e.label,caseType:e.parent_case_type,businessType:"申请",applicationType:"通用",country:e.parent_country,processItemType:"内部处理"}]}},async loadProcessRules(e){try{const t={process_item_id:e.process_item_id,case_type:e.parent_case_type,country:e.parent_country,process_item:e.label},s=await this.$api.processRule.getProcessItemRules(t);if(s.data&&0===s.data.code){const e=s.data.data||[];this.ruleData=e.map((e,t)=>({id:e.id,sequence:e.sequence||t+1,processItem:e.processItem||e.process_item,country:e.country,applicationType:e.applicationType||e.application_type,generateOrComplete:e.generateOrComplete||e.generate_or_complete,ruleName:e.ruleName||e.name,ruleType:e.ruleType||this.getRuleTypeLabel(e.rule_type),ruleDescription:e.ruleDescription||e.description,isEffective:void 0!==e.isEffective?Boolean(e.isEffective):1===e.is_effective,updater:e.updater||e.updater_name||"系统",updateTime:e.updateTime||e.updated_at,originalData:e}))}else this.ruleData=[],console.error("获取规则数据失败:",s.data&&s.data.msg)}catch(t){console.error("获取规则数据失败:",t),this.ruleData=[]}}}},i=c,n=(s("df3b"),s("2877")),d=Object(n["a"])(i,o,a,!1,null,"4e55196e",null);t["default"]=d.exports}}]);