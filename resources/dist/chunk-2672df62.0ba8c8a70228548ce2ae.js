(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2672df62"],{"05e4":function(e,a,t){"use strict";t("74f9")},"0cbe":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[e.showDetails&&e.updateProcess?a("div",{staticClass:"search-section"},[a("div",{staticClass:"left-buttons"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleReturn}},[e._v("返回")])],1)]):e._e(),a("div",{staticClass:"search-section"},[a("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"我方文号"}},[a("el-input",{attrs:{placeholder:"单行输入文本",clearable:"",size:"small"},model:{value:e.searchForm.ourRefNumber,callback:function(a){e.$set(e.searchForm,"ourRefNumber",a)},expression:"searchForm.ourRefNumber"}})],1),a("el-form-item",{attrs:{label:"申请号"}},[a("el-input",{attrs:{placeholder:"单行输入文本",clearable:"",size:"small"},model:{value:e.searchForm.applicationNo,callback:function(a){e.$set(e.searchForm,"applicationNo",a)},expression:"searchForm.applicationNo"}})],1),a("div",{staticClass:"search-buttons"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),e.showDetails?a("div",{staticClass:"detail-form-section"},[a("el-form",{staticClass:"detail-form",attrs:{model:e.formData,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"我方文号"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small",disabled:""},model:{value:e.formData.ourRefNumber,callback:function(a){e.$set(e.formData,"ourRefNumber",a)},expression:"formData.ourRefNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请号"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small",disabled:""},model:{value:e.formData.applicationNo,callback:function(a){e.$set(e.formData,"applicationNo",a)},expression:"formData.applicationNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"注册号"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small",disabled:""},model:{value:e.formData.registrationNo,callback:function(a){e.$set(e.formData,"registrationNo",a)},expression:"formData.registrationNo"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small",disabled:""},model:{value:e.formData.caseName,callback:function(a){e.$set(e.formData,"caseName",a)},expression:"formData.caseName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small",disabled:""},model:{value:e.formData.clientName,callback:function(a){e.$set(e.formData,"clientName",a)},expression:"formData.clientName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"双报"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.dualLink,callback:function(a){e.$set(e.formData,"dualLink",a)},expression:"formData.dualLink"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请类型"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.applicationType,callback:function(a){e.$set(e.formData,"applicationType",a)},expression:"formData.applicationType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商标分类"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.trademarkClass,callback:function(a){e.$set(e.formData,"trademarkClass",a)},expression:"formData.trademarkClass"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"项目状态"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.caseStatus,callback:function(a){e.$set(e.formData,"caseStatus",a)},expression:"formData.caseStatus"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"技术主导"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.technicalLead,callback:function(a){e.$set(e.formData,"technicalLead",a)},expression:"formData.technicalLead"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"业务人员"}},[a("el-input",{attrs:{placeholder:"单行输入",size:"small",disabled:""},model:{value:e.formData.businessPerson,callback:function(a){e.$set(e.formData,"businessPerson",a)},expression:"formData.businessPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"checkbox-group"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.formData.isPreReview,callback:function(a){e.$set(e.formData,"isPreReview",a)},expression:"formData.isPreReview"}},[e._v("预审案")]),a("el-checkbox",{attrs:{disabled:""},model:{value:e.formData.isPriorityReview,callback:function(a){e.$set(e.formData,"isPriorityReview",a)},expression:"formData.isPriorityReview"}},[e._v("优审案")])],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"项目备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"单行输入",rows:3,disabled:""},model:{value:e.formData.caseRemarks,callback:function(a){e.$set(e.formData,"caseRemarks",a)},expression:"formData.caseRemarks"}})],1)],1)],1)],1)],1):e._e(),e.showDetails?a("div",{staticClass:"process-table-section"},[a("div",{staticClass:"part-table-header"},[e._m(0),a("div",{staticClass:"part-table-buttons"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.updateProcess=!e.updateProcess}}},[e._v("更新")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),a("el-table-column",{attrs:{prop:"sequence",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"processItem",label:"处理事项","min-width":"120"}}),a("el-table-column",{attrs:{prop:"caseFee",label:"项目阶段",width:"100"}}),a("el-table-column",{attrs:{prop:"processStatus",label:"处理状态",width:"100"}}),a("el-table-column",{attrs:{prop:"internalDeadline",label:"内部期限",width:"100"}}),a("el-table-column",{attrs:{prop:"officialDeadline",label:"官方期限",width:"100"}}),a("el-table-column",{attrs:{prop:"issueDate",label:"发文日",width:"100"}}),a("el-table-column",{attrs:{prop:"receiptDate",label:"收文日",width:"100"}}),a("el-table-column",{attrs:{prop:"completionDate",label:"完成日",width:"100"}}),a("el-table-column",{attrs:{prop:"processor",label:"事项处理人",width:"120"}}),a("el-table-column",{attrs:{prop:"contractNumber",label:"合同编号",width:"120"}}),a("el-table-column",{attrs:{prop:"itemRemarks",label:"事项备注"}})],1)],1):e._e(),e.showDetails&&e.updateProcess?a("div",{staticClass:"bottom-form-section"},[a("el-form",{staticClass:"process-form",attrs:{model:e.processForm,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"处理状态"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.processForm.processStatus,callback:function(a){e.$set(e.processForm,"processStatus",a)},expression:"processForm.processStatus"}},[a("el-option",{attrs:{label:"待处理",value:"pending"}}),a("el-option",{attrs:{label:"处理中",value:"processing"}}),a("el-option",{attrs:{label:"已完成",value:"completed"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"完成日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.completionDate,callback:function(a){e.$set(e.processForm,"completionDate",a)},expression:"processForm.completionDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户期限"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.clientDeadline,callback:function(a){e.$set(e.processForm,"clientDeadline",a)},expression:"processForm.clientDeadline"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预计完成日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.expectedCompletionDate,callback:function(a){e.$set(e.processForm,"expectedCompletionDate",a)},expression:"processForm.expectedCompletionDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"定稿日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.topicDate,callback:function(a){e.$set(e.processForm,"topicDate",a)},expression:"processForm.topicDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"初稿日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.draftDate,callback:function(a){e.$set(e.processForm,"draftDate",a)},expression:"processForm.draftDate"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同代码"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small"},model:{value:e.processForm.contractCode,callback:function(a){e.$set(e.processForm,"contractCode",a)},expression:"processForm.contractCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"处理事项系数"}},[a("el-input",{attrs:{placeholder:"单行输入文本",size:"small"},model:{value:e.processForm.processQuantity,callback:function(a){e.$set(e.processForm,"processQuantity",a)},expression:"processForm.processQuantity"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"内容期限"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"年/月/日",size:"small"},model:{value:e.processForm.contentDeadline,callback:function(a){e.$set(e.processForm,"contentDeadline",a)},expression:"processForm.contentDeadline"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"更新原因"}},[a("el-input",{attrs:{type:"textarea",placeholder:"单行输入",rows:4},model:{value:e.processForm.updateReason,callback:function(a){e.$set(e.processForm,"updateReason",a)},expression:"processForm.updateReason"}})],1)],1)],1)],1)],1):e._e()])},l=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"part-table-title"},[a("span",[e._v("处理事项")])])}],r=(t("14d9"),t("e9f5"),t("ab43"),t("84fc")),o={name:"CaseUpdateUpdateProcess",data(){return{loading:!1,showDetails:!1,updateProcess:!1,searchForm:{ourRefNumber:"",applicationNo:""},formData:{ourRefNumber:"",applicationNo:"",registrationNo:"",caseName:"",clientName:"",dualLink:"",applicationType:"",trademarkClass:"",caseStatus:"",technicalLead:"",businessPerson:"",isPreReview:!1,isPriorityReview:!1,caseRemarks:""},processForm:{processStatus:"",completionDate:"",clientDeadline:"",expectedCompletionDate:"",topicDate:"",draftDate:"",contractCode:"",processQuantity:"",contentDeadline:"",updateReason:""},processData:[]}},created(){},methods:{async loadData(){const e=this.$route.params.id||this.$route.query.id;e?await this.getDetail(e):this.setDefaultData()},async getDetail(e){this.loading=!0;try{const a=await r["a"].getProcessDetail(e);if(a.data.success){const e=a.data.data;this.formData={ourRefNumber:e.case.our_ref_number||"",applicationNo:e.case.application_no||"",registrationNo:e.case.registration_no||"",caseName:e.case.case_name||"",clientName:e.case.client_name||"",dualLink:e.case.dual_link||"",applicationType:e.case.application_type||"",trademarkClass:e.case.trademark_class||"",caseStatus:e.case.status||"",technicalLead:e.case.technical_lead||"",businessPerson:e.case.business_person||"",isPreReview:e.case.is_pre_review||!1,isPriorityReview:e.case.is_priority_review||!1,caseRemarks:e.case.case_remark||""},e.process_items&&(this.processData=e.process_items.map((e,a)=>({id:e.id,sequence:a+1,processItem:e.process_name||"",caseFee:e.service_fees||"",processStatus:this.getProcessStatusText(e.process_status),internalDeadline:e.internal_deadline||"",officialDeadline:e.official_deadline||"",issueDate:e.issue_date||"",receiptDate:e.receipt_date||"",completionDate:e.completion_date||"",processor:e.processor||"",contractNumber:e.contract_code||"",itemRemarks:e.process_remark||""}))),this.showDetails=!0}else this.$message.error(a.data.message||"获取详情失败"),this.showDetails=!1}catch(a){console.error("获取详情失败:",a),this.$message.error("获取详情失败，请稍后重试"),this.showDetails=!1}finally{this.loading=!1}},getProcessStatusText(e){const a={1:"待处理",2:"处理中",3:"已完成",4:"已取消"};return a[e]||"未知"},async handleSubmit(){if(this.updateProcess&&""===this.processForm.updateReason.trim())return void this.$message.warning("请填写更新原因");const e=this.$route.params.id||this.$route.query.id;if(e){this.loading=!0;try{const a={processForm:this.processForm,selectedProcessItems:this.getSelectedProcessItems()},t=await r["a"].submitProcessUpdate(e,a);t.data.success?(this.$message.success("提交成功"),setTimeout(()=>{this.$router.push("/case/update/update-list")},1500)):this.$message.error(t.data.message||"提交失败")}catch(a){console.error("提交失败:",a),this.$message.error("提交失败，请稍后重试")}finally{this.loading=!1}}else this.$message.error("缺少必要参数")},handleReturn(){this.$router.push("/case/update/update-list")},handleDelete(){this.$message.info("删除功能暂未开放")},handleConsultant(){this.$message.info("续案问专员功能开发中...")},async handleSearch(){if(this.searchForm.ourRefNumber||this.searchForm.applicationNo){this.loading=!0;try{const e=await r["a"].getCaseOptions(this.searchForm);if(e.data.success&&e.data.data.length>0){const a=e.data.data[0];await this.getDetail(a.id),this.$message.success("查询成功")}else this.$message.warning("未找到匹配的项目"),this.showDetails=!1}catch(e){console.error("查询失败:",e),this.$message.error("查询失败，请稍后重试"),this.showDetails=!1}finally{this.loading=!1}}else this.$message.warning("请输入查询条件")},handleReset(){this.searchForm={ourRefNumber:"",applicationNo:""},this.showDetails=!1,this.updateProcess=!1,this.processData=[],this.$message.info("已重置")},getSelectedProcessItems(){return[]}}},i=o,c=(t("05e4"),t("2877")),n=Object(c["a"])(i,s,l,!1,null,"db1d70ee",null);a["default"]=n.exports},"74f9":function(e,a,t){}}]);